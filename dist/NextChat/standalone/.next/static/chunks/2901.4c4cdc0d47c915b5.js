(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2901],{84193:function(e,t,r){"use strict";var a,n,s=r(52846);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(null,arguments)}t.Z=function(e){return s.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),a||(a=s.createElement("defs",null,s.createElement("path",{id:"copy_svg__a",d:"M0 0h16v16H0z"}))),s.createElement("g",null,n||(n=s.createElement("mask",{id:"copy_svg__b",fill:"#fff"},s.createElement("use",{xlinkHref:"#copy_svg__a"}))),s.createElement("g",{mask:"url(#copy_svg__b)"},s.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 2.48V.94C0 .42.42 0 .94 0h8.12c.52 0 .94.42.94.94v8.12c0 .52-.42.94-.94.94H7.51",transform:"translate(4.333 1.667)"}),s.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M.94 0C.42 0 0 .42 0 .94v8.12c0 .52.42.94.94.94h8.12c.52 0 .94-.42.94-.94V.94C10 .42 9.58 0 9.06 0H.94Z",transform:"translate(1.667 4.333)"}))))}},72495:function(e,t,r){"use strict";var a,n,s=r(52846);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(null,arguments)}t.Z=function(e){return s.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),a||(a=s.createElement("defs",null,s.createElement("path",{id:"download_svg__a",d:"M0 0h16v16H0z"}))),s.createElement("g",null,n||(n=s.createElement("mask",{id:"download_svg__b",fill:"#fff"},s.createElement("use",{xlinkHref:"#download_svg__a"}))),s.createElement("g",{mask:"url(#download_svg__b)"},s.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M1 12h10c.55 0 1-.45 1-1V1c0-.55-.45-1-1-1H1C.45 0 0 .45 0 1v10c0 .55.45 1 1 1Z",transform:"translate(2 2)"}),s.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0h3.67l.66 1.33H9L9.67 0h3.66",transform:"translate(1.333 10.333)"}),s.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 3.33V0",transform:"translate(14 8.667)"}),s.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"m0 0 2 2 2-2",transform:"translate(6 7.333)"}),s.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 5.33V0",transform:"translate(8 4)"}),s.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 3.33V0",transform:"translate(2 8.667)"}))))}},49111:function(e,t,r){"use strict";var a,n,s=r(52846);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(null,arguments)}t.Z=function(e){return s.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"#fff"},e),a||(a=s.createElement("rect",{width:"100%",height:"100%",fill:"none"})),n||(n=s.createElement("g",{className:"loading_svg__currentLayer"},s.createElement("circle",{cx:4,cy:8,r:1.926,fill:"#333"},s.createElement("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:2,repeatCount:"indefinite",to:2,values:"2;1.2;2"}),s.createElement("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:1,repeatCount:"indefinite",to:1,values:"1;.5;1"})),s.createElement("circle",{cx:8,cy:8,r:1.274,fill:"#333",fillOpacity:.3},s.createElement("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:1.2,repeatCount:"indefinite",to:1.2,values:"1.2;2;1.2"}),s.createElement("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:.5,repeatCount:"indefinite",to:.5,values:".5;1;.5"})),s.createElement("circle",{cx:12,cy:8,r:1.926,fill:"#333"},s.createElement("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:2,repeatCount:"indefinite",to:2,values:"2;1.2;2"}),s.createElement("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:1,repeatCount:"indefinite",to:1,values:"1;.5;1"})))))}},12637:function(e,t,r){"use strict";var a,n,s=r(52846);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(null,arguments)}t.Z=function(e){return s.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),a||(a=s.createElement("defs",null,s.createElement("path",{id:"share_svg__a",d:"M0 0h16v16H0z"}))),s.createElement("g",null,n||(n=s.createElement("mask",{id:"share_svg__b",fill:"#fff"},s.createElement("use",{xlinkHref:"#share_svg__a"}))),s.createElement("g",{mask:"url(#share_svg__b)"},s.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M6.67 3.67C1.67 3.67 0 7.33 0 13c0 0 2-5 6.67-5v3.67l6-5.67-6-6v3.67Z",transform:"translate(2 1.333)"}))))}},2901:function(e,t,r){"use strict";r.r(t),r.d(t,{Artifacts:function(){return x},ArtifactsShareButton:function(){return y},HTMLPreview:function(){return _}});var a=r(57437),n=r(2265),s=r(59208),i=r(35499),l=r(84065),o=r(12637),c=r(84193),d=r(72495),f=r(59566),h=r(49111),u=r(98829),m=r(43446),g=r(65878),v=r(92944),p=r(75591),w=r(34307),k=r(99164),E=r.n(k);let _=(0,n.forwardRef)(function(e,t){let r=(0,n.useRef)(null),[s,i]=(0,n.useState)((0,l.x0)()),[o,c]=(0,n.useState)(600),[d,f]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=e=>{let{id:t,height:r,title:a}=e.data;f(a),t==s&&c(r)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[s]),(0,n.useImperativeHandle)(t,()=>({reload:()=>{i((0,l.x0)())}}));let h=(0,n.useMemo)(()=>{if(!e.autoHeight)return e.height||600;if("string"==typeof e.height)return e.height;let t=e.height||600;return o+40>t?t:o+40},[e.autoHeight,e.height,o]),u=(0,n.useMemo)(()=>{let t='<script>window.addEventListener("DOMContentLoaded", () => new ResizeObserver((entries) => parent.postMessage({id: \''.concat(s,"', height: entries[0].target.clientHeight}, '*')).observe(document.body))</script>");return e.code.includes("<!DOCTYPE html>")&&e.code.replace("<!DOCTYPE html>","<!DOCTYPE html>"+t),t+e.code},[e.code,s]);return(0,a.jsx)("iframe",{className:E()["artifacts-iframe"],ref:r,sandbox:"allow-forms allow-modals allow-scripts",style:{height:h},srcDoc:u,onLoad:()=>{(null==e?void 0:e.onLoad)&&e.onLoad(d)}},s)});function y(e){let{getCode:t,id:r,style:s,fileName:l}=e,[f,u]=(0,n.useState)(!1),[w,k]=(0,n.useState)(r),[E,_]=(0,n.useState)(!1),y=(0,n.useMemo)(()=>[location.origin,"#",p.y$.Artifacts,"/",w].join(""),[w]),x=e=>r?Promise.resolve({id:r}):fetch(p.L.Artifacts,{method:"POST",body:e}).then(e=>e.json()).then(e=>{let{id:t}=e;if(t)return{id:t};throw Error()}).catch(e=>{(0,g.CF)(m.ZP.Export.Artifacts.Error)});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"window-action-button",style:s,children:(0,a.jsx)(i.h,{icon:f?(0,a.jsx)(h.Z,{}):(0,a.jsx)(o.Z,{}),bordered:!0,title:m.ZP.Export.Artifacts.Title,onClick:()=>{f||(u(!0),x(t()).then(e=>{(null==e?void 0:e.id)&&(_(!0),k(null==e?void 0:e.id))}).finally(()=>u(!1)))}})}),E&&(0,a.jsx)("div",{className:"modal-mask",children:(0,a.jsx)(g.u_,{title:m.ZP.Export.Artifacts.Title,onClose:()=>_(!1),actions:[(0,a.jsx)(i.h,{icon:(0,a.jsx)(d.Z,{}),bordered:!0,text:m.ZP.Export.Download,onClick:()=>{(0,v.CP)(t(),"".concat(l||w,".html")).then(()=>_(!1))}},"download"),(0,a.jsx)(i.h,{icon:(0,a.jsx)(c.Z,{}),bordered:!0,text:m.ZP.Chat.Actions.Copy,onClick:()=>{(0,v.vQ)(y).then(()=>_(!1))}},"copy")],children:(0,a.jsx)("div",{children:(0,a.jsx)("a",{target:"_blank",href:y,children:y})})})})]})}function x(){let{id:e}=(0,s.UO)(),[t,r]=(0,n.useState)(""),[l,o]=(0,n.useState)(!0),[c,d]=(0,n.useState)(""),h=(0,n.useRef)(null);return(0,n.useEffect)(()=>{e&&fetch("".concat(p.L.Artifacts,"?id=").concat(e)).then(e=>{if(e.status>300)throw Error("can not get content");return e}).then(e=>e.text()).then(r).catch(e=>{(0,g.CF)(m.ZP.Export.Artifacts.Error)})},[e]),(0,a.jsxs)("div",{className:E().artifacts,children:[(0,a.jsxs)("div",{className:E()["artifacts-header"],children:[(0,a.jsx)("a",{href:p.Bv,target:"_blank",rel:"noopener noreferrer",children:(0,a.jsx)(i.h,{bordered:!0,icon:(0,a.jsx)(f.Z,{}),shadow:!0})}),(0,a.jsx)(i.h,{bordered:!0,style:{marginLeft:20},icon:(0,a.jsx)(u.Z,{}),shadow:!0,onClick:()=>{var e;return null===(e=h.current)||void 0===e?void 0:e.reload()}}),(0,a.jsx)("div",{className:E()["artifacts-title"],children:"NextChat Artifacts"}),(0,a.jsx)(y,{id:e,getCode:()=>t,fileName:c})]}),(0,a.jsxs)("div",{className:E()["artifacts-content"],children:[l&&(0,a.jsx)(w.Loading,{}),t&&(0,a.jsx)(_,{code:t,ref:h,autoHeight:!1,height:"100%",onLoad:e=>{d(e),o(!1)}})]})]})}},99164:function(e){e.exports={artifacts:"artifacts_artifacts__J06vB","artifacts-header":"artifacts_artifacts-header__s7Cdi","artifacts-title":"artifacts_artifacts-title__UXZs9","artifacts-content":"artifacts_artifacts-content__3pFba","artifacts-iframe":"artifacts_artifacts-iframe__mjsdx"}}}]);