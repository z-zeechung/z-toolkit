exports.id=629,exports.ids=[629],exports.modules={17382:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n,a,r=s(6413);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let l=function(e){return r.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),n||(n=r.createElement("defs",null,r.createElement("path",{id:"clear_svg__a",d:"M0 0h16v16H0z"}))),r.createElement("g",null,a||(a=r.createElement("mask",{id:"clear_svg__b",fill:"#fff"},r.createElement("use",{xlinkHref:"#clear_svg__a"}))),r.createElement("g",{mask:"url(#clear_svg__b)"},r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M1 9.67h8.67l1-9.67H0l1 9.67Z",transform:"translate(2.667 5)"}),r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0v3.33",transform:"translate(6.667 8.334)"}),r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0v3.33",transform:"translate(9.334 8.333)"}),r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"m0 4 5.44-4L8 4",transform:"translate(4 1)"}))))}},60403:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n,a,r=s(6413);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let l=function(e){return r.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"#fff"},e),n||(n=r.createElement("rect",{width:"100%",height:"100%",fill:"none"})),a||(a=r.createElement("g",{className:"loading_svg__currentLayer"},r.createElement("circle",{cx:4,cy:8,r:1.926,fill:"#333"},r.createElement("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:2,repeatCount:"indefinite",to:2,values:"2;1.2;2"}),r.createElement("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:1,repeatCount:"indefinite",to:1,values:"1;.5;1"})),r.createElement("circle",{cx:8,cy:8,r:1.274,fill:"#333",fillOpacity:.3},r.createElement("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:1.2,repeatCount:"indefinite",to:1.2,values:"1.2;2;1.2"}),r.createElement("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:.5,repeatCount:"indefinite",to:.5,values:".5;1;.5"})),r.createElement("circle",{cx:12,cy:8,r:1.926,fill:"#333"},r.createElement("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:2,repeatCount:"indefinite",to:2,values:"2;1.2;2"}),r.createElement("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:1,repeatCount:"indefinite",to:1,values:"1;.5;1"})))))}},30892:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n,a=s(6413);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let i=function(e){return a.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},e),n||(n=a.createElement("rect",{x:3,y:3,width:18,height:18,rx:2,ry:2})))}},83931:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n,a,r=s(6413);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let l=function(e){return r.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),n||(n=r.createElement("defs",null,r.createElement("path",{id:"prompt_svg__a",d:"M0 0h16v16H0z"}))),r.createElement("g",null,a||(a=r.createElement("mask",{id:"prompt_svg__b",fill:"#fff"},r.createElement("use",{xlinkHref:"#prompt_svg__a"}))),r.createElement("g",{mask:"url(#prompt_svg__b)"},r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3,strokeOpacity:1,strokeDasharray:"0 0"},d:"m1.367 1.367 1.41 1.41M4.667 0v2m0 0V0m3.295 1.367-1.41 1.41m0 0 1.41-1.41m1.371 3.3h-2m0 0h2m-1.37 3.295-1.41-1.41m0 0 1.41 1.41M4.666 9.333v-2m0 0v2m-3.3-1.37 1.41-1.41m0 0-1.41 1.41M0 4.666h2m0 0H0",transform:"translate(5.333 1.333)"}),r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8.01 0 0 8.01",transform:"translate(1.848 6.138)"}))))}},20733:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n,a,r=s(6413);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let l=function(e){return r.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),n||(n=r.createElement("defs",null,r.createElement("path",{id:"return_svg__a",d:"M0 0h16v16H0z"}))),r.createElement("g",null,a||(a=r.createElement("mask",{id:"return_svg__b",fill:"#fff"},r.createElement("use",{xlinkHref:"#return_svg__a"}))),r.createElement("g",{mask:"url(#return_svg__b)"},r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M2.33 0 0 2l2.33 2.33",transform:"translate(2 2.667)"}),r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0h7.66c2.3 0 4.25 1.87 4.34 4.17.09 2.42-1.91 4.5-4.34 4.5H2",transform:"translate(2 4.667)"}))))}},24443:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n,a,r=s(6413);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let l=function(e){return r.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),n||(n=r.createElement("defs",null,r.createElement("path",{id:"share_svg__a",d:"M0 0h16v16H0z"}))),r.createElement("g",null,a||(a=r.createElement("mask",{id:"share_svg__b",fill:"#fff"},r.createElement("use",{xlinkHref:"#share_svg__a"}))),r.createElement("g",{mask:"url(#share_svg__b)"},r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M6.67 3.67C1.67 3.67 0 7.33 0 13c0 0 2-5 6.67-5v3.67l6-5.67-6-6v3.67Z",transform:"translate(2 1.333)"}))))}},50952:(e,t,s)=>{"use strict";s.d(t,{UK:()=>o,YZ:()=>i,x6:()=>l});var n=s(3729),a=s(76060),r=s(82860);function i(e={}){let[t,s]=(0,a.lr)();(0,n.useEffect)(()=>{let n=!1;t.forEach((s,a)=>{"function"==typeof e[a]&&(e[a](s),t.delete(a),n=!0)}),n&&s(t)},[t,e])}let l=/^[:ï¼š]/;function o(e={}){function t(e){return e.match(l)?e.slice(1):e}return{match:function(s){let n=t(s),a="function"==typeof e[n];return{matched:a,invoke:()=>a&&e[n](s)}},search:function(s){let n=t(s),a=r.ZP.Chat.Commands;return Object.keys(e).filter(e=>e.startsWith(n)).map(e=>({title:a[e],content:":"+e}))}}}},9629:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Chat:()=>sl,ChatAction:()=>st,ChatActions:()=>ss,DeleteImageButton:()=>sa,EditMessageModal:()=>sn,PromptHints:()=>t9,SessionConfigModel:()=>t7,ShortcutKeyModal:()=>sr});var n,a,r,i,l,o,c,h,d,m,u,g,p,f,v,x,w,y,_,k,j,C,E,b,S,M,N,P,Z,O,T,A,L,D,I,R,H,K,z,F,B,U,W,V,$,G,X,Q,q,Y=s(95344),J=s(75499),ee=s(3729),et=s(6413);function es(){return(es=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let en=function(e){return et.createElement("svg",es({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),n||(n=et.createElement("defs",null,et.createElement("path",{id:"send-white_svg__a",d:"M0 0h16v16H0z"}))),et.createElement("g",null,a||(a=et.createElement("mask",{id:"send-white_svg__b",fill:"#fff"},et.createElement("use",{xlinkHref:"#send-white_svg__a"}))),et.createElement("g",{mask:"url(#send-white_svg__b)"},et.createElement("path",{style:{stroke:"#fff",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 4.71 6.67 6l1.67 6.67L12.67 0 0 4.71Z",transform:"translate(1.333 2)"}),et.createElement("path",{style:{stroke:"#fff",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 1.89 1.89 0",transform:"translate(8.003 6.117)"}))))};function ea(){return(ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let er=function(e){return et.createElement("svg",ea({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),r||(r=et.createElement("defs",null,et.createElement("path",{id:"brain_svg__a",d:"M0 0h16v16H0z"}))),et.createElement("g",null,i||(i=et.createElement("mask",{id:"brain_svg__b",fill:"#fff"},et.createElement("use",{xlinkHref:"#brain_svg__a"}))),et.createElement("g",{mask:"url(#brain_svg__b)"},et.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M5.01 13.33c-.32-1.06-.82-1.86-1.48-2.38-.98-.78-2.56-.3-3.14-1.11-.58-.8.41-2.29.76-3.17.34-.88-1.33-1.19-1.13-1.44.13-.16.97-.64 2.53-1.44C3 1.26 4.63 0 7.47 0c4.24 0 5.86 3.6 5.86 5.89 0 2.29-1.96 4.76-4.75 5.29-.25.37.11 1.08 1.08 2.15",transform:"translate(1.333 1.333)"}),et.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M2.1 3.33c-.19 1.09.04 1.6.69 1.53.65-.07 1.05-.34 1.18-.81 1.02.28 1.57.04 1.66-.72.12-1.15-.5-2.07-.75-2.07s-.91-.03-.91-.38C3.97.52 3.2.33 2.5.33c-.69 0-.27-.47-1.23-.29C.64.17.26.44.13.88c-.22.84-.16 1.43.19 1.78.35.34.94.56 1.78.67Z",transform:"translate(6.374 3.957)"}),et.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M1.97 0c-.34.21-.8.56-1 .83-.49.69-.88 1.1-.97 1.54",transform:"translate(8.193 8.5)"}))))};function ei(){return(ei=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let el=function(e){return et.createElement("svg",ei({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),l||(l=et.createElement("defs",null,et.createElement("path",{id:"rename_svg__a",d:"M0 0h16v16H0z"}))),et.createElement("g",null,o||(o=et.createElement("mask",{id:"rename_svg__b",fill:"#fff"},et.createElement("use",{xlinkHref:"#rename_svg__a"}))),et.createElement("g",{mask:"url(#rename_svg__b)"},et.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M2.83 13.2 13.2 2.83 10.37 0 0 10.37v2.83h2.83Z",transform:"translate(1.775 1.3)"}),et.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"m0 0 2.83 2.83",transform:"translate(9.317 4.13)"}))))};var eo=s(24443),ec=s(20733),eh=s(81482);function ed(){return(ed=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let em=function(e){return et.createElement("svg",ed({xmlns:"http://www.w3.org/2000/svg",fill:"none",width:16,height:16,viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"speak_svg__w-4 speak_svg__h-4"},e),c||(c=et.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25h2.24z"})))};function eu(){return(eu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let eg=function(e){return et.createElement("svg",eu({xmlns:"http://www.w3.org/2000/svg",fill:"none",width:16,height:16,viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"speak-stop_svg__w-4 speak-stop_svg__h-4"},e),h||(h=et.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75 19.5 12m0 0 2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6 4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25h2.24Z"})))};var ep=s(39866),ef=s(60403),ev=s(83931),ex=s(38740),ew=s(34423),ey=s(66363),e_=s(30841);function ek(){return(ek=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let ej=function(e){return et.createElement("svg",ek({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),et.createElement("path",{style:{fill:"#333",opacity:1},d:"M13.275-.275c.261.26.392.576.392.945v10.66c0 .37-.131.684-.392.945a1.288 1.288 0 0 1-.945.392H1.67c-.37 0-.684-.13-.945-.392a1.288 1.288 0 0 1-.392-.945V.67c0-.37.13-.684.392-.945.26-.261.576-.392.945-.392h10.66c.369 0 .684.13.945.392zM1.667 11.33c0 .002 0 .003.003.003h10.66c.002 0 .003 0 .003-.003V.67c0-.002 0-.003-.003-.003H1.67c-.002 0-.003 0-.003.003z",transform:"translate(1 2)"}),et.createElement("path",{style:{fill:"#333",opacity:1},d:"M9.763 7.507a.666.666 0 0 1-.867 0L7 5.878 5.104 7.506a.665.665 0 0 1-.867.001L2.331 5.878.434 7.506a.66.66 0 0 1-.485.16.66.66 0 0 1-.53-.338.665.665 0 0 1 .147-.834l2.33-2a.666.666 0 0 1 .867 0L4.67 6.123l1.897-1.629a.666.666 0 0 1 .868 0l1.897 1.629 1.906-1.63a.668.668 0 0 1 .867.002l2.33 2a.66.66 0 0 1 .23.455.661.661 0 0 1-.252.575.666.666 0 0 1-.846-.019l-1.897-1.628z",transform:"translate(1 2)"}),d||(d=et.createElement("defs",null,et.createElement("path",{id:"break_svg__a",d:"M0 0h16v16H0z"}))))};function eC(){return(eC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let eE=function(e){return et.createElement("svg",eC({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),et.createElement("g",null,m||(m=et.createElement("mask",{id:"chat-settings_svg__b",fill:"#fff"},et.createElement("use",{xlinkHref:"#chat-settings_svg__a"}))),et.createElement("g",{mask:"url(#chat-settings_svg__b)"},et.createElement("path",{style:{fill:"#333",opacity:1},d:"M6.728 14.598a.665.665 0 0 1-.828.434 7.294 7.294 0 0 1-3.187-1.945.666.666 0 0 1-.026-.896c.207-.241.31-.527.31-.857 0-.37-.13-.685-.389-.944A1.286 1.286 0 0 0 1.663 10h-.08a.662.662 0 0 1-.665-.288.665.665 0 0 1-.098-.235 7.234 7.234 0 0 1 .188-3.675.662.662 0 0 1 .635-.465h.02c.37 0 .684-.13.944-.392.26-.26.39-.574.39-.942 0-.215-.045-.415-.134-.6a.666.666 0 0 1 .148-.78A7.292 7.292 0 0 1 6.034.932a.666.666 0 0 1 .774.34c.11.219.272.394.483.524.216.135.454.202.712.202.254 0 .488-.067.703-.201.211-.131.372-.306.483-.524a.666.666 0 0 1 .773-.34 7.404 7.404 0 0 1 3.03 1.688.664.664 0 0 1 .143.8c-.09.174-.135.368-.135.583 0 .366.13.68.392.941.262.262.575.393.941.393h.03a.664.664 0 0 1 .636.465c.22.695.331 1.43.331 2.201a7.34 7.34 0 0 1-.143 1.474.66.66 0 0 1-.27.411.666.666 0 0 1-.478.115 1 1 0 0 0-.106-.003c-.367 0-.681.13-.941.39-.261.26-.392.574-.392.943 0 .322.106.61.317.865a.662.662 0 0 1 .1.686.671.671 0 0 1-.133.202 7.294 7.294 0 0 1-3.187 1.945.674.674 0 0 1-.503-.047.659.659 0 0 1-.325-.387 1.311 1.311 0 0 0-.477-.667 1.288 1.288 0 0 0-.789-.26c-.297 0-.564.087-.798.26-.23.17-.389.393-.477.667zm3.52-1.032c.626-.253 1.191-.6 1.696-1.042a2.603 2.603 0 0 1-.277-1.19 2.642 2.642 0 0 1 .784-1.888 2.646 2.646 0 0 1 1.51-.753 6.393 6.393 0 0 0-.118-2.067 2.655 2.655 0 0 1-1.394-.738 2.656 2.656 0 0 1-.782-1.884c0-.239.029-.468.087-.687a6.05 6.05 0 0 0-1.693-.954c-.182.22-.398.41-.65.566-.431.268-.9.402-1.408.402-.511 0-.983-.134-1.414-.401a2.632 2.632 0 0 1-.653-.567 5.936 5.936 0 0 0-1.69.957 2.74 2.74 0 0 1-.125 1.72c-.134.319-.324.601-.57.847a2.641 2.641 0 0 1-1.389.738 5.903 5.903 0 0 0-.12 2.069 2.642 2.642 0 0 1 1.509.753 2.654 2.654 0 0 1 .779 1.888c0 .433-.091.831-.274 1.192.504.44 1.068.787 1.692 1.04.172-.272.393-.507.664-.707.47-.348 1-.522 1.591-.522.587 0 1.115.174 1.584.523.27.2.49.435.661.705z"}),et.createElement("path",{style:{fill:"#333",opacity:1},d:"M10.122 10.122a2.987 2.987 0 0 1-2.125.881 2.969 2.969 0 0 1-2.122-.883 2.983 2.983 0 0 1-.64-.955A2.984 2.984 0 0 1 5 7.997a2.974 2.974 0 0 1 .876-2.12A2.974 2.974 0 0 1 7.996 5c.407 0 .797.078 1.169.235.36.151.678.364.955.64a2.969 2.969 0 0 1 .883 2.122 2.987 2.987 0 0 1-.881 2.125zM7.997 6.333c-.461 0-.854.162-1.178.486a1.603 1.603 0 0 0-.486 1.178c0 .462.163.857.488 1.183.324.327.716.49 1.176.49.46 0 .855-.164 1.182-.491.327-.327.491-.721.491-1.182 0-.46-.163-.852-.49-1.176a1.618 1.618 0 0 0-1.183-.488z"}))),u||(u=et.createElement("defs",null,et.createElement("path",{id:"chat-settings_svg__a",d:"M0 0h16v16H0z"}))))};var eb=s(17382);function eS(){return(eS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let eM=function(e){return et.createElement("svg",eS({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),et.createElement("g",null,g||(g=et.createElement("mask",{id:"pin_svg__b",fill:"#fff"},et.createElement("use",{xlinkHref:"#pin_svg__a"}))),et.createElement("g",{mask:"url(#pin_svg__b)"},et.createElement("path",{style:{fill:"#333",opacity:1},d:"m6.685 8.81-4 5.44-.537-.394-.397-.536 5.42-4.01a.666.666 0 0 1 .866.062l.532.528 2.07 2.063-.471.473-.472-.472c.3-.3.457-.62.472-.963.015-.353-.108-.798-.37-1.333a.665.665 0 0 1 .017-.616l2.36-4.25a.662.662 0 0 1 .679-.336l1.65.24-.096.66-.472.471-3.77-3.77.472-.471.66-.096.24 1.65a.664.664 0 0 1-.337.678l-4.25 2.36a.665.665 0 0 1-.646.001c-.479-.265-.903-.388-1.27-.369-.358.018-.69.18-.996.487l-.471-.471.471-.472 2.06 2.06.52.52a.665.665 0 0 1 .066.867zM5.61 8.02l.537.396-.472.471-.52-.52-2.06-2.06a.665.665 0 0 1 0-.943c.548-.548 1.172-.84 1.87-.875.622-.032 1.283.146 1.984.533l-.322.584-.324-.583 4.25-2.36.324.583-.66.096-.24-1.65a.664.664 0 0 1 .66-.763.665.665 0 0 1 .471.195l3.77 3.77a.666.666 0 0 1-.567 1.131l-1.65-.24.096-.66.583.324-2.36 4.25-.583-.323.599-.293c.36.738.527 1.396.503 1.974-.029.689-.316 1.305-.86 1.85a.664.664 0 0 1-.842.083.667.667 0 0 1-.101-.082l-2.068-2.062-.531-.527.47-.473.396.535-5.42 4.01a.663.663 0 0 1-.791.002.664.664 0 0 1-.142-.932z"}))),p||(p=et.createElement("defs",null,et.createElement("path",{id:"pin_svg__a",d:"M0 0h16v16H0z"}))))};var eN=s(99992),eP=s(26989),eZ=s(85759);function eO(){return(eO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let eT=function(e){return et.createElement("svg",eO({xmlns:"http://www.w3.org/2000/svg",fill:"none",height:16,width:16,xmlSpace:"preserve"},e),f||(f=et.createElement("rect",{width:"100%",height:"100%"})),v||(v=et.createElement("g",{className:"image_svg__currentLayer"},et.createElement("g",{fill:"#333"},et.createElement("path",{d:"M2.47 2.47h1.977v-.782H1.688v2.76h.781zM11.553 1.688v.781h1.978v1.978h.78V1.688zM13.53 13.53h-1.977v.782h2.759v-2.76h-.781zM2.47 11.553h-.782v2.759h2.76v-.781H2.468zM8.83 6.243c.682 0 1.237-.555 1.237-1.236S9.512 3.77 8.83 3.77a1.238 1.238 0 0 0 0 2.473zM3.77 12.23h8.46V9.71l-1.527-1.611-1.85 1.077-2.578-1.842L3.77 9.977z"})))))};function eA(){return(eA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let eL=function(e){return et.createElement("svg",eA({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),x||(x=et.createElement("defs",null,et.createElement("path",{id:"light_svg__a",d:"M0 0h16v16H0z"}))),et.createElement("g",null,w||(w=et.createElement("mask",{id:"light_svg__b",fill:"#fff"},et.createElement("use",{xlinkHref:"#light_svg__a"}))),et.createElement("g",{mask:"url(#light_svg__b)"},et.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8.67 4.33C8.67 1.94 6.73 0 4.33 0 1.94 0 0 1.94 0 4.33a4.334 4.334 0 1 0 8.67 0Z",transform:"translate(3.667 3.667)"}),et.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(7.167 .333)"}),et.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(12 2.333)"}),et.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(14 7.167)"}),et.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(12 12)"}),et.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(7.167 14)"}),et.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(2.333 12)"}),et.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(.333 7.167)"}),et.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(2.333 2.333)"}))))};function eD(){return(eD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let eI=function(e){return et.createElement("svg",eD({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),y||(y=et.createElement("defs",null,et.createElement("path",{id:"dark_svg__a",d:"M0 0h16v16H0z"}))),et.createElement("g",null,_||(_=et.createElement("mask",{id:"dark_svg__b",fill:"#fff"},et.createElement("use",{xlinkHref:"#dark_svg__a"}))),et.createElement("g",{mask:"url(#dark_svg__b)"},et.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M6.67 0C2.98 0 0 2.98 0 6.67a6.66 6.66 0 0 0 6.67 6.66c3.68 0 6.66-2.98 6.66-6.66 0-.47-.04-.92-.13-1.35a4.251 4.251 0 0 1-4.11 3.16c-2.34 0-4.24-1.89-4.24-4.24 0-1.97 1.34-3.63 3.17-4.1C7.58.05 7.13 0 6.67 0Z",transform:"translate(1.333 1.333)"}))))};function eR(){return(eR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let eH=function(e){return et.createElement("svg",eR({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),k||(k=et.createElement("defs",null,et.createElement("path",{id:"auto_svg__a",d:"M0 0h16v16H0z"}))),et.createElement("g",null,j||(j=et.createElement("mask",{id:"auto_svg__b",fill:"#fff"},et.createElement("use",{xlinkHref:"#auto_svg__a"}))),et.createElement("g",{mask:"url(#auto_svg__b)"},et.createElement("path",{style:{stroke:"#333",strokeWidth:1,strokeOpacity:1,strokeDasharray:"0 0"},d:"m0 5.337.73-1.67m3.938 1.67-.73-1.67M.728 3.67 2.33 0l1.61 3.67M.73 3.667h3.21",transform:"translate(5.667 5.333)"}),et.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M13.07 5.33A6.672 6.672 0 0 0 0 5.33l2-.66",transform:"translate(1.333 1.333)"}),et.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0a6.672 6.672 0 0 0 13.07 0l-1.74.67",transform:"translate(1.333 9.333)"}))))};function eK(){return(eK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let ez=function(e){return et.createElement("svg",eK({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),C||(C=et.createElement("defs",null,et.createElement("path",{id:"bottom_svg__a",d:"M0 0h16v16H0z"}))),et.createElement("g",null,E||(E=et.createElement("mask",{id:"bottom_svg__b",fill:"#fff"},et.createElement("use",{xlinkHref:"#bottom_svg__a"}))),et.createElement("g",{mask:"url(#bottom_svg__b)"},et.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8 0 4 4 0 0",transform:"translate(4 4)"}),et.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8 0 4 4 0 0",transform:"translate(4 8)"}))))};var eF=s(30892);function eB(){return(eB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let eU=function(e){return et.createElement("svg",eB({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),et.createElement("g",null,b||(b=et.createElement("mask",{id:"robot_svg__b",fill:"#fff"},et.createElement("use",{xlinkHref:"#robot_svg__a"}))),et.createElement("g",{mask:"url(#robot_svg__b)"},et.createElement("path",{style:{fill:"#333",opacity:1},d:"M3.67 13.67h8.66c.002 0 .003-.001.003-.003V6.334H3.67c-.002 0-.003 0-.003.003v7.33c0 .002 0 .003.003.003zm0 1.333c-.37 0-.684-.13-.945-.391a1.288 1.288 0 0 1-.392-.945v-7.33c0-.37.13-.685.392-.946.26-.26.576-.391.945-.391h8.66c.37 0 .684.13.945.391.261.261.392.577.392.946v7.33c0 .369-.13.684-.392.945a1.288 1.288 0 0 1-.945.391z"}),et.createElement("path",{style:{fill:"#333",opacity:1},d:"M9.819 6.127a.666.666 0 0 1-1.05-.81l1.67-2.67a.665.665 0 0 1 1.107-.034.663.663 0 0 1 .023.74l-1.67 2.67a.665.665 0 0 1-.08.104zM7.293 5.434a.665.665 0 0 1-1.01.779.665.665 0 0 1-.178-.19l-1.67-2.67a.665.665 0 0 1 .952-.896.665.665 0 0 1 .178.19l1.67 2.67a.665.665 0 0 1 .058.117z"}),et.createElement("path",{style:{fill:"#333",opacity:1},d:"M11.337 2.333c-.003 0-.004.001-.004.004l-.001-.01a.007.007 0 0 0 .005.003h-.007v.007c0-.002 0-.004-.002-.005l.009.001zm0-1.333c.366 0 .679.131.939.394.258.261.387.575.387.943 0 .364-.13.676-.39.936s-.572.39-.936.39c-.368 0-.682-.129-.943-.388A1.273 1.273 0 0 1 10 2.337c0-.37.13-.685.391-.946.262-.26.577-.391.946-.391zM4.67 2.333c-.002 0-.003.001-.003.004 0-.005 0-.008-.002-.01a.007.007 0 0 0 .005.003h-.006v.007c0-.002-.001-.004-.003-.005l.009.001zM4.67 1c.366 0 .679.131.939.394.258.261.388.575.388.943 0 .364-.13.676-.39.936s-.573.39-.937.39c-.367 0-.681-.129-.943-.388a1.273 1.273 0 0 1-.394-.938c0-.37.13-.685.392-.946.26-.26.576-.391.945-.391zM6.663 10.003h2.67c.184 0 .34-.065.469-.194a.655.655 0 0 0 .195-.479.638.638 0 0 0-.196-.467.638.638 0 0 0-.468-.196h-2.67a.638.638 0 0 0-.467.196A.638.638 0 0 0 6 9.33c0 .188.065.347.195.479.128.13.284.194.468.194zm0 1.334a1.974 1.974 0 0 1-1.416-.59 2.001 2.001 0 0 1 1.416-3.413h2.67a1.99 1.99 0 0 1 1.41.587 1.99 1.99 0 0 1 .587 1.409 2.002 2.002 0 0 1-1.997 2.007zM2 10.663h1.003a.666.666 0 1 1 0 1.334h-1.67a.666.666 0 0 1-.666-.667V8a.665.665 0 0 1 .666-.667h1.67a.665.665 0 0 1 .555 1.037.665.665 0 0 1-.555.297H2zM14.8 7.346a.664.664 0 0 1 .537.654v3.33a.666.666 0 0 1-.667.667H13a.666.666 0 1 1 0-1.334h1.003V8.667H13a.665.665 0 0 1-.471-1.138.664.664 0 0 1 .471-.196h1.67c.044 0 .087.005.13.013z"}))),S||(S=et.createElement("defs",null,et.createElement("path",{id:"robot_svg__a",d:"M0 0h16v16H0z"}))))};function eW(){return(eW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let eV=function(e){return et.createElement("svg",eW({width:16,height:16,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),M||(M=et.createElement("path",{d:"M42 7H6a2 2 0 0 0-2 2v30a2 2 0 0 0 2 2h36a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2Z",stroke:"#333",strokeWidth:4})),N||(N=et.createElement("path",{d:"M30 30V18l8 12V18M10 30V18l8 12V18",stroke:"#333",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round"})),P||(P=et.createElement("path",{d:"M24 20v1M24 27v1",stroke:"#333",strokeWidth:4,strokeLinecap:"round"})))};function e$(){return(e$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let eG=function(e){return et.createElement("svg",e$({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"#333",className:"hd_svg__bi hd_svg__bi-badge-hd"},e),Z||(Z=et.createElement("path",{d:"M7.396 11V5.001H6.209v2.44H3.687V5H2.5v6h1.187V8.43h2.522V11zM8.5 5.001V11h2.188c1.811 0 2.685-1.107 2.685-3.015 0-1.894-.86-2.984-2.684-2.984zm1.187.967h.843c1.112 0 1.622.686 1.622 2.04 0 1.353-.505 2.02-1.622 2.02h-.843z"})),O||(O=et.createElement("path",{d:"M14 3a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zM2 2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z"})))};function eX(){return(eX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let eQ=function(e){return et.createElement("svg",eX({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"#333",className:"palette_svg__bi palette_svg__bi-palette"},e),T||(T=et.createElement("path",{d:"M8 5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m4 3a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M5.5 7a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m.5 6a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3"})),A||(A=et.createElement("path",{d:"M16 8c0 3.15-1.866 2.585-3.567 2.07C11.42 9.763 10.465 9.473 10 10c-.603.683-.475 1.819-.351 2.92C9.826 14.495 9.996 16 8 16a8 8 0 1 1 8-8m-8 7c.611 0 .654-.171.655-.176.078-.146.124-.464.07-1.119-.014-.168-.037-.37-.061-.591-.052-.464-.112-1.005-.118-1.462-.01-.707.083-1.61.704-2.314.369-.417.845-.578 1.272-.618.404-.038.812.026 1.16.104.343.077.702.186 1.025.284l.028.008c.346.105.658.199.953.266.653.148.904.083.991.024C14.717 9.38 15 9.161 15 8a7 7 0 1 0-7 7"})))};function eq(){return(eq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let eY=function(e){return et.createElement("svg",eq({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),et.createElement("g",null,L||(L=et.createElement("mask",{id:"plugin_svg__b",fill:"#fff"},et.createElement("use",{xlinkHref:"#plugin_svg__a"}))),et.createElement("g",{mask:"url(#plugin_svg__b)"},et.createElement("path",{style:{fill:"#333",opacity:1},d:"M6.945 1.725c.261.26.392.576.392.945V6c0 .37-.13.684-.392.945A1.288 1.288 0 0 1 6 7.337H2.67c-.37 0-.684-.13-.945-.392A1.288 1.288 0 0 1 1.333 6V2.67c0-.37.13-.684.392-.945.26-.261.576-.392.945-.392H6c.37 0 .684.13.945.392zM2.667 6c0 .002 0 .003.003.003H6c.002 0 .003 0 .003-.003V2.67c0-.002 0-.003-.003-.003H2.67c-.002 0-.003 0-.003.003zM6.945 9.058c.261.261.392.576.392.945v3.33c0 .37-.13.685-.392.946A1.288 1.288 0 0 1 6 14.67H2.67c-.37 0-.684-.13-.945-.391a1.288 1.288 0 0 1-.392-.946v-3.33c0-.369.13-.684.392-.945.26-.26.576-.391.945-.391H6c.37 0 .684.13.945.391zm-4.278 4.275c0 .003 0 .004.003.004H6c.002 0 .003-.001.003-.004v-3.33c0-.002 0-.003-.003-.003H2.67c-.002 0-.003.001-.003.003zM13.789 6.455a2.987 2.987 0 0 1-2.126.882c-.407 0-.797-.08-1.169-.238a2.97 2.97 0 0 1-.952-.645 2.983 2.983 0 0 1-.64-.956 2.984 2.984 0 0 1-.235-1.168 2.974 2.974 0 0 1 .876-2.12 2.973 2.973 0 0 1 2.12-.877c.407 0 .796.079 1.169.235.36.151.678.365.955.64a2.97 2.97 0 0 1 .883 2.122 2.988 2.988 0 0 1-.882 2.125zm-2.126-3.788c-.46 0-.853.162-1.177.486A1.603 1.603 0 0 0 10 4.33c0 .462.162.857.487 1.184.325.326.717.49 1.176.49.461 0 .855-.164 1.183-.492.327-.327.49-.721.49-1.182 0-.46-.163-.851-.489-1.176a1.618 1.618 0 0 0-1.184-.487zM14.278 9.058c.261.261.392.576.392.945v3.33c0 .37-.13.685-.392.946a1.288 1.288 0 0 1-.945.391h-3.33c-.369 0-.684-.13-.945-.391a1.288 1.288 0 0 1-.391-.946v-3.33c0-.369.13-.684.391-.945.261-.26.576-.391.945-.391h3.33c.37 0 .684.13.945.391zM10 13.333c0 .003.001.004.003.004h3.33c.003 0 .004-.001.004-.004v-3.33c0-.002-.001-.003-.004-.003h-3.33c-.002 0-.003.001-.003.003z"}))),D||(D=et.createElement("defs",null,et.createElement("path",{id:"plugin_svg__a",d:"M0 0h16v16H0z"}))))};function eJ(){return(eJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let e0=function(e){return et.createElement("svg",eJ({width:16,height:16,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),I||(I=et.createElement("path",{d:"M42 7H6a2 2 0 0 0-2 2v28a2 2 0 0 0 2 2h36a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2Z",stroke:"#000",strokeWidth:3,strokeLinejoin:"round"})),R||(R=et.createElement("path",{d:"M12 19h2M21 19h2M29 19h7M12 28h24",stroke:"#000",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"})))};function e1(){return(e1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let e3=function(e){return et.createElement("svg",e1({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 24 24"},e),H||(H=et.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10.155 3.247c-.519.396-1.129 1.004-2.012 1.887s-1.49 1.493-1.887 2.012c-.383.502-.497.83-.497 1.14s.114.638.497 1.14c.397.52 1.004 1.13 1.887 2.012l4.419 4.419c.883.883 1.493 1.49 2.012 1.887.502.383.83.497 1.14.497s.638-.114 1.14-.497c.519-.396 1.129-1.004 2.012-1.887s1.49-1.493 1.887-2.012c.383-.503.497-.83.497-1.14s-.114-.638-.497-1.14c-.396-.52-1.004-1.13-1.887-2.012l-4.419-4.419c-.883-.883-1.493-1.49-2.012-1.887-.502-.383-.83-.497-1.14-.497s-.637.114-1.14.497m-.91-1.192c.636-.485 1.28-.805 2.05-.805s1.414.32 2.05.805c.609.464 1.29 1.145 2.125 1.98l.244.245c.239-.238.451-.44.685-.574a2.31 2.31 0 0 1 2.312 0c.267.154.505.393.787.675l.06.06.061.061c.282.282.521.52.675.787a2.31 2.31 0 0 1 0 2.312c-.135.234-.336.446-.574.685l.245.244c.835.836 1.516 1.516 1.98 2.125.485.636.805 1.28.805 2.05s-.32 1.414-.805 2.05c-.464.608-1.145 1.289-1.98 2.124l-.077.077c-.835.835-1.516 1.516-2.125 1.98-.635.485-1.28.805-2.05.805-.768 0-1.413-.32-2.049-.805-.609-.464-1.29-1.145-2.125-1.98l-.244-.245-4.993 4.994-.06.06c-.282.282-.52.521-.787.675a2.31 2.31 0 0 1-2.312 0c-.267-.154-.505-.393-.787-.675l-.06-.06-.061-.061c-.282-.282-.521-.52-.675-.787a2.31 2.31 0 0 1 0-2.312c.154-.266.393-.505.675-.786l.06-.061 4.994-4.993-.245-.244c-.835-.836-1.516-1.516-1.98-2.125-.485-.636-.805-1.28-.805-2.05s.32-1.414.805-2.05c.464-.608 1.145-1.289 1.98-2.124l.077-.077c.835-.835 1.516-1.516 2.125-1.98m-.896 11.71L3.356 18.76c-.376.376-.456.465-.497.536a.81.81 0 0 0 0 .812c.04.072.12.16.497.537.377.376.466.456.537.497a.81.81 0 0 0 .812 0c.07-.04.16-.12.536-.497l4.994-4.993zm10.31-6.54c.24-.243.302-.314.336-.374a.81.81 0 0 0 0-.812c-.041-.071-.12-.16-.497-.537-.377-.376-.466-.456-.537-.497a.81.81 0 0 0-.812 0c-.06.034-.131.096-.374.336z",clipRule:"evenodd"})))};function e6(){return(e6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let e2=function(e){return et.createElement("svg",e6({width:16,height:16,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),K||(K=et.createElement("path",{d:"M4 28a2 2 0 0 1 2-2h4v12H6a2 2 0 0 1-2-2v-8ZM38 26h4a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-4V26Z"})),z||(z=et.createElement("path",{d:"M10 36V24c0-7.732 6.268-14 14-14s14 6.268 14 14v12M10 26H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h4V26Zm28 0h4a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-4V26Z",stroke:"#333",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round"})),F||(F=et.createElement("path",{d:"M16 32h4l2-6 4 12 2-6h4",stroke:"#333",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round"})))};var e4=s(33362),e8=s(25166),e7=s(22824),e5=s(97273),e9=s(74975),te=s(52061),tt=s(82860),ts=s(70580),tn=s(93949),ta=s.n(tn),tr=s(6068),ti=s(17304),tl=s(99608),to=s(67938),tc=s(86111),th=s(1566),td=s(50952),tm=s(74872),tu=s(52097),tg=s.n(tu),tp=s(55246),tf=s(13262),tv=s(56270),tx=s.n(tv),tw=s(56815);function ty(e){let t=(0,e4.aK)().currentSession(),s=e=>e.content&&!e.isError&&!e.streaming,n=(0,ee.useMemo)(()=>{let e=Math.max(0,t.clearContextIndex??0);return e===t.messages.length-1&&(e=0),t.messages.slice(e)},[t.messages,t.clearContextIndex]),a=(0,ee.useMemo)(()=>n.filter((e,t)=>e.id&&s(e)&&(t>=n.length-1||s(n[t+1]))),[n]),r=a.length,i=(0,e4.MG)(),[l,o]=(0,ee.useState)(""),[c,h]=(0,ee.useState)(new Set),d=e=>0===l.length||c.has(e),m=e=>{let t=new Set;e.length>0&&a.forEach(s=>(0,e8.YK)(s).includes(e)?t.add(s.id):null),h(t)},{startIndex:u,endIndex:g,onClickIndex:p}=function(){let[e,t]=(0,ee.useState)(),[s,n]=(0,ee.useState)(),[a,r]=(0,ee.useState)(!1);return(0,ee.useEffect)(()=>{let e=e=>{"Shift"===e.key&&r(!0)},s=e=>{"Shift"===e.key&&(r(!1),t(void 0),n(void 0))};return window.addEventListener("keyup",s),window.addEventListener("keydown",e),()=>{window.removeEventListener("keyup",s),window.removeEventListener("keydown",e)}},[]),{onClickIndex:s=>{a&&void 0!==e?n(s):(t(s),n(void 0))},startIndex:e,endIndex:s}}(),f=()=>{e.updateSelection(e=>a.forEach(t=>e.add(t.id)))};return(0,ee.useEffect)(()=>{e.defaultSelectAll&&f()},[]),(0,ee.useEffect)(()=>{if(void 0===u||void 0===g)return;let[t,s]=[u,g].sort((e,t)=>e-t);e.updateSelection(e=>{for(let n=t;n<=s;n+=1)e.add(a[n].id??n)})},[u,g]),(0,Y.jsxs)("div",{className:tx()["message-selector"],children:[(0,Y.jsxs)("div",{className:tx()["message-filter"],children:[Y.jsx("input",{type:"text",placeholder:tt.ZP.Select.Search,className:(0,tw.Z)(tx()["filter-item"],tx()["search-bar"]),value:l,onInput:e=>{o(e.currentTarget.value),m(e.currentTarget.value)}}),(0,Y.jsxs)("div",{className:tx().actions,children:[Y.jsx(ts.h,{text:tt.ZP.Select.All,bordered:!0,className:tx()["filter-item"],onClick:f}),Y.jsx(ts.h,{text:tt.ZP.Select.Latest,bordered:!0,className:tx()["filter-item"],onClick:()=>e.updateSelection(e=>{e.clear(),a.slice(r-4).forEach(t=>e.add(t.id))})}),Y.jsx(ts.h,{text:tt.ZP.Select.Clear,bordered:!0,className:tx()["filter-item"],onClick:()=>e.updateSelection(e=>e.clear())})]})]}),Y.jsx("div",{className:tx().messages,children:a.map((s,n)=>{if(!d(s.id))return null;let a=s.id??n,r=e.selection.has(a);return(0,Y.jsxs)("div",{className:(0,tw.Z)(tx().message,{[tx()["message-selected"]]:e.selection.has(s.id)}),onClick:()=>{e.updateSelection(e=>{e.has(a)?e.delete(a):e.add(a)}),p(n)},children:[Y.jsx("div",{className:tx().avatar,children:"user"===s.role?Y.jsx(to.qE,{avatar:i.avatar}):Y.jsx(tc.MaskAvatar,{avatar:t.mask.avatar,model:s.model||t.mask.modelConfig.model})}),(0,Y.jsxs)("div",{className:tx().body,children:[Y.jsx("div",{className:tx().date,children:new Date(s.date).toLocaleString()}),Y.jsx("div",{className:(0,tw.Z)(tx().content,"one-line"),children:(0,e8.YK)(s)})]}),Y.jsx("div",{className:tx().checkbox,children:Y.jsx("input",{type:"checkbox",checked:r,readOnly:!0})})]},n)})})]})}var t_=s(89410),tk=s(71052),tj=s(54508),tC=s(31604);let tE=(0,e5.default)(async()=>(await s.e(768).then(s.bind(s,49768))).Markdown,{loadableGenerated:{modules:["D:\\z-toolkit\\NextChat\\app\\components\\exporter.tsx -> ./markdown"]},loading:()=>Y.jsx(ep.Z,{})});function tb(e){return Y.jsx("div",{className:"modal-mask",children:Y.jsx(tr.u_,{title:tt.ZP.Export.Title,onClose:e.onClose,footer:Y.jsx("div",{style:{width:"100%",textAlign:"center",fontSize:14,opacity:.5},children:tt.ZP.Exporter.Description.Title}),children:Y.jsx("div",{style:{minHeight:"40vh"},children:Y.jsx(tM,{})})})})}function tS(e){let t=e.steps,s=t.length;return(0,Y.jsxs)("div",{className:tg().steps,children:[Y.jsx("div",{className:tg()["steps-progress"],children:Y.jsx("div",{className:tg()["steps-progress-inner"],style:{width:`${(e.index+1)/s*100}%`}})}),Y.jsx("div",{className:tg()["steps-inner"],children:t.map((t,s)=>(0,Y.jsxs)("div",{className:(0,tw.Z)("clickable",tg().step,{[tg()["step-finished"]]:s<=e.index,[tg()["step-current"]]:s===e.index}),onClick:()=>{e.onStepChange?.(s)},role:"button",children:[Y.jsx("span",{className:tg()["step-index"],children:s+1}),Y.jsx("span",{className:tg()["step-name"],children:t.name})]},s))})]})}function tM(){let e=[{name:tt.ZP.Export.Steps.Select,value:"select"},{name:tt.ZP.Export.Steps.Preview,value:"preview"}],{currentStep:t,setCurrentStepIndex:s,currentStepIndex:n}=function(e){let t=e.length,[s,n]=(0,ee.useState)(0);return{currentStepIndex:s,setCurrentStepIndex:n,nextStep:()=>n((s+1)%t),prevStep:()=>n((s-1+t)%t),currentStep:e[s]}}(e),[a,r]=(0,ee.useState)({format:"image",includeContext:!0});function i(e){let t={...a};e(t),r(t)}let l=(0,e4.aK)().currentSession(),{selection:o,updateSelection:c}=function(){let[e,t]=(0,ee.useState)(new Set);return{selection:e,updateSelection:s=>{let n=new Set(e);s(n),t(n)}}}(),h=(0,ee.useMemo)(()=>{let e=[];return a.includeContext&&e.push(...l.mask.context),e.push(...l.messages.filter(e=>o.has(e.id))),e},[a.includeContext,l.messages,l.mask.context,o]);return(0,Y.jsxs)(Y.Fragment,{children:[Y.jsx(tS,{steps:e,index:n,onStepChange:s}),(0,Y.jsxs)("div",{className:tg()["message-exporter-body"],style:"select"!==t.value?{display:"none"}:{},children:[(0,Y.jsxs)(tr.aV,{children:[Y.jsx(tr.HC,{title:tt.ZP.Export.Format.Title,subTitle:tt.ZP.Export.Format.SubTitle,children:Y.jsx(tr.Ph,{value:a.format,onChange:e=>i(t=>t.format=e.currentTarget.value),children:["text","image","json"].map(e=>Y.jsx("option",{value:e,children:e},e))})}),Y.jsx(tr.HC,{title:tt.ZP.Export.IncludeContext.Title,subTitle:tt.ZP.Export.IncludeContext.SubTitle,children:Y.jsx("input",{type:"checkbox",checked:a.includeContext,onChange:e=>{i(t=>t.includeContext=e.currentTarget.checked)}})})]}),Y.jsx(ty,{selection:o,updateSelection:c,defaultSelectAll:!0})]}),"preview"===t.value&&Y.jsx("div",{className:tg()["message-exporter-body"],children:"text"===a.format?Y.jsx(tO,{messages:h,topic:l.topic}):"json"===a.format?Y.jsx(tT,{messages:h,topic:l.topic}):Y.jsx(tZ,{messages:h,topic:l.topic})})]})}function tN(e){let t=(0,ee.useRef)(null);return(0,ee.useEffect)(()=>{if(!t.current)return;let s=Array.from(t.current.getElementsByClassName(tl.yY));if(s.length!==e.messages.length)return;let n=s.map((e,t)=>{let[s,n]=e.id.split(":");return{id:t.toString(),role:s,content:"user"===s?e.textContent??"":e.innerHTML,date:""}});e.onRender(n)},[]),Y.jsx("div",{ref:t,children:e.messages.map((e,t)=>Y.jsx("div",{id:`${e.role}:${t}`,className:tl.yY,children:Y.jsx(tE,{content:(0,e8.YK)(e),defaultShow:!0})},t))})}function tP(e){let[t,s]=(0,ee.useState)(!1),[n,a]=(0,ee.useState)(!1),r=(0,e4.MG)(),i=async()=>{e.messages?.length&&(s(!0),a(!0))};return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)("div",{className:tg()["preview-actions"],children:[e.showCopy&&Y.jsx(ts.h,{text:tt.ZP.Export.Copy,bordered:!0,shadow:!0,icon:Y.jsx(eh.Z,{}),onClick:e.copy}),Y.jsx(ts.h,{text:tt.ZP.Export.Download,bordered:!0,shadow:!0,icon:Y.jsx(tf.Z,{}),onClick:e.download}),Y.jsx(ts.h,{text:tt.ZP.Export.Share,bordered:!0,shadow:!0,icon:t?Y.jsx(ep.Z,{}):Y.jsx(eo.Z,{}),onClick:i})]}),Y.jsx("div",{style:{position:"fixed",right:"200vw",pointerEvents:"none"},children:n&&Y.jsx(tN,{messages:e.messages??[],onRender:e=>{a(!1),(0,tC.Lw)(r.modelConfig.providerName).share(e).then(e=>{e&&((0,tr.K4)({title:tt.ZP.Export.Share,children:[Y.jsx("input",{type:"text",value:e,style:{width:"100%",maxWidth:"unset"},readOnly:!0,onClick:e=>e.currentTarget.select()},"input")],actions:[Y.jsx(ts.h,{icon:Y.jsx(eh.Z,{}),text:tt.ZP.Chat.Actions.Copy,onClick:()=>(0,e8.vQ)(e)},"copy")]}),setTimeout(()=>{window.open(e,"_blank")},800))}).catch(e=>{console.error("[Share]",e),(0,tr.CF)((0,tm.B)(e))}).finally(()=>s(!1))}})})]})}function tZ(e){let t=(0,e4.aK)().currentSession(),s=t.mask,n=(0,e4.MG)(),a=(0,ee.useRef)(null),r=(0,e8.S0)(),i=async()=>{(0,tr.CF)(tt.ZP.Export.Image.Toast);let t=a.current;if(!t)return;let s=tj.Z()?.isApp;try{let n=await (0,tk.YM)(t);if(!n)return;if(r||s&&window.__TAURI__){if(s&&window.__TAURI__){let t=await window.__TAURI__.dialog.save({defaultPath:`${e.topic}.png`,filters:[{name:"PNG Files",extensions:["png"]},{name:"All Files",extensions:["*"]}]});if(null!==t){let e=await fetch(n),s=await e.arrayBuffer(),a=new Uint8Array(s);await window.__TAURI__.fs.writeBinaryFile(t,a),(0,tr.CF)(tt.ZP.Download.Success)}else(0,tr.CF)(tt.ZP.Download.Failed)}else(0,tr.vi)(n)}else{let t=document.createElement("a");t.download=`${e.topic}.png`,t.href=n,t.click(),l()}}catch(e){(0,tr.CF)(tt.ZP.Download.Failed)}},l=()=>{let e=a.current;e&&(e.innerHTML=e.innerHTML)};return(0,Y.jsxs)("div",{className:tg()["image-previewer"],children:[Y.jsx(tP,{copy:()=>{(0,tr.CF)(tt.ZP.Export.Image.Toast);let e=a.current;e&&(0,tk.SE)(e).then(e=>{if(e)try{navigator.clipboard.write([new ClipboardItem({"image/png":e})]).then(()=>{(0,tr.CF)(tt.ZP.Copy.Success),l()})}catch(e){console.error("[Copy Image] ",e),(0,tr.CF)(tt.ZP.Copy.Failed)}})},download:i,showCopy:!r,messages:e.messages}),(0,Y.jsxs)("div",{className:(0,tw.Z)(tg()["preview-body"],tg()["default-theme"]),ref:a,children:[(0,Y.jsxs)("div",{className:tg()["chat-info"],children:[Y.jsx("div",{className:(0,tw.Z)(tg().logo,"no-dark"),children:Y.jsx(t_.default,{src:tp.Z.src,alt:"logo",width:50,height:50})}),(0,Y.jsxs)("div",{children:[Y.jsx("div",{className:tg()["main-title"],children:"NextChat"}),Y.jsx("div",{className:tg()["sub-title"],children:"github.com/ChatGPTNextWeb/ChatGPT-Next-Web"}),(0,Y.jsxs)("div",{className:tg().icons,children:[Y.jsx(tc.MaskAvatar,{avatar:n.avatar}),Y.jsx("span",{className:tg()["icon-space"],children:"&"}),Y.jsx(tc.MaskAvatar,{avatar:s.avatar,model:t.mask.modelConfig.model})]})]}),(0,Y.jsxs)("div",{children:[(0,Y.jsxs)("div",{className:tg()["chat-info-item"],children:[tt.ZP.Exporter.Model,": ",s.modelConfig.model]}),(0,Y.jsxs)("div",{className:tg()["chat-info-item"],children:[tt.ZP.Exporter.Messages,": ",e.messages.length]}),(0,Y.jsxs)("div",{className:tg()["chat-info-item"],children:[tt.ZP.Exporter.Topic,": ",t.topic]}),(0,Y.jsxs)("div",{className:tg()["chat-info-item"],children:[tt.ZP.Exporter.Time,":"," ",new Date(e.messages.at(-1)?.date??Date.now()).toLocaleString()]})]})]}),e.messages.map((e,s)=>(0,Y.jsxs)("div",{className:(0,tw.Z)(tg().message,tg()["message-"+e.role]),children:[Y.jsx("div",{className:tg().avatar,children:"user"===e.role?Y.jsx(to.qE,{avatar:n.avatar}):Y.jsx(tc.MaskAvatar,{avatar:t.mask.avatar,model:e.model||t.mask.modelConfig.model})}),(0,Y.jsxs)("div",{className:tg().body,children:[Y.jsx(tE,{content:(0,e8.YK)(e),fontSize:n.fontSize,fontFamily:n.fontFamily,defaultShow:!0}),1==(0,e8.Bs)(e).length&&Y.jsx("img",{src:(0,e8.Bs)(e)[0],alt:"message",className:tg()["message-image"]},s),(0,e8.Bs)(e).length>1&&Y.jsx("div",{className:tg()["message-images"],style:{"--image-count":(0,e8.Bs)(e).length},children:(0,e8.Bs)(e).map((e,t)=>Y.jsx("img",{src:e,alt:"message",className:tg()["message-image-multi"]},t))})]})]},s))]})]})}function tO(e){let t=`# ${e.topic}

`+e.messages.map(e=>"user"===e.role?`## ${tt.ZP.Export.MessageFromYou}:
${(0,e8.YK)(e)}`:`## ${tt.ZP.Export.MessageFromChatGPT}:
${(0,e8.YK)(e).trim()}`).join("\n\n");return(0,Y.jsxs)(Y.Fragment,{children:[Y.jsx(tP,{copy:()=>{(0,e8.vQ)(t)},download:()=>{(0,e8.CP)(t,`${e.topic}.md`)},showCopy:!0,messages:e.messages}),Y.jsx("div",{className:"markdown-body",children:Y.jsx("pre",{className:tg()["export-content"],children:t})})]})}function tT(e){let t={messages:[{role:"system",content:`${tt.ZP.FineTuned.Sysmessage} ${e.topic}`},...e.messages.map(e=>({role:e.role,content:e.content}))]},s="```json\n"+JSON.stringify(t,null,2)+"\n```",n=JSON.stringify(t),a=()=>{(0,e8.vQ)(n)};return(0,Y.jsxs)(Y.Fragment,{children:[Y.jsx(tP,{copy:a,download:()=>{(0,e8.CP)(JSON.stringify(t),`${e.topic}.json`)},showCopy:!1,messages:e.messages}),Y.jsx("div",{className:"markdown-body",onClick:a,children:Y.jsx(tE,{content:s})})]})}var tA=s(74255),tL=s(14300),tD=s(6113),tI=s(12781);(function(e){e.SILENT="silent",e.X_SOFT="x-soft",e.SOFT="soft",e.MEDIUM="medium",e.LOUD="loud",e.X_LOUD="x-LOUD",e.DEFAULT="default"})(B||(B={})),function(e){e.X_SLOW="x-slow",e.SLOW="slow",e.MEDIUM="medium",e.FAST="fast",e.X_FAST="x-fast",e.DEFAULT="default"}(U||(U={})),function(e){e.X_LOW="x-low",e.LOW="low",e.MEDIUM="medium",e.HIGH="high",e.X_HIGH="x-high",e.DEFAULT="default"}(W||(W={})),function(e){e.AUDIO_24KHZ_48KBITRATE_MONO_MP3="audio-24khz-48kbitrate-mono-mp3",e.AUDIO_24KHZ_96KBITRATE_MONO_MP3="audio-24khz-96kbitrate-mono-mp3",e.WEBM_24KHZ_16BIT_MONO_OPUS="webm-24khz-16bit-mono-opus"}(V||(V={}));class tR{constructor(){this.pitch="+0Hz",this.rate=1,this.volume=100}}class tH{static{this.OUTPUT_FORMAT=V}static{this.TRUSTED_CLIENT_TOKEN="6A5AA1D4EAFF4E9FB37E23D68491D6F4"}static{this.VOICES_URL=`https://speech.platform.bing.com/consumer/speech/synthesize/readaloud/voices/list?trustedclienttoken=${tH.TRUSTED_CLIENT_TOKEN}`}static{this.SYNTH_URL=`wss://speech.platform.bing.com/consumer/speech/synthesize/readaloud/edge/v1?TrustedClientToken=${tH.TRUSTED_CLIENT_TOKEN}`}static{this.BINARY_DELIM="Path:audio\r\n"}static{this.VOICE_LANG_REGEX=/\w{2}-\w{2}/}_log(...e){this._enableLogger&&console.log(...e)}constructor(e=!1){this._streams={},this._startTime=0,this._enableLogger=e}async _send(e){for(let e=1;e<=3&&this._ws.readyState!==this._ws.OPEN;e++)1==e&&(this._startTime=Date.now()),this._log("connecting: ",e),await this._initClient();this._ws.send(e)}_initClient(){return this._ws=new WebSocket(tH.SYNTH_URL),this._ws.binaryType="arraybuffer",new Promise((e,t)=>{this._ws.onopen=()=>{this._log("Connected in",(Date.now()-this._startTime)/1e3,"seconds"),this._send(`Content-Type:application/json; charset=utf-8\r
Path:speech.config\r
\r

                    {
                        "context": {
                            "synthesis": {
                                "audio": {
                                    "metadataoptions": {
                                        "sentenceBoundaryEnabled": "false",
                                        "wordBoundaryEnabled": "false"
                                    },
                                    "outputFormat": "${this._outputFormat}" 
                                }
                            }
                        }
                    }
                `).then(e)},this._ws.onmessage=e=>{let t=tL.Buffer.from(e.data),s=t.toString(),n=/X-RequestId:(.*?)\r\n/gm.exec(s)[1];s.includes("Path:turn.start")||(s.includes("Path:turn.end")?this._streams[n].push(null):s.includes("Path:response")||(s.includes("Path:audio")&&e.data instanceof ArrayBuffer?this._pushAudioData(t,n):this._log("UNKNOWN MESSAGE",s)))},this._ws.onclose=()=>{for(let e in this._log("disconnected after:",(Date.now()-this._startTime)/1e3,"seconds"),this._streams)this._streams[e].push(null)},this._ws.onerror=function(e){t("Connect Error: "+e)}})}_pushAudioData(e,t){let s=e.indexOf(tH.BINARY_DELIM)+tH.BINARY_DELIM.length,n=e.subarray(s);this._streams[t].push(n),this._log("received audio chunk, size: ",n?.length)}_SSMLTemplate(e,t={}){return t={...new tR,...t},`<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xmlns:mstts="https://www.w3.org/2001/mstts" xml:lang="${this._voiceLocale}">
                <voice name="${this._voice}">
                    <prosody pitch="${t.pitch}" rate="${t.rate}" volume="${t.volume}">
                        ${e}
                    </prosody> 
                </voice>
            </speak>`}getVoices(){return fetch(tH.VOICES_URL).then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.json()}).then(e=>e).catch(e=>{throw e})}async setMetadata(e,t,s){let n=this._voice,a=this._voiceLocale,r=this._outputFormat;if(this._voice=e,this._voiceLocale=s,!this._voiceLocale){let e=tH.VOICE_LANG_REGEX.exec(this._voice);if(!e)throw Error("Could not infer voiceLocale from voiceName!");this._voiceLocale=e[0]}this._outputFormat=t,(n!==this._voice||a!==this._voiceLocale||r!==this._outputFormat||this._ws.readyState!==this._ws.OPEN)&&(this._startTime=Date.now(),await this._initClient())}_metadataCheck(){if(!this._ws)throw Error("Speech synthesis not configured yet. Run setMetadata before calling toStream or toFile.")}close(){this._ws.close()}toStream(e,t){let{stream:s}=this._rawSSMLRequest(this._SSMLTemplate(e,t));return s}toArrayBuffer(e,t){return new Promise((s,n)=>{let a=[],r=this.toStream(e,t);r.on("data",e=>{a.push(e)}),r.on("end",()=>{s(tL.Buffer.concat(a).buffer)}),r.on("error",e=>{n(e)})})}rawToStream(e){let{stream:t}=this._rawSSMLRequest(e);return t}_rawSSMLRequest(e){this._metadataCheck();let t=(0,tD.randomBytes)(16).toString("hex"),s=`X-RequestId:${t}\r
Content-Type:application/ssml+xml\r
Path:ssml\r
\r

                `+e.trim(),n=this,a=new tI.Readable({read(){},destroy(e,s){delete n._streams[t],s(e)}});return this._streams[t]=a,this._send(s).then(),{stream:a,requestId:t}}}var tK=s(20582),tz=s(6111);function tF(){return(tF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let tB=function(e){return et.createElement("svg",tF({width:24,height:24,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),$||($=et.createElement("rect",{x:17,y:4,width:14,height:27,rx:7,stroke:"#333",strokeWidth:4,strokeLinejoin:"round"})),G||(G=et.createElement("path",{d:"M9 23c0 8.284 6.716 15 15 15 8.284 0 15-6.716 15-15M24 38v6",stroke:"#333",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round"})))};function tU(){return(tU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let tW=function(e){return et.createElement("svg",tU({width:24,height:24,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),X||(X=et.createElement("path",{d:"M31 24V11a7 7 0 1 0-14 0v13a7 7 0 1 0 14 0Z",stroke:"#d0021b",strokeWidth:4,strokeLinejoin:"round"})),Q||(Q=et.createElement("path",{d:"M9 23c0 8.284 6.716 15 15 15 1.753 0 3.436-.3 5-.853M39 23a14.95 14.95 0 0 1-1.248 6M24 38v6M42 42 6 6",stroke:"#d0021b",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round"})))};function tV(){return(tV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}let t$=function(e){return et.createElement("svg",tV({width:24,height:24,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),q||(q=et.createElement("path",{d:"M14.5 8a19.05 19.05 0 0 0-4.75 3.84C6.794 15.146 5 19.49 5 24.245 5 34.603 13.507 43 24 43s19-8.397 19-18.755c0-4.756-1.794-9.099-4.75-12.405A19.02 19.02 0 0 0 33.5 8M24 4v20",stroke:"#333",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round"})))};var tG=s(45136),tX=s.n(tG),tQ=s(37824);class tq{constructor(){this.workletNode=null,this.stream=null,this.source=null,this.recordBuffer=[],this.sampleRate=24e3,this.nextPlayTime=0,this.isPlaying=!1,this.playbackQueue=[],this.playBuffer=[],this.context=new AudioContext({sampleRate:this.sampleRate}),this.mergeNode=new ChannelMergerNode(this.context,{numberOfInputs:2}),this.analyser=new AnalyserNode(this.context,{fftSize:256}),this.analyserData=new Uint8Array(this.analyser.frequencyBinCount),this.mergeNode.connect(this.analyser)}getByteFrequencyData(){return this.analyser.getByteFrequencyData(this.analyserData),this.analyserData}async initialize(){await this.context.audioWorklet.addModule("/audio-processor.js")}async startRecording(e){try{this.workletNode||await this.initialize(),this.stream=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:this.sampleRate,echoCancellation:!0,noiseSuppression:!0}}),await this.context.resume(),this.source=this.context.createMediaStreamSource(this.stream),this.workletNode=new AudioWorkletNode(this.context,"audio-recorder-processor"),this.workletNode.port.onmessage=t=>{if("audio"===t.data.eventType){let s=t.data.audioData,n=new Int16Array(s.length);for(let e=0;e<s.length;e++){let t=Math.max(-1,Math.min(1,s[e]));n[e]=t<0?32768*t:32767*t}let a=new Uint8Array(n.buffer);e(a),this.recordBuffer.push.apply(this.recordBuffer,n)}},this.source.connect(this.workletNode),this.source.connect(this.mergeNode,0,0),this.workletNode.connect(this.context.destination),this.workletNode.port.postMessage({command:"START_RECORDING"})}catch(e){throw console.error("Error starting recording:",e),e}}stopRecording(){if(!this.workletNode||!this.source||!this.stream)throw Error("Recording not started");this.workletNode.port.postMessage({command:"STOP_RECORDING"}),this.workletNode.disconnect(),this.source.disconnect(),this.stream.getTracks().forEach(e=>e.stop())}startStreamingPlayback(){this.isPlaying=!0,this.nextPlayTime=this.context.currentTime}stopStreamingPlayback(){this.isPlaying=!1,this.playbackQueue.forEach(e=>e.stop()),this.playbackQueue=[],this.playBuffer=[]}playChunk(e){if(!this.isPlaying)return;let t=new Int16Array(e.buffer);this.playBuffer.push.apply(this.playBuffer,t);let s=new Float32Array(t.length);for(let e=0;e<t.length;e++)s[e]=t[e]/(t[e]<0?32768:32767);let n=this.context.createBuffer(1,s.length,this.sampleRate);n.getChannelData(0).set(s);let a=this.context.createBufferSource();a.buffer=n,a.connect(this.context.destination),a.connect(this.mergeNode,0,1);let r=n.length/this.sampleRate;a.start(this.nextPlayTime),this.playbackQueue.push(a),a.onended=()=>{let e=this.playbackQueue.indexOf(a);e>-1&&this.playbackQueue.splice(e,1)},this.nextPlayTime+=r,this.nextPlayTime<this.context.currentTime&&(this.nextPlayTime=this.context.currentTime)}_saveData(e,t=16){let s=e.buffer.byteLength,n=new Uint8Array(44),a=new DataView(n.buffer);return a.setUint32(0,1380533830,!1),a.setUint32(4,36+s,!0),a.setUint32(8,1463899717,!1),a.setUint32(12,1718449184,!1),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,1,!0),a.setUint32(24,this.sampleRate,!0),a.setUint32(28,4*this.sampleRate,!0),a.setUint16(32,2,!0),a.setUint16(34,t,!0),a.setUint32(36,1684108385,!1),a.setUint32(40,s,!0),new Blob([a,e.buffer],{type:"audio/mpeg"})}savePlayFile(){return this._saveData(new Int16Array(this.playBuffer))}saveRecordFile(e,t){let s=e?Math.floor(e*this.sampleRate/1e3):0,n=t?Math.floor(t*this.sampleRate/1e3):this.recordBuffer.length;return this._saveData(new Int16Array(this.recordBuffer.slice(s,n)))}async close(){this.recordBuffer=[],this.workletNode?.disconnect(),this.source?.disconnect(),this.stream?.getTracks().forEach(e=>e.stop()),await this.context.close()}}var tY=s(19262),tJ=s.n(tY);function t0({frequencies:e,isActive:t}){let s=(0,ee.useRef)(null),n=(0,ee.useRef)([]),a=(0,ee.useRef)(10),r=(0,ee.useRef)(),i=(0,ee.useCallback)(e=>{n.current.push(e),n.current.length>a.current&&n.current.shift()},[]);return(0,ee.useEffect)(()=>{let a=s.current;if(!a)return;let l=a.getContext("2d");if(!l)return;let o=window.devicePixelRatio||1;a.width=a.offsetWidth*o,a.height=a.offsetHeight*o,l.scale(o,o);let c=()=>{if(l.clearRect(0,0,a.width,a.height),!e||!t){n.current=[];return}i(Array.from(e));let s=[],o=a.height/2,h=a.width/(e.length-1);l.beginPath(),l.moveTo(0,o);for(let t=0;t<e.length;t++){let r=t*h,i=e[t];n.current.length>0&&(i=(i+n.current.map(e=>e[t]||0).reduce((e,t)=>e+t,0))/(n.current.length+1));let c=i/255,d=o+a.height/2*c*Math.sin(.2*t+.002*Date.now());if(s.push([r,d]),0===t)l.moveTo(r,d);else{let e=s[t-1],n=(e[0]+r)/2;l.quadraticCurveTo(e[0],e[1],n,(e[1]+d)/2)}}for(let e=s.length-1;e>=0;e--){let[t,n]=s[e],a=o-(n-o);if(e===s.length-1)l.lineTo(t,a);else{let a=s[e+1],r=(a[0]+t)/2;l.quadraticCurveTo(a[0],o-(a[1]-o),r,o-((a[1]+n)/2-o))}}l.closePath();let d=l.createLinearGradient(0,0,a.width,0);d.addColorStop(0,"rgba(100, 180, 255, 0.95)"),d.addColorStop(.5,"rgba(140, 200, 255, 0.9)"),d.addColorStop(1,"rgba(180, 220, 255, 0.95)"),l.fillStyle=d,l.fill(),r.current=requestAnimationFrame(c)};return c(),()=>{r.current&&cancelAnimationFrame(r.current)}},[e,t,i]),Y.jsx("div",{className:tJ()["voice-print"],children:Y.jsx("canvas",{ref:s})})}function t1({onClose:e,onStartVoice:t,onPausedVoice:s}){let n=(0,e4.aK)(),a=n.currentSession(),r=(0,e4.MG)(),[i,l]=(0,ee.useState)(""),[o,c]=(0,ee.useState)(!1),[h,d]=(0,ee.useState)(!1),[m,u]=(0,ee.useState)(!1),[g,p]=(0,ee.useState)("audio"),[f,v]=(0,ee.useState)(!0),[x,w]=(0,ee.useState)(),y=(0,ee.useRef)(null),_=(0,ee.useRef)(null),k=(0,ee.useRef)(!1),j=r.realtimeConfig.temperature,C=r.realtimeConfig.apiKey,E=r.realtimeConfig.model,b="Azure"===r.realtimeConfig.provider,S=r.realtimeConfig.azure.endpoint,M=r.realtimeConfig.azure.deployment,N=r.realtimeConfig.voice,P=async()=>{if(!m){if(h)await Z();else try{u(!0),y.current=b?new tQ.G2(new URL(S),{key:C},{deployment:M}):new tQ.G2({key:C},{model:E}),await y.current.configure({instructions:"",voice:N,input_audio_transcription:{model:"whisper-1"},turn_detection:f?{type:"server_vad"}:null,tools:[],temperature:j,modalities:"audio"===g?["text","audio"]:["text"]}),O(),d(!0)}catch(e){console.error("Connection failed:",e),l("Connection failed")}finally{u(!1)}}},Z=async()=>{if(y.current)try{await y.current.close(),y.current=null,d(!1)}catch(e){console.error("Disconnect failed:",e)}},O=async()=>{if(y.current)try{for await(let e of y.current.events())"response"===e.type?await T(e):"input_audio"===e.type&&await A(e)}catch(e){y.current&&console.error("Response iteration error:",e)}},T=async e=>{for await(let t of e)if("message"===t.type&&"assistant"===t.role){let e=(0,e4.tn)({role:t.role,content:""});n.updateTargetSession(a,t=>{t.messages=t.messages.concat([e])});let s=!1;for await(let r of t){if("text"===r.type)for await(let t of r.textChunks())e.content+=t;else if("audio"===r.type){let t=async()=>{for await(let t of r.transcriptChunks())e.content+=t},n=async()=>{for await(let e of(_.current?.startStreamingPlayback(),r.audioChunks()))s=!0,_.current?.playChunk(e)};await Promise.all([t(),n()])}n.updateTargetSession(a,e=>{e.messages=e.messages.concat()})}if(s){let t=_.current?.savePlayFile();(0,e7.Ix)(t).then(t=>{e.audio_url=t,n.updateTargetSession(a,e=>{e.messages=e.messages.concat()})})}}},A=async e=>{if(await e.waitForCompletion(),e.transcription){let t=(0,e4.tn)({role:"user",content:e.transcription});n.updateTargetSession(a,e=>{e.messages=e.messages.concat([t])});let{audioStartMillis:s,audioEndMillis:r}=e,i=_.current?.saveRecordFile(s,r);(0,e7.Ix)(i).then(e=>{t.audio_url=e,n.updateTargetSession(a,e=>{e.messages=e.messages.concat()})})}_.current?.stopStreamingPlayback()},L=async()=>{if(!o&&y.current)try{_.current||(_.current=new tq,await _.current.initialize()),await _.current.startRecording(async e=>{await y.current?.sendAudio(e)}),c(!0)}catch(e){console.error("Failed to start recording:",e)}else if(_.current)try{if(_.current.stopRecording(),!f){let e=await y.current?.commitAudio();await A(e),await y.current?.generateResponse()}c(!1)}catch(e){console.error("Failed to stop recording:",e)}};(0,ee.useEffect)(()=>{if(!k.current)return k.current=!0,(async()=>{let e=new tq;await e.initialize(),_.current=e,await P(),await L()})().catch(e=>{l(e),console.error(e)}),()=>{o&&L(),_.current?.close().catch(console.error),Z()}},[]),(0,ee.useEffect)(()=>{let e;if(h&&o){let t=()=>{_.current&&w(_.current.getByteFrequencyData()),e=requestAnimationFrame(t)};e=requestAnimationFrame(t)}else w(void 0);return()=>{e&&cancelAnimationFrame(e)}},[h,o]),(0,ee.useEffect)(()=>{y.current?.configure({voice:N})},[N]),(0,ee.useEffect)(()=>{y.current?.configure({temperature:j})},[j]);let D=async()=>{e?.(),o&&await L(),Z().catch(console.error)};return(0,Y.jsxs)("div",{className:tX()["realtime-chat"],children:[Y.jsx("div",{className:(0,tw.Z)(tX()["circle-mic"],{[tX().pulse]:o}),children:Y.jsx(t0,{frequencies:x,isActive:o})}),(0,Y.jsxs)("div",{className:tX()["bottom-icons"],children:[Y.jsx("div",{children:Y.jsx(ts.h,{icon:o?Y.jsx(tB,{}):Y.jsx(tW,{}),onClick:L,disabled:!h,shadow:!0,bordered:!0})}),Y.jsx("div",{className:tX()["icon-center"],children:i}),Y.jsx("div",{children:Y.jsx(ts.h,{icon:Y.jsx(t$,{}),onClick:D,shadow:!0,bordered:!0})})]})]})}var t3=s(85824);let t6=(0,e8.EN)(),t2=function(){let e=null,t=null;return{init:()=>{(e=new(window.AudioContext||window.webkitAudioContext)).suspend()},play:async(s,n)=>{t&&(t.stop(),t.disconnect());let a=await e.decodeAudioData(s);(t=e.createBufferSource()).buffer=a,t.connect(e.destination),e.resume().then(()=>{t.start()}),t.onended=n},stop:()=>{t&&(t.stop(),t.disconnect(),t=null),e&&(e.close(),e=null)}}}(),t4=(0,e5.default)(async()=>(await s.e(768).then(s.bind(s,49768))).Markdown,{loadableGenerated:{modules:["D:\\z-toolkit\\NextChat\\app\\components\\chat.tsx -> ./markdown"]},loading:()=>Y.jsx(ep.Z,{})}),t8=()=>{let e=(0,ti.s0)(),[t,s]=(0,ee.useState)(0),[n,a]=(0,ee.useState)(!1);return((0,ee.useEffect)(()=>{(async()=>{let e=await (0,t3.mJ)();a(e),e&&s(await (0,t3.FJ)())})()},[]),n)?Y.jsx(st,{onClick:()=>e(tl.y$.McpMarket),text:`MCP${t?` (${t})`:""}`,icon:Y.jsx(e3,{})}):null};function t7(e){let t=(0,e4.aK)(),s=t.currentSession(),n=(0,th.Zy)(),a=(0,ti.s0)();return Y.jsx("div",{className:"modal-mask",children:Y.jsx(tr.u_,{title:tt.ZP.Context.Edit,onClose:()=>e.onClose(),actions:[Y.jsx(ts.h,{icon:Y.jsx(e_.Z,{}),bordered:!0,text:tt.ZP.Chat.Config.Reset,onClick:async()=>{await (0,tr.i0)(tt.ZP.Memory.ResetConfirm)&&t.updateTargetSession(s,e=>e.memoryPrompt="")}},"reset"),Y.jsx(ts.h,{icon:Y.jsx(eh.Z,{}),bordered:!0,text:tt.ZP.Chat.Config.SaveAs,onClick:()=>{a(tl.y$.Masks),setTimeout(()=>{n.create(s.mask)},500)}},"copy")],children:Y.jsx(tc.MaskConfig,{mask:s.mask,updateMask:e=>{let n={...s.mask};e(n),t.updateTargetSession(s,e=>e.mask=n)},shouldSyncFromGlobal:!0,extraListItems:s.mask.modelConfig.sendMemory?Y.jsx(tr.HC,{className:"copyable",title:`${tt.ZP.Memory.Title} (${s.lastSummarizeIndex} of ${s.messages.length})`,subTitle:s.memoryPrompt||tt.ZP.Memory.EmptyContent}):Y.jsx(Y.Fragment,{})})})})}function t5(e){let t=(0,e4.aK)().currentSession().mask.context;return(0,Y.jsxs)("div",{className:ta()["prompt-toast"],children:[e.showToast&&t.length>0&&(0,Y.jsxs)("div",{className:(0,tw.Z)(ta()["prompt-toast-inner"],"clickable"),role:"button",onClick:()=>e.setShowModal(!0),children:[Y.jsx(er,{}),Y.jsx("span",{className:ta()["prompt-toast-content"],children:tt.ZP.Context.Toast(t.length)})]}),e.showModal&&Y.jsx(t7,{onClose:()=>e.setShowModal(!1)})]},"prompt-toast")}function t9(e){let t=0===e.prompts.length,[s,n]=(0,ee.useState)(0),a=(0,ee.useRef)(null);return((0,ee.useEffect)(()=>{n(0)},[e.prompts.length]),(0,ee.useEffect)(()=>{let r=r=>{if(t||r.metaKey||r.altKey||r.ctrlKey)return;let i=t=>{r.stopPropagation(),r.preventDefault(),n(Math.max(0,Math.min(e.prompts.length-1,s+t))),a.current?.scrollIntoView({block:"center"})};if("ArrowUp"===r.key)i(1);else if("ArrowDown"===r.key)i(-1);else if("Enter"===r.key){let t=e.prompts.at(s);t&&e.onPromptSelect(t)}};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e.prompts.length,s]),t)?null:Y.jsx("div",{className:ta()["prompt-hints"],children:e.prompts.map((t,r)=>(0,Y.jsxs)("div",{ref:r===s?a:null,className:(0,tw.Z)(ta()["prompt-hint"],{[ta()["prompt-hint-selected"]]:r===s}),onClick:()=>e.onPromptSelect(t),onMouseEnter:()=>n(r),children:[Y.jsx("div",{className:ta()["hint-title"],children:t.title}),Y.jsx("div",{className:ta()["hint-content"],children:t.content})]},t.title+r.toString()))})}function se(){let e=(0,e4.aK)(),t=e.currentSession();return(0,Y.jsxs)("div",{className:ta()["clear-context"],onClick:()=>e.updateTargetSession(t,e=>e.clearContextIndex=void 0),children:[Y.jsx("div",{className:ta()["clear-context-tips"],children:tt.ZP.Context.Clear}),Y.jsx("div",{className:ta()["clear-context-revert-btn"],children:tt.ZP.Context.Revert})]})}function st(e){let t=(0,ee.useRef)(null),s=(0,ee.useRef)(null),[n,a]=(0,ee.useState)({full:16,icon:16});function r(){if(!t.current||!s.current)return;let e=s.current.getBoundingClientRect().width,n=t.current.getBoundingClientRect().width;a({full:e+n,icon:n})}return(0,Y.jsxs)("div",{className:(0,tw.Z)(ta()["chat-input-action"],"clickable"),onClick:()=>{e.onClick(),setTimeout(r,1)},onMouseEnter:r,onTouchStart:r,style:{"--icon-width":`${n.icon}px`,"--full-width":`${n.full}px`},children:[Y.jsx("div",{ref:t,className:ta().icon,children:e.icon}),Y.jsx("div",{className:ta().text,ref:s,children:e.text})]})}function ss(e){let t=(0,e4.MG)(),s=(0,ti.s0)(),n=(0,e4.aK)(),a=(0,e4.RQ)(),r=n.currentSession(),i=t.theme,l=e9.L.hasPending(),o=r.mask.modelConfig.model,c=r.mask.modelConfig?.providerName||tl.UT.OpenAI,h=(0,tA.l)(),d=(0,ee.useMemo)(()=>{let e=h.filter(e=>e.available),t=e.find(e=>e.isDefault);return t?[t,...e.filter(e=>e!==t)]:e},[h]),m=(0,ee.useMemo)(()=>{let e=d.find(e=>e.name==o&&e?.provider?.providerName==c);return e?.displayName??""},[d,o,c]),[u,g]=(0,ee.useState)(!1),[p,f]=(0,ee.useState)(!1),[v,x]=(0,ee.useState)(!1),[w,y]=(0,ee.useState)(!1),[_,k]=(0,ee.useState)(!1),[j,C]=(0,ee.useState)(!1),E=(0,e8.h1)(o),b=r.mask.modelConfig?.size??"1024x1024",S=r.mask.modelConfig?.quality??"standard",M=r.mask.modelConfig?.style??"vivid",N=(0,e8.S0)();return(0,ee.useEffect)(()=>{let t=(0,e8.Xf)(o);if(x(t),t||(e.setAttachImages([]),e.setUploading(!1)),!d.some(e=>e.name===o)&&d.length>0){let e=d.find(e=>e.isDefault)||d[0];n.updateTargetSession(r,t=>{t.mask.modelConfig.model=e.name,t.mask.modelConfig.providerName=e?.provider?.providerName}),(0,tr.CF)(e?.provider?.providerName=="ByteDance"?e.displayName:e.name)}},[n,o,d,r]),(0,Y.jsxs)("div",{className:ta()["chat-input-actions"],children:[(0,Y.jsxs)(Y.Fragment,{children:[l&&Y.jsx(st,{onClick:()=>e9.L.stopAll(),text:tt.ZP.Chat.InputActions.Stop,icon:Y.jsx(eF.Z,{})}),!e.hitBottom&&Y.jsx(st,{onClick:e.scrollToBottom,text:tt.ZP.Chat.InputActions.ToBottom,icon:Y.jsx(ez,{})}),e.hitBottom&&Y.jsx(st,{onClick:e.showPromptModal,text:tt.ZP.Chat.InputActions.Settings,icon:Y.jsx(eE,{})}),v&&Y.jsx(st,{onClick:e.uploadImage,text:tt.ZP.Chat.InputActions.UploadImage,icon:e.uploading?Y.jsx(ef.Z,{}):Y.jsx(eT,{})}),Y.jsx(st,{onClick:function(){let e=[e4.Q2.Auto,e4.Q2.Light,e4.Q2.Dark],s=(e.indexOf(i)+1)%e.length,n=e[s];t.update(e=>e.theme=n)},text:tt.ZP.Chat.InputActions.Theme[i],icon:Y.jsx(Y.Fragment,{children:i===e4.Q2.Auto?Y.jsx(eH,{}):i===e4.Q2.Light?Y.jsx(eL,{}):i===e4.Q2.Dark?Y.jsx(eI,{}):null})}),Y.jsx(st,{onClick:e.showPromptHints,text:tt.ZP.Chat.InputActions.Prompt,icon:Y.jsx(ev.Z,{})}),Y.jsx(st,{onClick:()=>{s(tl.y$.Masks)},text:tt.ZP.Chat.InputActions.Masks,icon:Y.jsx(ex.Z,{})}),Y.jsx(st,{text:tt.ZP.Chat.InputActions.Clear,icon:Y.jsx(ej,{}),onClick:()=>{n.updateTargetSession(r,e=>{e.clearContextIndex===e.messages.length?e.clearContextIndex=void 0:(e.clearContextIndex=e.messages.length,e.memoryPrompt="")})}}),Y.jsx(st,{onClick:()=>g(!0),text:m,icon:Y.jsx(eU,{})}),u&&Y.jsx(tr.Qf,{defaultSelectedValue:`${o}@${c}`,items:d.map(e=>({title:`${e.displayName}${e?.provider?.providerName?" ("+e?.provider?.providerName+")":""}`,value:`${e.name}@${e?.provider?.providerName}`})),onClose:()=>g(!1),onSelection:e=>{if(0===e.length)return;let[t,s]=(0,tz.En)(e[0]);if(n.updateTargetSession(r,e=>{e.mask.modelConfig.model=t,e.mask.modelConfig.providerName=s,e.mask.syncGlobalConfig=!1}),"ByteDance"==s){let e=d.find(e=>e.name==t&&e?.provider?.providerName==s);(0,tr.CF)(e?.displayName??"")}else(0,tr.CF)(t)}}),(0,e8.ZT)(o)&&Y.jsx(st,{onClick:()=>y(!0),text:b,icon:Y.jsx(eV,{})}),w&&Y.jsx(tr.Qf,{defaultSelectedValue:b,items:E.map(e=>({title:e,value:e})),onClose:()=>y(!1),onSelection:e=>{if(0===e.length)return;let t=e[0];n.updateTargetSession(r,e=>{e.mask.modelConfig.size=t}),(0,tr.CF)(t)}}),(0,e8.Wu)(o)&&Y.jsx(st,{onClick:()=>k(!0),text:S,icon:Y.jsx(eG,{})}),_&&Y.jsx(tr.Qf,{defaultSelectedValue:S,items:["standard","hd"].map(e=>({title:e,value:e})),onClose:()=>k(!1),onSelection:e=>{if(0===e.length)return;let t=e[0];n.updateTargetSession(r,e=>{e.mask.modelConfig.quality=t}),(0,tr.CF)(t)}}),(0,e8.Wu)(o)&&Y.jsx(st,{onClick:()=>C(!0),text:M,icon:Y.jsx(eQ,{})}),j&&Y.jsx(tr.Qf,{defaultSelectedValue:M,items:["vivid","natural"].map(e=>({title:e,value:e})),onClose:()=>C(!1),onSelection:e=>{if(0===e.length)return;let t=e[0];n.updateTargetSession(r,e=>{e.mask.modelConfig.style=t}),(0,tr.CF)(t)}}),(0,e8.up)(c,o)&&Y.jsx(st,{onClick:()=>{0==a.getAll().length?s(tl.y$.Plugins):f(!0)},text:tt.ZP.Plugin.Name,icon:Y.jsx(eY,{})}),p&&Y.jsx(tr.Qf,{multiple:!0,defaultSelectedValue:n.currentSession().mask?.plugin,items:a.getAll().map(e=>({title:`${e?.title}@${e?.version}`,value:e?.id})),onClose:()=>f(!1),onSelection:e=>{n.updateTargetSession(r,t=>{t.mask.plugin=e})}}),!N&&Y.jsx(st,{onClick:()=>e.setShowShortcutKeyModal(!0),text:tt.ZP.Chat.ShortcutKey.Title,icon:Y.jsx(e0,{})}),!N&&Y.jsx(t8,{})]}),Y.jsx("div",{className:ta()["chat-input-actions-end"],children:t.realtimeConfig.enable&&Y.jsx(st,{onClick:()=>e.setShowChatSidePanel(!0),text:"Realtime Chat",icon:Y.jsx(e2,{})})})]})}function sn(e){let t=(0,e4.aK)(),s=t.currentSession(),[n,a]=(0,ee.useState)(s.messages.slice());return Y.jsx("div",{className:"modal-mask",children:(0,Y.jsxs)(tr.u_,{title:tt.ZP.Chat.EditMessage.Title,onClose:e.onClose,actions:[Y.jsx(ts.h,{text:tt.ZP.UI.Cancel,icon:Y.jsx(eZ.Z,{}),onClick:()=>{e.onClose()}},"cancel"),Y.jsx(ts.h,{type:"primary",text:tt.ZP.UI.Confirm,icon:Y.jsx(eN.Z,{}),onClick:()=>{t.updateTargetSession(s,e=>e.messages=n),e.onClose()}},"ok")],children:[Y.jsx(tr.aV,{children:Y.jsx(tr.HC,{title:tt.ZP.Chat.EditMessage.Topic.Title,subTitle:tt.ZP.Chat.EditMessage.Topic.SubTitle,children:Y.jsx("input",{type:"text",value:s.topic,onInput:e=>t.updateTargetSession(s,t=>t.topic=e.currentTarget.value)})})}),Y.jsx(tc.ContextPrompts,{context:n,updateContext:e=>{let t=n.slice();e(t),a(t)}})]})})}function sa(e){return Y.jsx("div",{className:ta()["delete-image"],onClick:e.deleteImage,children:Y.jsx(eb.Z,{})})}function sr(e){let t=navigator.platform.toUpperCase().indexOf("MAC")>=0,s=[{title:tt.ZP.Chat.ShortcutKey.newChat,keys:t?["âŒ˜","Shift","O"]:["Ctrl","Shift","O"]},{title:tt.ZP.Chat.ShortcutKey.focusInput,keys:["Shift","Esc"]},{title:tt.ZP.Chat.ShortcutKey.copyLastCode,keys:t?["âŒ˜","Shift",";"]:["Ctrl","Shift",";"]},{title:tt.ZP.Chat.ShortcutKey.copyLastMessage,keys:t?["âŒ˜","Shift","C"]:["Ctrl","Shift","C"]},{title:tt.ZP.Chat.ShortcutKey.showShortcutKey,keys:t?["âŒ˜","/"]:["Ctrl","/"]},{title:tt.ZP.Chat.ShortcutKey.clearContext,keys:t?["âŒ˜","Shift","backspace"]:["Ctrl","Shift","backspace"]}];return Y.jsx("div",{className:"modal-mask",children:Y.jsx(tr.u_,{title:tt.ZP.Chat.ShortcutKey.Title,onClose:e.onClose,actions:[Y.jsx(ts.h,{type:"primary",text:tt.ZP.UI.Confirm,icon:Y.jsx(eN.Z,{}),onClick:()=>{e.onClose()}},"ok")],children:Y.jsx("div",{className:ta()["shortcut-key-container"],children:Y.jsx("div",{className:ta()["shortcut-key-grid"],children:s.map((e,t)=>(0,Y.jsxs)("div",{className:ta()["shortcut-key-item"],children:[Y.jsx("div",{className:ta()["shortcut-key-title"],children:e.title}),Y.jsx("div",{className:ta()["shortcut-key-keys"],children:e.keys.map((e,t)=>Y.jsx("div",{className:ta()["shortcut-key"],children:Y.jsx("span",{children:e})},t))})]},t))})})})})}function si(){let e=(0,e4.aK)(),t=e.currentSession(),n=(0,e4.MG)(),a=n.fontSize,r=n.fontFamily,[i,l]=(0,ee.useState)(!1),o=(0,ee.useRef)(null),[c,h]=(0,ee.useState)(""),[d,m]=(0,ee.useState)(!1),{submitKey:u,shouldSubmit:g}=function(){let e=(0,e4.MG)(),t=e.submitKey,s=(0,ee.useRef)(!1);return(0,ee.useEffect)(()=>{let e=()=>{s.current=!0},t=()=>{s.current=!1};return window.addEventListener("compositionstart",e),window.addEventListener("compositionend",t),()=>{window.removeEventListener("compositionstart",e),window.removeEventListener("compositionend",t)}},[]),{submitKey:t,shouldSubmit:t=>229!=t.keyCode&&"Enter"===t.key&&("Enter"!==t.key||!t.nativeEvent.isComposing&&!s.current)&&(e.submitKey===e4.mQ.AltEnter&&t.altKey||e.submitKey===e4.mQ.CtrlEnter&&t.ctrlKey||e.submitKey===e4.mQ.ShiftEnter&&t.shiftKey||e.submitKey===e4.mQ.MetaEnter&&t.metaKey||e.submitKey===e4.mQ.Enter&&!t.altKey&&!t.ctrlKey&&!t.shiftKey&&!t.metaKey)}}(),p=(0,ee.useRef)(null),f=!!p?.current&&1>=Math.abs(p.current.scrollHeight-(p.current.scrollTop+p.current.clientHeight)),v=(0,ee.useMemo)(()=>{let e=p.current?.lastElementChild;return!!p?.current&&!!e&&e.getBoundingClientRect().top-p.current.getBoundingClientRect().top<100},[p?.current?.scrollHeight]),x=""!==c,{setAutoScroll:w,scrollDomToBottom:y}=function(e,t=!1,s){let[n,a]=(0,ee.useState)(!0),r=(0,ee.useCallback)(()=>{let t=e.current;t&&requestAnimationFrame(()=>{a(!0),t.scrollTo(0,t.scrollHeight)})},[e]);(0,ee.useEffect)(()=>{n&&!t&&r()});let i=(0,ee.useRef)(s.length);return(0,ee.useEffect)(()=>{s.length>i.current&&!t&&r(),i.current=s.length},[s.length,t,r]),{scrollRef:e,autoScroll:n,setAutoScroll:a,scrollDomToBottom:r}}(p,(f||v)&&!x,t.messages),[_,k]=(0,ee.useState)(!0),j=(0,e8.S0)(),C=(0,ti.s0)(),[E,b]=(0,ee.useState)([]),[S,M]=(0,ee.useState)(!1),N=(0,te.f)(),[P,Z]=(0,ee.useState)([]),O=(0,J.y1)(e=>{Z(N.search(e))},100,{leading:!0,trailing:!0}),[T,A]=(0,ee.useState)(2),L=(0,J.y1)(()=>{let e=o.current?(0,e8.lx)(o.current):1;A(Math.min(20,Math.max(2+Number(!j),e)))},100,{leading:!0,trailing:!0});(0,ee.useEffect)(L,[c]);let D=(0,td.UK)({new:()=>e.newSession(),newm:()=>C(tl.y$.NewChat),prev:()=>e.nextSession(-1),next:()=>e.nextSession(1),clear:()=>e.updateTargetSession(t,e=>e.clearContextIndex=e.messages.length),fork:()=>e.forkSession(),del:()=>e.deleteSession(e.currentSessionIndex)}),I=e=>{h(e);let t=e.trim().length;0===t?Z([]):e.match(td.x6)?Z(D.search(e)):!n.disablePromptHint&&t<30&&e.startsWith("/")&&O(e.slice(1))},R=t=>{if(""===t.trim()&&(0,tK.Z)(E))return;let s=D.match(t);if(s.matched){h(""),Z([]),s.invoke();return}m(!0),e.onUserInput(t,E).then(()=>m(!1)),b([]),e.setLastInput(t),h(""),Z([]),j||o.current?.focus(),w(!0)},H=e=>{e9.L.stop(t.id,e)};(0,ee.useEffect)(()=>{e.updateTargetSession(t,e=>{let t=Date.now()-tl.tb;e.messages.forEach(e=>{(e.isError||new Date(e.date).getTime()<t)&&(e.streaming&&(e.streaming=!1),0===e.content.length&&(e.isError=!0,e.content=(0,tm.B)({error:!0,message:"empty response"})))}),e.mask.syncGlobalConfig&&(console.log("[Mask] syncing from global, name = ",e.mask.name),e.mask.modelConfig={...n.modelConfig})})},[t]);let K=s=>{e.updateTargetSession(t,e=>e.messages=e.messages.filter(e=>e.id!==s))},z=e=>{K(e)},F=s=>{let n,a;let r=t.messages.findIndex(e=>e.id===s.id);if(r<0||r>=t.messages.length){console.error("[Chat] failed to find resending message",s);return}if("assistant"===s.role){a=s;for(let e=r;e>=0;e-=1)if("user"===t.messages[e].role){n=t.messages[e];break}}else if("user"===s.role){n=s;for(let e=r;e<t.messages.length;e+=1)if("assistant"===t.messages[e].role){a=t.messages[e];break}}if(void 0===n){console.error("[Chat] failed to resend",s);return}K(n.id),K(a?.id),m(!0);let i=(0,e8.YK)(n),l=(0,e8.Bs)(n);e.onUserInput(i,l).then(()=>m(!1)),o.current?.focus()},B=s=>{e.updateTargetSession(t,e=>e.mask.context.push(s)),(0,tr.CF)(tt.ZP.Chat.Actions.PinToastContent,{text:tt.ZP.Chat.Actions.PinToastAction,onClick:()=>{ex(!0)}})},U=(0,e4._X)(),[W,$]=(0,ee.useState)(!1),[G,X]=(0,ee.useState)(!1);async function Q(e){if(W)t2.stop(),$(!1);else{var t;let n;t=new tC.ti(tl.k8.GPT);let a=e4.MG.getState();X(!0),t2.init();let{markdownToTxt:r}=s(34433),i=r(e);if(a.ttsConfig.engine!==tl.Xu){let e=U.edgeVoiceName(),t=new tH;await t.setMetadata(e,V.AUDIO_24KHZ_96KBITRATE_MONO_MP3),n=await t.toArrayBuffer(i)}else n=await t.llm.speech({model:a.ttsConfig.model,input:i,voice:a.ttsConfig.voice,speed:a.ttsConfig.speed});$(!0),t2.play(n,()=>{$(!1)}).catch(e=>{console.error("[OpenAI Speech]",e),(0,tr.CF)((0,tm.B)(e)),$(!1)}).finally(()=>X(!1))}}let q=(0,ee.useMemo)(()=>t.mask.hideContext?[]:t.mask.context.slice(),[t.mask.context,t.mask.hideContext]);if(0===q.length&&t.messages.at(0)?.content!==e4.ux.content){let e=Object.assign({},e4.ux);U.isAuthorized()||(e.content=tt.ZP.Error.Unauthorized),q.push(e)}let et=(0,ee.useMemo)(()=>q.concat(t.messages).concat(d?[{...(0,e4.tn)({role:"assistant",content:"â€¦â€¦"}),preview:!0}]:[]).concat(c.length>0&&n.sendPreviewBubble?[{...(0,e4.tn)({role:"user",content:c}),preview:!0}]:[]),[n.sendPreviewBubble,q,d,t.messages,c]),[es,ea]=(0,ee.useState)(Math.max(0,et.length-tl.nS));function er(e){ea(e=Math.max(0,e=Math.min(et.length-tl.nS,e)))}let ei=(0,ee.useMemo)(()=>{let e=Math.min(es+3*tl.nS,et.length);return et.slice(es,e)},[es,et]),ed=e=>{let t=e.scrollTop+e.clientHeight,s=e.clientHeight,n=e.scrollTop<=s,a=t>=e.scrollHeight-s,r=t>=e.scrollHeight-(j?4:10),i=es-tl.nS,l=es+tl.nS;n&&!a?er(i):a&&er(l),k(r),w(r)};function eu(){er(et.length-tl.nS),y()}let ep=(t.clearContextIndex??-1)>=0?t.clearContextIndex+q.length-es:-1,[ev,ex]=(0,ee.useState)(!1),ek=(0,ee.useMemo)(()=>(0,tj.Z)(),[]),ej=!j,eC=!j&&!ek?.isApp;(0,td.YZ)({fill:h,submit:e=>{R(e)},code:e=>{U.disableFastLink||(console.log("[Command] got code from url: ",e),(0,tr.i0)(tt.ZP.URLCommand.Code+`code = ${e}`).then(t=>{t&&U.update(t=>t.accessCode=e)}))},settings:e=>{if(!U.disableFastLink)try{let t=JSON.parse(e);console.log("[Command] got settings from url: ",t),(t.key||t.url)&&(0,tr.i0)(tt.ZP.URLCommand.Settings+`
${JSON.stringify(t,null,4)}`).then(e=>{e&&(t.key&&U.update(e=>e.openaiApiKey=t.key),t.url&&U.update(e=>e.openaiUrl=t.url),U.update(e=>e.useCustomConfig=!0))})}catch{console.error("[Command] failed to get settings from url: ",e)}}});let[eE,eS]=(0,ee.useState)(!1);(0,ee.useEffect)(()=>{let e=(0,tl.AI)(t.id),s=t6.getItem(e);s&&0===c.length&&(h(s),t6.removeItem(e));let n=o.current;return()=>{t6.setItem(e,n?.value??"")}},[]);let eZ=(0,ee.useCallback)(async t=>{let s=e.currentSession().mask.modelConfig.model;if((0,e8.Xf)(s)){for(let e of(t.clipboardData||window.clipboardData).items)if("file"===e.kind&&e.type.startsWith("image/")){t.preventDefault();let s=e.getAsFile();if(s){let e=[];e.push(...E),e.push(...await new Promise((e,t)=>{M(!0);let n=[];(0,e7.Ix)(s).then(t=>{n.push(t),M(!1),e(n)}).catch(e=>{M(!1),t(e)})}));let t=e.length;t>3&&e.splice(3,t-3),b(e)}}}},[E,e]);async function eO(){let e=[];e.push(...E),e.push(...await new Promise((e,t)=>{let s=document.createElement("input");s.type="file",s.accept="image/png, image/jpeg, image/webp, image/heic, image/heif",s.multiple=!0,s.onchange=s=>{M(!0);let n=s.target.files,a=[];for(let r=0;r<n.length;r++){let i=s.target.files[r];(0,e7.Ix)(i).then(t=>{a.push(t),(3===a.length||a.length===n.length)&&(M(!1),e(a))}).catch(e=>{M(!1),t(e)})}},s.click()}));let t=e.length;t>3&&e.splice(3,t-3),b(e)}let[eT,eA]=(0,ee.useState)(!1);(0,ee.useEffect)(()=>{let s=s=>{if((s.metaKey||s.ctrlKey)&&s.shiftKey&&"o"===s.key.toLowerCase())s.preventDefault(),setTimeout(()=>{e.newSession(),C(tl.y$.Chat)},10);else if(s.shiftKey&&"escape"===s.key.toLowerCase())s.preventDefault(),o.current?.focus();else if((s.metaKey||s.ctrlKey)&&s.shiftKey&&"Semicolon"===s.code){s.preventDefault();let e=document.querySelectorAll(".copy-code-button");e.length>0&&e[e.length-1].click()}else if((s.metaKey||s.ctrlKey)&&s.shiftKey&&"c"===s.key.toLowerCase()){s.preventDefault();let e=ei.filter(e=>"user"!==e.role).pop();if(e){let t=(0,e8.YK)(e);(0,e8.vQ)(t)}}else(s.metaKey||s.ctrlKey)&&"/"===s.key?(s.preventDefault(),eA(!0)):(s.metaKey||s.ctrlKey)&&s.shiftKey&&"backspace"===s.key.toLowerCase()&&(s.preventDefault(),e.updateTargetSession(t,e=>{e.clearContextIndex===e.messages.length?e.clearContextIndex=void 0:(e.clearContextIndex=e.messages.length,e.memoryPrompt="")}))};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[ei,e,C,t]);let[eL,eD]=(0,ee.useState)(!1);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)("div",{className:ta().chat,children:[(0,Y.jsxs)("div",{className:"window-header","data-tauri-drag-region":!0,children:[j&&Y.jsx("div",{className:"window-actions",children:Y.jsx("div",{className:"window-action-button",children:Y.jsx(ts.h,{icon:Y.jsx(ec.Z,{}),bordered:!0,title:tt.ZP.Chat.Actions.ChatList,onClick:()=>C(tl.y$.Home)})})}),(0,Y.jsxs)("div",{className:(0,tw.Z)("window-header-title",ta()["chat-body-title"]),children:[Y.jsx("div",{className:(0,tw.Z)("window-header-main-title",ta()["chat-body-main-title"]),onClickCapture:()=>eS(!0),children:t.topic?t.topic:e4.HX}),Y.jsx("div",{className:"window-header-sub-title",children:tt.ZP.Chat.SubTitle(t.messages.length)})]}),(0,Y.jsxs)("div",{className:"window-actions",children:[Y.jsx("div",{className:"window-action-button",children:Y.jsx(ts.h,{icon:Y.jsx(e_.Z,{}),bordered:!0,title:tt.ZP.Chat.Actions.RefreshTitle,onClick:()=>{(0,tr.CF)(tt.ZP.Chat.Actions.RefreshToast),e.summarizeSession(!0,t)}})}),!j&&Y.jsx("div",{className:"window-action-button",children:Y.jsx(ts.h,{icon:Y.jsx(el,{}),bordered:!0,title:tt.ZP.Chat.EditMessage.Title,aria:tt.ZP.Chat.EditMessage.Title,onClick:()=>eS(!0)})}),Y.jsx("div",{className:"window-action-button",children:Y.jsx(ts.h,{icon:Y.jsx(eo.Z,{}),bordered:!0,title:tt.ZP.Chat.Actions.Export,onClick:()=>{l(!0)}})}),eC&&Y.jsx("div",{className:"window-action-button",children:Y.jsx(ts.h,{icon:n.tightBorder?Y.jsx(ey.Z,{}):Y.jsx(ew.Z,{}),bordered:!0,title:tt.ZP.Chat.Actions.FullScreen,aria:tt.ZP.Chat.Actions.FullScreen,onClick:()=>{n.update(e=>e.tightBorder=!e.tightBorder)}})})]}),Y.jsx(t5,{showToast:!_,showModal:ev,setShowModal:ex})]}),(0,Y.jsxs)("div",{className:ta()["chat-main"],children:[(0,Y.jsxs)("div",{className:ta()["chat-body-container"],children:[Y.jsx("div",{className:ta()["chat-body"],ref:p,onScroll:e=>ed(e.currentTarget),onMouseDown:()=>o.current?.blur(),onTouchStart:()=>{o.current?.blur(),w(!1)},children:ei.map((s,i)=>{let l="user"===s.role,o=i<q.length,c=i>0&&!(s.preview||0===s.content.length)&&!o,d=s.preview||s.streaming;return(0,Y.jsxs)(ee.Fragment,{children:[Y.jsx("div",{className:l?ta()["chat-message-user"]:ta()["chat-message"],children:(0,Y.jsxs)("div",{className:ta()["chat-message-container"],children:[(0,Y.jsxs)("div",{className:ta()["chat-message-header"],children:[(0,Y.jsxs)("div",{className:ta()["chat-message-avatar"],children:[Y.jsx("div",{className:ta()["chat-message-edit"],children:Y.jsx(ts.h,{icon:Y.jsx(el,{}),aria:tt.ZP.Chat.Actions.Edit,onClick:async()=>{let n=await (0,tr.G5)(tt.ZP.Chat.Actions.Edit,(0,e8.YK)(s),10),a=n,r=(0,e8.Bs)(s);if(r.length>0){a=[{type:"text",text:n}];for(let e=0;e<r.length;e++)a.push({type:"image_url",image_url:{url:r[e]}})}e.updateTargetSession(t,e=>{let t=e.mask.context.concat(e.messages).find(e=>e.id===s.id);t&&(t.content=a)})}})}),l?Y.jsx(to.qE,{avatar:n.avatar}):Y.jsx(Y.Fragment,{children:["system"].includes(s.role)?Y.jsx(to.qE,{avatar:"2699-fe0f"}):Y.jsx(tc.MaskAvatar,{avatar:t.mask.avatar,model:s.model||t.mask.modelConfig.model})})]}),!l&&Y.jsx("div",{className:ta()["chat-model-name"],children:s.model}),c&&Y.jsx("div",{className:ta()["chat-message-actions"],children:Y.jsx("div",{className:ta()["chat-input-actions"],children:s.streaming?Y.jsx(st,{text:tt.ZP.Chat.Actions.Stop,icon:Y.jsx(eF.Z,{}),onClick:()=>H(s.id??i)}):(0,Y.jsxs)(Y.Fragment,{children:[Y.jsx(st,{text:tt.ZP.Chat.Actions.Retry,icon:Y.jsx(e_.Z,{}),onClick:()=>F(s)}),Y.jsx(st,{text:tt.ZP.Chat.Actions.Delete,icon:Y.jsx(eb.Z,{}),onClick:()=>z(s.id??i)}),Y.jsx(st,{text:tt.ZP.Chat.Actions.Pin,icon:Y.jsx(eM,{}),onClick:()=>B(s)}),Y.jsx(st,{text:tt.ZP.Chat.Actions.Copy,icon:Y.jsx(eh.Z,{}),onClick:()=>(0,e8.vQ)((0,e8.YK)(s))}),n.ttsConfig.enable&&Y.jsx(st,{text:W?tt.ZP.Chat.Actions.StopSpeech:tt.ZP.Chat.Actions.Speech,icon:W?Y.jsx(eg,{}):Y.jsx(em,{}),onClick:()=>Q((0,e8.YK)(s))})]})})})]}),s?.tools?.length==0&&d&&Y.jsx("div",{className:ta()["chat-message-status"],children:tt.ZP.Chat.Typing}),s?.tools?.length>0&&Y.jsx("div",{className:ta()["chat-message-tools"],children:s?.tools?.map(e=>Y.jsxs("div",{title:e?.errorMsg,className:ta()["chat-message-tool"],children:[!1===e.isError?Y.jsx(eN.Z,{}):!0===e.isError?Y.jsx(eP.Z,{}):Y.jsx(ef.Z,{}),Y.jsx("span",{children:e?.function?.name})]},e.id))}),(0,Y.jsxs)("div",{className:ta()["chat-message-item"],children:[Y.jsx(t4,{content:(0,e8.YK)(s),loading:(s.preview||s.streaming)&&0===s.content.length&&!l,onDoubleClickCapture:()=>{j&&h((0,e8.YK)(s))},fontSize:a,fontFamily:r,parentRef:p,defaultShow:i>=ei.length-6},s.streaming?"loading":"done"),1==(0,e8.Bs)(s).length&&Y.jsx("img",{className:ta()["chat-message-item-image"],src:(0,e8.Bs)(s)[0],alt:""}),(0,e8.Bs)(s).length>1&&Y.jsx("div",{className:ta()["chat-message-item-images"],style:{"--image-count":(0,e8.Bs)(s).length},children:(0,e8.Bs)(s).map((e,t)=>Y.jsx("img",{className:ta()["chat-message-item-image-multi"],src:e,alt:""},t))})]}),s?.audio_url&&Y.jsx("div",{className:ta()["chat-message-audio"],children:Y.jsx("audio",{src:s.audio_url,controls:!0})}),Y.jsx("div",{className:ta()["chat-message-action-date"],children:o?tt.ZP.Chat.IsContext:s.date.toLocaleString()})]})}),i===ep-1&&Y.jsx(se,{})]},s.id)})}),(0,Y.jsxs)("div",{className:ta()["chat-input-panel"],children:[Y.jsx(t9,{prompts:P,onPromptSelect:e=>{setTimeout(()=>{Z([]);let t=D.match(e.content);t.matched?(t.invoke(),h("")):h(e.content),o.current?.focus()},30)}}),Y.jsx(ss,{uploadImage:eO,setAttachImages:b,setUploading:M,showPromptModal:()=>ex(!0),scrollToBottom:eu,hitBottom:_,uploading:S,showPromptHints:()=>{if(P.length>0){Z([]);return}o.current?.focus(),h("/"),O("")},setShowShortcutKeyModal:eA,setUserInput:h,setShowChatSidePanel:eD}),(0,Y.jsxs)("label",{className:(0,tw.Z)(ta()["chat-input-panel-inner"],{[ta()["chat-input-panel-inner-attach"]]:0!==E.length}),htmlFor:"chat-input",children:[Y.jsx("textarea",{id:"chat-input",ref:o,className:ta()["chat-input"],placeholder:tt.ZP.Chat.Input(u),onInput:e=>I(e.currentTarget.value),value:c,onKeyDown:t=>{if("ArrowUp"===t.key&&c.length<=0&&!(t.metaKey||t.altKey||t.ctrlKey)){h(e.lastInput??""),t.preventDefault();return}g(t)&&0===P.length&&(R(c),t.preventDefault())},onFocus:eu,onClick:eu,onPaste:eZ,rows:T,autoFocus:ej,style:{fontSize:n.fontSize,fontFamily:n.fontFamily}}),0!=E.length&&Y.jsx("div",{className:ta()["attach-images"],children:E.map((e,t)=>Y.jsx("div",{className:ta()["attach-image"],style:{backgroundImage:`url("${e}")`},children:Y.jsx("div",{className:ta()["attach-image-mask"],children:Y.jsx(sa,{deleteImage:()=>{b(E.filter((e,s)=>s!==t))}})})},t))}),Y.jsx(ts.h,{icon:Y.jsx(en,{}),text:tt.ZP.Chat.Send,className:ta()["chat-input-send"],type:"primary",onClick:()=>R(c)})]})]})]}),Y.jsx("div",{className:(0,tw.Z)(ta()["chat-side-panel"],{[ta().mobile]:j,[ta()["chat-side-panel-show"]]:eL}),children:eL&&Y.jsx(t1,{onClose:()=>{eD(!1)},onStartVoice:async()=>{console.log("start voice")}})})]})]},t.id),i&&Y.jsx(tb,{onClose:()=>l(!1)}),eE&&Y.jsx(sn,{onClose:()=>{eS(!1)}}),eT&&Y.jsx(sr,{onClose:()=>eA(!1)})]})}function sl(){let e=(0,e4.aK)().currentSession();return Y.jsx(si,{},e.id)}},52097:e=>{e.exports={"message-exporter-body":"exporter_message-exporter-body__ieezO","export-content":"exporter_export-content__bLZvx",steps:"exporter_steps__6n3hv","steps-progress":"exporter_steps-progress__BaZCB","steps-progress-inner":"exporter_steps-progress-inner__Bx3Y4","steps-inner":"exporter_steps-inner__EVqvK",step:"exporter_step__WhCEO","step-finished":"exporter_step-finished__eBg9d","step-current":"exporter_step-current__oh5Mc","step-index":"exporter_step-index__bWRYR","step-name":"exporter_step-name__aj81m","preview-actions":"exporter_preview-actions__EdSLJ","image-previewer":"exporter_image-previewer__uKfNQ","preview-body":"exporter_preview-body__qK5Zf","chat-info":"exporter_chat-info__N_j5m",icons:"exporter_icons__7WRoV",logo:"exporter_logo__zu13e","main-title":"exporter_main-title__jjxAd","sub-title":"exporter_sub-title__p1RCl","icon-space":"exporter_icon-space__u_tMK","chat-info-item":"exporter_chat-info-item__3D12j",message:"exporter_message__3aahS",avatar:"exporter_avatar__fGOtt",body:"exporter_body__gcKIl","message-image":"exporter_message-image__ofOeC","message-images":"exporter_message-images__oJoIX","message-image-multi":"exporter_message-image-multi__jzQdX","message-assistant":"exporter_message-assistant__sDmHi","message-user":"exporter_message-user__2t254"}},56270:e=>{e.exports={"message-selector":"message-selector_message-selector__dOKbo","message-filter":"message-selector_message-filter__Q5XSd","search-bar":"message-selector_search-bar__4E5gq",actions:"message-selector_actions__MyZCT",messages:"message-selector_messages__GbOLr",message:"message-selector_message___TaV9","message-selected":"message-selector_message-selected__b3mDv",avatar:"message-selector_avatar__HCJ8t",body:"message-selector_body__rKEIZ",date:"message-selector_date__vc48w",content:"message-selector_content__Z9W8L",checkbox:"message-selector_checkbox__erPyd"}},45136:e=>{e.exports={"realtime-chat":"realtime-chat_realtime-chat__g_U_c","circle-mic":"realtime-chat_circle-mic__SfmZp","icon-center":"realtime-chat_icon-center__3JpXN","bottom-icons":"realtime-chat_bottom-icons__siVHg","icon-left":"realtime-chat_icon-left__O_fpx","icon-right":"realtime-chat_icon-right__3eC9i",mobile:"realtime-chat_mobile__WtJW9",pulse:"realtime-chat_pulse__DSlz2"}},19262:e=>{e.exports={"voice-print":"voice-print_voice-print__GHMDU"}}};