(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3651:function(e,t,r){Promise.resolve().then(r.bind(r,917))},917:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return es}});var s=r(7437),a=r(2265),n=r(257);let l=function(){let{purpose:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};{let{host:t}=window.location;return n.env.NEXT_PUBLIC_GPTR_API_URL?n.env.NEXT_PUBLIC_GPTR_API_URL:"langgraph-gui"===e?t.includes("localhost")?"http%3A%2F%2F127.0.0.1%3A8123":"https://".concat(t):t.includes("localhost")?"http://localhost:8000":"https://".concat(t)}},o=(e,t,r,s,n)=>{let[o,i]=(0,a.useState)(null),c=(0,a.useRef)();(0,a.useEffect)(()=>()=>{c.current&&clearInterval(c.current)},[]);let d=e=>{c.current&&clearInterval(c.current),c.current=window.setInterval(()=>{e.readyState===WebSocket.OPEN&&e.send("ping")},3e4)};return{socket:o,setSocket:i,initializeWebSocket:(a,u)=>{let h=localStorage.getItem("apiVariables");if(h&&JSON.parse(h),!o){let o=l(),h=o.replace("http://","").replace("https://",""),p=new WebSocket("".concat(o.includes("https")?"wss:":"ws:","//").concat(h,"/ws"));i(p),p.onopen=()=>{let{report_type:e,report_source:t,tone:r,domains:s}=u,n="start "+JSON.stringify({task:a,report_type:e,report_source:t,tone:r,query_domains:s.map(e=>e.value)});p.send(n),d(p)},p.onmessage=a=>{try{if("pong"===a.data)return;let l=JSON.parse(a.data);if("human_feedback"===l.type&&"request"===l.content)n(l.output),s(!0);else{let s="".concat(l.content,"-").concat(l.type);e(e=>[...e,{...l,contentAndType:s}]),"report"===l.type?t(e=>e+l.output):("path"===l.type||"chat"===l.type)&&r(!1)}}catch(e){console.error("Error parsing WebSocket message:",e,a.data)}},p.onclose=()=>{c.current&&clearInterval(c.current),i(null)},p.onerror=e=>{console.error("WebSocket error:",e),c.current&&clearInterval(c.current)}}}}};var i=r(4560);let c={task:{query:"Is AI in a hype cycle?",include_human_feedback:!1,model:"gpt-4o",max_sections:3,publish_formats:{markdown:!0,pdf:!0,docx:!0},source:"web",follow_guidelines:!0,guidelines:["The report MUST fully answer the original question","The report MUST be written in apa format","The report MUST be written in english"],verbose:!0},initial_research:"Initial research data here",sections:["Section 1","Section 2"],research_data:"Research data here",title:"Research Title",headers:{introduction:"Introduction header",table_of_contents:"Table of Contents header",conclusion:"Conclusion header",sources:"Sources header"},date:"2023-10-01",table_of_contents:"- Introduction\n- Section 1\n- Section 2\n- Conclusion",introduction:"Introduction content here",conclusion:"Conclusion content here",sources:["Source 1","Source 2"],report:"Full report content here"};async function d(e,t,r){c.task.query=e,c.task.source=t;let s=new i.K({apiUrl:r,defaultHeaders:{"Content-Type":"application/json","X-Api-Key":"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"}}),a=await s.assistants.search({metadata:null,offset:0,limit:10});console.log("assistants: ",a);let n=a[0],l=await s.threads.create();return{streamResponse:s.runs.stream(l.thread_id,n.assistant_id,{input:c}),host:r,thread_id:l.thread_id}}var u=function(e,t){function r(e){return e&&"object"==typeof e&&!Array.isArray(e)}return function e(t,s){let a={};for(let n in t)if(r(t[n])&&r(s[n])){let r=e(t[n],s[n]);Object.keys(r).length>0&&(a[n]=r)}else Array.isArray(t[n])&&Array.isArray(s[n])?(t[n].length!==s[n].length||t[n].some((e,t)=>e!==s[n][t]))&&(a[n]={before:t[n],after:s[n]}):t[n]!==s[n]&&(a[n]={before:t[n],after:s[n]});for(let e in s)e in t||(a[e]={before:void 0,after:s[e]});return a}(e,t)};let h=e=>{let t={type:"sourceBlock",items:e.filter(e=>"sourceBlock"===e.type).flatMap(e=>e.items||[]).filter((e,t,r)=>t===r.findIndex(t=>t.url===e.url))},r={type:"imagesBlock",metadata:e.filter(e=>"imagesBlock"===e.type).flatMap(e=>e.metadata||[])};return e=e.filter(e=>"sourceBlock"!==e.type&&"imagesBlock"!==e.type),t.items.length>0&&e.push(t),r.metadata.length>0&&e.push(r),e},p=e=>{let t=[],r=null,s=null,a=null,n=null,l=!1,o=-1,i=new Set;return e.forEach(e=>{let{type:c,content:d,metadata:u,output:h,link:p}=e;if("question"===c)t.push({type:"question",content:d});else if("report"===c)a||(a={type:"reportBlock",content:""},t.push(a)),a.content+=h;else if("selected_images"===d)t.push({type:"imagesBlock",metadata:u});else if("logs"===c&&"research_report"===d)n||(n={type:"reportBlock",content:""},t.push(n)),n.content+=h.report;else if("langgraphButton"===c)t.push({type:"langgraphButton",link:p});else if("chat"===c)t.push({type:"chat",content:d});else if(a&&(a=null),"subqueries"===d)r&&(r=null),s&&(t.push(s),s=null),t.push(e),o=t.length-1;else if("sourceBlock"===c)s=e,-1!==o?(t.splice(o+1,0,s),o=-1):t.push(s),l=!0,s=null;else if("added_source_url"===d){if(s||(s={type:"sourceBlock",items:[]}),!i.has(u)){i.add(u);let e="";try{"string"==typeof u&&(e=new URL(u).hostname.replace("www.",""))}catch(t){e="unknown"}s.items.push({name:e,url:u})}s.items.length>0&&!t.includes(s)&&(t.push(s),l=!0)}else if("path"!==c&&""!==d)l?(r||(r={type:"accordionBlock",items:[]},t.push(r)),r.items.push(e)):t.push(e);else{if(r&&(r=null),s&&(s=null),a){let e=t.findIndex(e=>e===a);-1!==e&&t.splice(e,1),a=null}t.push(e)}}),t=h(t)};var m=r(3145),x=e=>{let{question:t}=e;return(0,s.jsxs)("div",{className:"container w-full flex flex-col sm:flex-row items-start gap-3 pt-5 mb-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-4",children:[(0,s.jsx)(m.default,{src:"/img/message-question-circle.svg",alt:"message",width:24,height:24,className:"w-6 h-6"}),(0,s.jsx)("p",{className:"font-bold uppercase leading-[152%] text-white",children:"Research Task:"}),(0,s.jsx)("br",{})]}),(0,s.jsxs)("div",{className:"grow text-white break-words max-w-full log-message",children:['"',t,'"']})]})},g=r(9064),f=r(8236),b=r(6507);function v(e){let{answer:t}=e;async function r(e){try{return(await (0,f.j)().use(b.Z).process(e)).toString()}catch(e){return console.error("Error converting Markdown to HTML:",e),""}}let[n,l]=(0,a.useState)("");return(0,a.useEffect)(()=>{r(t).then(e=>l(e))},[t]),(0,s.jsxs)("div",{className:"container flex h-auto w-full shrink-0 gap-4 bg-gray-900 shadow-md rounded-lg border border-solid border-[#C2C2C2] p-5",children:[(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("div",{className:"flex items-center justify-between pb-3",children:t&&(0,s.jsx)("div",{className:"flex items-center gap-3",children:(0,s.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(t.trim()),(0,g.Am)("Answer copied to clipboard",{icon:"âœ‚ï¸"})},children:(0,s.jsx)(m.default,{src:"/img/copy-white.svg",alt:"footer",width:20,height:20,className:"cursor-pointer text-white"})})})}),(0,s.jsx)("div",{className:"flex flex-wrap content-center items-center gap-[15px] pl-10 pr-10",children:(0,s.jsx)("div",{className:"w-full whitespace-pre-wrap text-base font-light leading-[152.5%] text-white log-message",children:t?(0,s.jsx)("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:n}}):(0,s.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,s.jsx)("div",{className:"h-6 w-full animate-pulse rounded-md bg-gray-300"}),(0,s.jsx)("div",{className:"h-6 w-full animate-pulse rounded-md bg-gray-300"}),(0,s.jsx)("div",{className:"h-6 w-full animate-pulse rounded-md bg-gray-300"}),(0,s.jsx)("div",{className:"h-6 w-full animate-pulse rounded-md bg-gray-300"})]})})})]}),(0,s.jsx)(g.x7,{position:"top-center",reverseOrder:!1,toastOptions:{duration:2e3}})]})}r(2333);var j=e=>{let{source:t}=e,[r,n]=(0,a.useState)("https://www.google.com/s2/favicons?domain=".concat(t.url,"&sz=128"));return(0,s.jsxs)("div",{className:"flex h-[79px] w-full items-center gap-2.5 rounded border border-solid border-[#C1C1C1] bg-neutral-50 px-1.5 py-1 md:w-auto",children:[(0,s.jsx)("div",{className:"",children:(0,s.jsx)(m.default,{src:r,alt:t.url,className:"p-1",width:44,height:44,onError:()=>{n("/img/globe.svg")}})}),(0,s.jsxs)("div",{className:"flex max-w-[192px] flex-col justify-center gap-[7px]",children:[(0,s.jsx)("h6",{className:"line-clamp-2 text-sm font-light leading-[normal] text-[#1B1B16]",children:t.name}),(0,s.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:t.url,className:"truncate text-sm font-light text-[#1B1B16]/30",children:t.url})]})]})};function w(e){let{sources:t}=e;return(0,s.jsxs)("div",{className:"container h-auto w-full shrink-0 rounded-lg border border-solid border-[#C2C2C2] bg-gray-800 shadow-md p-5",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4 pb-3 lg:pb-3.5",children:[(0,s.jsx)(m.default,{src:"/img/browser.svg",alt:"footer",width:24,height:24}),(0,s.jsxs)("h3",{className:"text-base font-bold uppercase leading-[152.5%] text-white",children:["sources"," "]})]}),(0,s.jsx)("div",{className:"overflow-y-auto max-h-[250px] scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-300",children:(0,s.jsx)("div",{className:"flex w-full max-w-[890px] flex-wrap content-center items-center gap-[15px] pb-2",children:t.length>0?t.map(e=>(0,s.jsx)(j,{source:e},e.url)):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"h-20 w-[260px] max-w-sm animate-pulse rounded-md bg-gray-300"}),(0,s.jsx)("div",{className:"h-20 w-[260px] max-w-sm animate-pulse rounded-md bg-gray-300"}),(0,s.jsx)("div",{className:"h-20 w-[260px] max-w-sm animate-pulse rounded-md bg-gray-300"}),(0,s.jsx)("div",{className:"h-20 w-[260px] max-w-sm animate-pulse rounded-md bg-gray-300"}),(0,s.jsx)("div",{className:"h-20 w-[260px] max-w-sm animate-pulse rounded-md bg-gray-300"}),(0,s.jsx)("div",{className:"h-20 w-[260px] max-w-sm animate-pulse rounded-md bg-gray-300"})]})})})]})}function y(e){let{imageSrc:t,isOpen:r,onClose:n,onNext:l,onPrev:o}=e;if((0,a.useEffect)(()=>{if(!r)return;let e=e=>{"ArrowLeft"===e.key?o():"ArrowRight"===e.key?l():"Escape"===e.key&&n()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r,n,l,o]),!r)return null;let i=0,c=0,d=()=>{c<i-50?l():c>i+50&&o()};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4 overflow-auto",onClick:e=>{e.target===e.currentTarget&&n()},onTouchStart:e=>{i=e.changedTouches[0].screenX},onTouchEnd:e=>{c=e.changedTouches[0].screenX,d()},children:(0,s.jsxs)("div",{className:"relative max-w-[90vw] max-h-[90vh] flex items-center justify-center",children:[(0,s.jsx)("button",{onClick:o,className:"absolute left-4 z-10 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75",children:"â†"}),(0,s.jsx)("img",{src:t,alt:"Modal view",className:"max-h-[90vh] max-w-[90vw] object-contain"}),(0,s.jsx)("button",{onClick:l,className:"absolute right-4 z-10 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75",children:"â†’"}),(0,s.jsx)("button",{onClick:n,className:"absolute top-4 right-4 z-10 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75",children:"\xd7"})]})})}function N(e){let{images:t}=e,[r,n]=(0,a.useState)(!1),[l,o]=(0,a.useState)(null),[i,c]=(0,a.useState)(0),[d,u]=(0,a.useState)(t),h=(e,t)=>{o(e),c(t),n(!0)},p=e=>{u(t=>t.filter(t=>t!==e))};return((0,a.useEffect)(()=>{let e=[];u(t.filter(t=>!e.includes(t)))},[t]),0===d.length)?null:(0,s.jsxs)("div",{className:"w-full h-full min-h-[200px] max-h-[400px]",children:[(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-4 gap-4 pb-4",children:d.map((e,t)=>(0,s.jsx)("div",{className:"relative aspect-square bg-gray-700 rounded-lg overflow-hidden hover:shadow-lg transition-shadow duration-300",children:(0,s.jsx)("img",{src:e,alt:"Image ".concat(t+1),className:"absolute inset-0 w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity duration-300",onClick:()=>h(e,t),onError:()=>p(e)})},t))}),l&&(0,s.jsx)(y,{imageSrc:l,isOpen:r,onClose:()=>{n(!1),o(null)},onNext:()=>{c(e=>(e+1)%d.length),o(d[(i+1)%d.length])},onPrev:()=>{c(e=>(e-1+d.length)%d.length),o(d[(i-1+d.length)%d.length])}})]})}var k=e=>{let{metadata:t}=e;return(0,s.jsxs)("div",{className:"container h-auto w-full shrink-0 rounded-lg border border-solid border-[#C2C2C2] bg-gray-800 shadow-md p-5",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4 pb-3 lg:pb-3.5",children:[(0,s.jsx)(m.default,{src:"/img/image.svg",alt:"images",width:24,height:24}),(0,s.jsx)("h3",{className:"text-base font-bold uppercase leading-[152.5%] text-white",children:"Related Images"})]}),(0,s.jsx)("div",{className:"overflow-y-auto max-h-[500px] scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-300",children:(0,s.jsx)(N,{images:t})})]})},S=e=>{let{metadata:t,handleClickSuggestion:r}=e;return(0,s.jsxs)("div",{className:"container flex w-full items-start gap-3 pt-5 pb-2",children:[(0,s.jsx)("div",{className:"flex w-fit items-center gap-4",children:(0,s.jsx)(m.default,{src:"/img/thinking.svg",alt:"thinking",width:30,height:30,className:"size-[24px]"})}),(0,s.jsxs)("div",{className:"grow text-white",children:[(0,s.jsx)("p",{className:"pr-5 font-bold leading-[152%] text-white pb-[20px]",children:"Pondering your question from several angles"}),(0,s.jsx)("div",{className:"flex flex-row flex-wrap items-center gap-2.5 pb-[20px]",children:t.map((e,t)=>(0,s.jsx)("div",{className:"flex cursor-pointer items-center justify-center gap-[5px] rounded-full border border-solid border-[#C1C1C1] bg-[#EDEDEA] px-2.5 py-2",onClick:()=>r(e),children:(0,s.jsx)("span",{className:"text-sm font-light leading-[normal] text-[#1B1B16]",children:e})},"".concat(e,"-").concat(t)))})]})]})},_=r(29),C=r.n(_),E=e=>{let{logs:t}=e,r=e=>{let t=e.text.match(/ðŸ“ƒ Source: (https?:\/\/[^\s]+)/),r="";return t&&(r=t[1]),"differences"===e.header?"The following fields on the Langgraph were updated: "+Object.keys(JSON.parse(e.text).data).join(", "):"\uD83D\uDCC4 Retrieved relevant content from the source: ".concat(r)},n=e=>"differences"===e.header&&e.processedData?e.processedData.map((e,t)=>(0,s.jsxs)("div",{className:"jsx-12971e308099aade mb-4",children:[(0,s.jsxs)("h3",{className:"jsx-12971e308099aade font-semibold text-lg text-body-color dark:text-dark-6",children:[e.field,":"]}),e.isMarkdown?(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:e.htmlContent},className:"jsx-12971e308099aade markdown-content"}):(0,s.jsx)("p",{className:"jsx-12971e308099aade text-body-color dark:text-dark-6",children:"object"==typeof e.htmlContent?JSON.stringify(e.htmlContent):e.htmlContent}),(0,s.jsx)(C(),{id:"12971e308099aade",children:".markdown-content.jsx-12971e308099aade{margin:0;padding:0;h1, h2, h3, h4, h5, h6 {\r\n                font-size: inherit;\r\n                font-weight: bold;\r\n                margin-top: 1em;\r\n                margin-bottom: 0.2em;\r\n                line-height: 1.2;\r\n              }\r\n              h1 {\r\n                font-size: 2.5em;\r\n                color: #333;\r\n              }\r\n              h2 {\r\n                font-size: 2em;\r\n                color: #555;\r\n              }\r\n              h3 {\r\n                font-size: 1.5em;\r\n                color: #777;\r\n              }\r\n              h4 {\r\n                font-size: 1.2em;\r\n                color: #999;\r\n              }\r\n              ul {\r\n                list-style-type: none;\r\n                padding-left: 0;\r\n                margin-top: 1em;\r\n                margin-bottom: 1em;\r\n              }\r\n              ul > li {\r\n                margin-bottom: 0.5em;\r\n              }\r\n              ul > li > ul {\r\n                margin-left: 1em;\r\n                list-style-type: disc;\r\n              }\r\n              ul > li > ul > li {\r\n                margin-bottom: 0.3em;\r\n              }\r\n              ul > li > ul > li > ul {\r\n                margin-left: 1em;\r\n                list-style-type: circle;\r\n              }\r\n              ul > li > ul > li > ul > li {\r\n                margin-bottom: 0.2em;\r\n              }\r\n            }"})]},t)):(0,s.jsx)("p",{className:"mb-2 text-body-color dark:text-dark-6",children:e.text}),[l,o]=(0,a.useState)(null),i=e=>{o(l===e?null:e)};return(0,s.jsx)("div",{id:"accordion-collapse","data-accordion":"collapse",className:"mt-4 bg-gray-900 rounded-lg",children:t.map((e,t)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{id:"accordion-collapse-heading-".concat(t),children:(0,s.jsxs)("button",{type:"button",className:"flex items-center w-full p-5 font-medium rtl:text-right text-white rounded-t-xl gap-3",onClick:()=>i(t),"aria-expanded":l===t,"aria-controls":"accordion-collapse-body-".concat(t),children:[(0,s.jsx)("span",{className:"flex-grow text-left",children:r(e)}),(0,s.jsx)("svg",{"data-accordion-icon":!0,className:"w-3 h-3 ".concat(l===t?"rotate-180":""," shrink-0"),"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6",children:(0,s.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5 5 1 1 5"})})]})}),(0,s.jsx)("div",{id:"accordion-collapse-body-".concat(t),className:"".concat(l===t?"":"hidden"),"aria-labelledby":"accordion-collapse-heading-".concat(t),children:(0,s.jsx)("div",{className:"p-5 border border-b-0 border-gray-900 dark:border-gray-900 dark:bg-gray-900 text-white",children:n(e)})})]},t))})};let B=async e=>{try{return(await (0,f.j)().use(b.Z).process(e)).toString()}catch(e){return console.error("Error converting Markdown to HTML:",e),""}},T=["task","sections","headers","sources","research_data"];var R=e=>{let{logs:t}=e,[r,n]=(0,a.useState)([]);return(0,a.useEffect)(()=>{(async()=>{t&&n(await Promise.all(t.map(async e=>{try{if("differences"===e.header&&e.text){let t=JSON.parse(e.text).data,r=await Promise.all(Object.keys(t).map(async e=>{let r=t[e].after||t[e].before;if(!T.includes(e)){let t=await B(r);return{field:e,htmlContent:t,isMarkdown:!0}}return{field:e,htmlContent:r,isMarkdown:!1}}));return{...e,processedData:r}}return e}catch(t){return console.error("Error processing log:",t),e}})))})()},[t]),(0,s.jsx)(s.Fragment,{children:r.map((e,t)=>"subquery_context_window"===e.header||"differences"===e.header?(0,s.jsx)(E,{logs:[e]},t):"selected_images"!==e.header&&"scraping_images"!==e.header?(0,s.jsx)("div",{className:"w-full max-w-4xl mx-auto rounded-lg pt-2 mt-3 pb-2 px-4 bg-gray-900 shadow-md",children:(0,s.jsx)("p",{className:"py-3 text-base leading-relaxed text-white dark:text-white",children:e.text})},t):null)})},D=e=>{let{logs:t}=e,r=(0,a.useRef)(null);return(0,a.useEffect)(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[t]),(0,s.jsxs)("div",{className:"container h-auto w-full shrink-0 rounded-lg border border-solid border-[#C2C2C2] bg-gray-800 shadow-md p-5 mt-5",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4 pb-3 lg:pb-3.5",children:[(0,s.jsx)(m.default,{src:"/img/chat-check.svg",alt:"logs",width:24,height:24}),(0,s.jsx)("h3",{className:"text-base font-bold uppercase leading-[152.5%] text-white",children:"Agent Work"})]}),(0,s.jsx)("div",{ref:r,className:"overflow-y-auto min-h-[200px] max-h-[500px] scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-300",children:(0,s.jsx)(R,{logs:t})})]})},A=e=>{let{accessData:t,chatBoxSettings:r,report:a}=e,n=l(),o=e=>{if(!(null==t?void 0:t[e]))return console.warn("No ".concat(e," path provided")),"#";let r=t[e].trim().replace(/^\/+|\/+$/g,""),s=r.startsWith("outputs/")?r:"outputs/".concat(r);return"".concat(n,"/").concat(s)};return t&&"object"==typeof t?(0,s.jsxs)("div",{className:"flex justify-center mt-4",children:[(0,s.jsx)("a",{href:o("pdf"),className:"bg-purple-500 text-white active:bg-purple-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",target:"_blank",rel:"noopener noreferrer",children:"View as PDF"}),(0,s.jsx)("a",{href:o("docx"),className:"bg-purple-500 text-white active:bg-purple-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",target:"_blank",rel:"noopener noreferrer",children:"Download DocX"}),(null==r?void 0:r.report_type)==="research_report"&&(0,s.jsx)("a",{href:o("json"),className:"bg-purple-500 text-white active:bg-purple-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",target:"_blank",rel:"noopener noreferrer",children:"Download Logs"})]}):null};let I=e=>{let{orderedData:t,answer:r,allLogs:a,chatBoxSettings:n,handleClickSuggestion:l}=e,o=p(t),i=o.find(e=>"path"===e.type),c=o.find(e=>"question"===e.type),d=o.filter(e=>("question"!==e.type||e!==c)&&("question"===e.type||"chat"===e.type)).map((e,t)=>"question"===e.type?(0,s.jsx)(x,{question:e.content},"question-".concat(t)):(0,s.jsx)(v,{answer:e.content},"chat-".concat(t))),u=o.filter(e=>"sourceBlock"===e.type).map((e,t)=>(0,s.jsx)(w,{sources:e.items},"sourceBlock-".concat(t))),h=o.filter(e=>"imagesBlock"===e.type).map((e,t)=>(0,s.jsx)(k,{metadata:e.metadata},"images-".concat(t)));o.find(e=>"reportBlock"===e.type);let m=o.filter(e=>"reportBlock"===e.type).pop(),g=o.find(e=>"subqueries"===e.content);return(0,s.jsxs)(s.Fragment,{children:[c&&(0,s.jsx)(x,{question:c.content}),t.length>0&&(0,s.jsx)(D,{logs:a}),g&&(0,s.jsx)(S,{metadata:g.metadata,handleClickSuggestion:l}),u,h,m&&(0,s.jsx)(v,{answer:m.content}),i&&(0,s.jsx)(A,{accessData:i.output,report:r,chatBoxSettings:n}),d]})};var O=e=>{let{loading:t,isStopped:r,showResult:a,onStop:n,onNewResearch:l}=e;return(0,s.jsxs)("div",{className:"fixed top-0 left-0 right-0 z-50",children:[(0,s.jsx)("div",{className:"absolute inset-0 backdrop-blur-sm bg-gradient-to-b to-transparent"}),(0,s.jsx)("div",{className:"container relative h-[60px] px-4 lg:h-[80px] lg:px-0 pt-4 pb-4",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("a",{href:"/",children:(0,s.jsx)(m.default,{src:"/img/gptr-logo.png",alt:"logo",width:60,height:60,className:"lg:h-16 lg:w-16"})}),(0,s.jsxs)("div",{className:"flex gap-2 mt-2 transition-all duration-300 ease-in-out",children:[t&&!r&&(0,s.jsx)("button",{onClick:n,className:"flex items-center justify-center px-6 h-8 text-sm text-white bg-red-500 rounded-full hover:bg-red-600 transform hover:scale-105 transition-all duration-200 shadow-lg whitespace-nowrap",children:"Stop"}),(r||!t)&&a&&(0,s.jsx)("button",{onClick:l,className:"flex items-center justify-center px-6 h-8 text-sm text-white bg-[rgb(168,85,247)] rounded-full hover:bg-[rgb(147,51,234)] transform hover:scale-105 transition-all duration-200 shadow-lg whitespace-nowrap",children:"New Research"})]})]})})]})},q=()=>(0,s.jsxs)("div",{className:"loader pb-1",children:[(0,s.jsx)("span",{}),(0,s.jsx)("span",{}),(0,s.jsx)("span",{})]}),L=e=>{var t;let r,{promptValue:n,setPromptValue:l,handleSubmit:o,handleSecondary:i,disabled:c,reset:d,isStopped:u}=e,h=(0,a.useRef)(null),p=()=>{h.current&&(h.current.style.height="3em")},x=(t=e=>{e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px")},function(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];clearTimeout(r),r=setTimeout(()=>{clearTimeout(r),t(...s)},100)});return u?null:(0,s.jsxs)("form",{className:"mx-auto flex pt-2 pb-2 w-full items-center justify-between rounded-lg border bg-white px-3 shadow-[2px_2px_38px_0px_rgba(0,0,0,0.25),0px_-2px_4px_0px_rgba(0,0,0,0.25)_inset,1px_2px_4px_0px_rgba(0,0,0,0.25)_inset]",onSubmit:e=>{e.preventDefault(),d&&d(),o(n),l(""),p()},children:[(0,s.jsx)("textarea",{placeholder:i?"Any questions about this report?":"What would you like to research next?",ref:h,className:"focus-visible::outline-0 my-1 w-full pl-5 font-light not-italic leading-[normal]    text-[#1B1B16]/30 text-black outline-none focus-visible:ring-0 focus-visible:ring-offset-0    sm:text-xl min-h-[3em] resize-none",disabled:c,value:n,required:!0,rows:2,onKeyDown:e=>{"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),c||(d&&d(),o(n),l(""),p()))},onChange:e=>{let t=e.target;x(t),l(t.value)}}),(0,s.jsxs)("button",{disabled:c,type:"submit",className:"relative flex h-[50px] w-[50px] shrink-0 items-center justify-center rounded-[3px] bg-[linear-gradient(154deg,#1B1B16_23.37%,#565646_91.91%)] disabled:pointer-events-none disabled:opacity-75",children:[c&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)(q,{})}),(0,s.jsx)(m.default,{unoptimized:!0,src:"/img/arrow-narrow-right.svg",alt:"search",width:24,height:24,className:c?"invisible":""})]})]})};let P=[{id:1,name:"Stock analysis on ",icon:"/img/stock2.svg"},{id:2,name:"Help me plan an adventure to ",icon:"/img/hiker.svg"},{id:3,name:"What are the latest news on ",icon:"/img/news.svg"}];var F=e=>{let{promptValue:t,setPromptValue:r,handleDisplayResult:a}=e,n=e=>{r(e)};return(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 md:py-12 lg:pt-8 lg:pb-16",children:[(0,s.jsxs)("div",{className:"landing flex flex-col items-center mb-8 md:mb-12",children:[(0,s.jsxs)("h1",{className:"text-4xl font-extrabold text-center lg:text-7xl mb-6",children:["Say Goodbye to ",(0,s.jsx)("br",{}),(0,s.jsx)("span",{style:{backgroundImage:"linear-gradient(to right, #9867F0, #ED4E50)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Hours of Research"})]}),(0,s.jsx)("h2",{className:"text-xl font-light text-center px-4 mb-10 md:mb-12 text-gray-300",children:"Say Hello to GPT Researcher, your AI mate for rapid insights and comprehensive research"})]}),(0,s.jsx)("div",{className:"w-full max-w-[708px] pb-8 md:pb-10 px-4",children:(0,s.jsx)(L,{promptValue:t,setPromptValue:r,handleSubmit:a})}),(0,s.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-3 md:gap-4 pb-8 md:pb-10 px-4 lg:flex-nowrap lg:justify-normal",children:P.map(e=>(0,s.jsxs)("div",{className:"flex h-[35px] cursor-pointer items-center justify-center gap-[5px] rounded border border-solid border-[#C1C1C1] bg-[#EDEDEA] px-2.5 py-2",onClick:()=>n(null==e?void 0:e.name),children:[(0,s.jsx)(m.default,{src:e.icon,alt:e.name,width:18,height:16,className:"w-[18px]"}),(0,s.jsx)("span",{className:"text-sm font-light leading-[normal] text-[#1B1B16]",children:e.name})]},e.id))})]})})},H=r(7648);r(2058);var z=r(3464),M=r(5725),J=()=>{let[e,t]=(0,a.useState)([]),r=l(),n=(0,a.useCallback)(async()=>{try{let e=await z.Z.get("".concat(r,"/files/"));t(e.data.files)}catch(e){console.error("Error fetching files:",e)}},[r]);(0,a.useEffect)(()=>{n()},[n]);let o=async e=>{let t=new FormData;e.forEach(e=>{t.append("file",e)});try{await z.Z.post("".concat(r,"/upload/"),t,{headers:{"Content-Type":"multipart/form-data"}}),n()}catch(e){console.error("Error uploading files:",e)}},i=async e=>{try{await z.Z.delete("".concat(r,"/files/").concat(e)),n()}catch(e){console.error("Error deleting file:",e)}},{getRootProps:c,getInputProps:d}=(0,M.uI)({onDrop:o});return(0,s.jsxs)("div",{className:"mb-4 w-full",children:[(0,s.jsxs)("div",{...c(),style:{border:"2px dashed #cccccc",padding:"20px",textAlign:"center"},children:[(0,s.jsx)("input",{...d()}),(0,s.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"})]}),e.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"text-gray-900 mt-2 text-xl",children:"Uploaded Files"}),(0,s.jsx)("ul",{role:"list",className:"my-2 divide-y divide-gray-100",children:e.map(e=>(0,s.jsxs)("li",{className:"flex justify-between gap-x-6 py-1",children:[(0,s.jsx)("span",{className:"flex-1",children:e}),(0,s.jsx)("button",{onClick:t=>{t.preventDefault(),i(e)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})})]},e))})]})]})};function U(e){let{tone:t,onToneChange:r}=e;return(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"tone",className:"agent_question",children:"Tone "}),(0,s.jsxs)("select",{name:"tone",id:"tone",value:t,onChange:r,className:"form-control",required:!0,children:[(0,s.jsx)("option",{value:"Objective",children:"Objective - Impartial and unbiased presentation of facts and findings"}),(0,s.jsx)("option",{value:"Formal",children:"Formal - Adheres to academic standards with sophisticated language and structure"}),(0,s.jsx)("option",{value:"Analytical",children:"Analytical - Critical evaluation and detailed examination of data and theories"}),(0,s.jsx)("option",{value:"Persuasive",children:"Persuasive - Convincing the audience of a particular viewpoint or argument"}),(0,s.jsx)("option",{value:"Informative",children:"Informative - Providing clear and comprehensive information on a topic"}),(0,s.jsx)("option",{value:"Explanatory",children:"Explanatory - Clarifying complex concepts and processes"}),(0,s.jsx)("option",{value:"Descriptive",children:"Descriptive - Detailed depiction of phenomena, experiments, or case studies"}),(0,s.jsx)("option",{value:"Critical",children:"Critical - Judging the validity and relevance of the research and its conclusions"}),(0,s.jsx)("option",{value:"Comparative",children:"Comparative - Juxtaposing different theories, data, or methods to highlight differences and similarities"}),(0,s.jsx)("option",{value:"Speculative",children:"Speculative - Exploring hypotheses and potential implications or future research directions"}),(0,s.jsx)("option",{value:"Reflective",children:"Reflective - Considering the research process and personal insights or experiences"}),(0,s.jsx)("option",{value:"Narrative",children:"Narrative - Telling a story to illustrate research findings or methodologies"}),(0,s.jsx)("option",{value:"Humorous",children:"Humorous - Light-hearted and engaging, usually to make the content more relatable"}),(0,s.jsx)("option",{value:"Optimistic",children:"Optimistic - Highlighting positive findings and potential benefits"}),(0,s.jsx)("option",{value:"Pessimistic",children:"Pessimistic - Focusing on limitations, challenges, or negative outcomes"})]})]})}var W=r(2953),V=r(257);let G=()=>({initGA:()=>{V.env.NEXT_PUBLIC_GA_MEASUREMENT_ID&&W.ZP.initialize(V.env.NEXT_PUBLIC_GA_MEASUREMENT_ID)},trackResearchQuery:e=>{W.ZP.event({category:"Research",action:"Submit Query",label:JSON.stringify({query:e.query,report_type:e.report_type,report_source:e.report_source})})}});var X=r(4119);function Z(e){let{chatBoxSettings:t,setChatBoxSettings:r,onFormSubmit:n}=e,{trackResearchQuery:l}=G(),[o,i]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),{report_type:u,report_source:h,tone:p}=t,[m,x]=(0,a.useState)(()=>{{let e=localStorage.getItem("domainFilters");return e?JSON.parse(e):[]}});(0,a.useEffect)(()=>{localStorage.setItem("domainFilters",JSON.stringify(m)),r(e=>({...e,domains:m}))},[m,r]);let g=e=>{e.preventDefault(),c.trim()&&(x([...m,{value:c.trim()}]),d(""))},f=e=>{x(m.filter(t=>t.value!==e))},b=e=>{let{name:t,value:s}=e.target;r(e=>({...e,[t]:s}))};return(0,s.jsxs)("form",{method:"POST",className:"report_settings mt-3",onSubmit:e=>{e.preventDefault(),n&&(r({...t,domains:m}),n(o,u,h,m))},children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{htmlFor:"report_type",className:"agent_question",children:["Report Type"," "]}),(0,s.jsxs)("select",{name:"report_type",value:u,onChange:b,className:"form-control",required:!0,children:[(0,s.jsx)("option",{value:"research_report",children:"Summary - Short and fast (~2 min)"}),(0,s.jsx)("option",{value:"deep",children:"Deep Research Report"}),(0,s.jsx)("option",{value:"multi_agents",children:"Multi Agents Report"}),(0,s.jsx)("option",{value:"detailed_report",children:"Detailed - In depth and longer (~5 min)"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{htmlFor:"report_source",className:"agent_question",children:["Report Source"," "]}),(0,s.jsxs)("select",{name:"report_source",value:h,onChange:b,className:"form-control",required:!0,children:[(0,s.jsx)("option",{value:"web",children:"The Internet"}),(0,s.jsx)("option",{value:"local",children:"My Documents"}),(0,s.jsx)("option",{value:"hybrid",children:"Hybrid"})]})]}),("web"===t.report_source||"hybrid"===t.report_source)&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,s.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"Filter by domain (e.g., techcrunch.com)",className:"flex-1 rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),g(e))}}),(0,s.jsx)("button",{type:"button",onClick:g,className:"inline-flex justify-center rounded-md border border-transparent bg-purple-600 px-4 py-2 text-sm font-medium text-white hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500",children:"Add Domain"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:m.map((e,t)=>(0,s.jsxs)("div",{className:"inline-flex items-center rounded-full bg-purple-100 px-3 py-1 text-sm mb-3",children:[(0,s.jsx)("span",{className:"text-purple-700",children:e.value}),(0,s.jsx)("button",{type:"button",onClick:()=>f(e.value),className:"ml-2 text-purple-400 hover:text-purple-600",children:(0,s.jsx)(X.T,{className:"h-4 w-4"})})]},t))})]}),"local"===h||"hybrid"===h?(0,s.jsx)(J,{}):null,(0,s.jsx)(U,{tone:p,onToneChange:e=>{let{value:t}=e.target;r(e=>({...e,tone:t}))}})]})}function K(e){let{report:t}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Research Report"}),(0,s.jsx)("div",{id:"reportContainer"})]})}function Q(e){let{agentLogs:t}=e;return(0,s.jsxs)("div",{className:"margin-div",children:[(0,s.jsx)("h2",{children:"Agent Output"}),(0,s.jsx)("div",{id:"output",children:t&&t.map((e,t)=>(0,s.jsx)("div",{children:e.output},t))})]})}function Y(e){let{chatBoxSettings:t,setChatBoxSettings:r}=e,[n,o]=(0,a.useState)([]),[i,c]=(0,a.useState)(""),[d,u]=(0,a.useState)({}),[h,p]=(0,a.useState)(null);return(0,a.useEffect)(()=>{{let e=l(),t=e.replace("http://","").replace("https://",""),r=new WebSocket("".concat(e.includes("https")?"wss:":"ws:","//").concat(t,"/ws"));return p(r),r.onmessage=e=>{let t=JSON.parse(e.data);if("logs"===t.type)o(e=>[...e,t]);else if("report"===t.type)c(e=>e+t.output);else if("path"===t.type){let e=t.output;u({...e.pdf&&{pdf:"outputs/".concat(e.pdf)},...e.docx&&{docx:"outputs/".concat(e.docx)},...e.json&&{json:"outputs/".concat(e.json)}})}},()=>{r.close()}}},[]),(0,s.jsx)("div",{children:(0,s.jsxs)("main",{className:"container",id:"form",children:[(0,s.jsx)(Z,{chatBoxSettings:t,setChatBoxSettings:r}),(null==n?void 0:n.length)>0?(0,s.jsx)(Q,{agentLogs:n}):"",(0,s.jsxs)("div",{className:"margin-div",children:[i?(0,s.jsx)(K,{report:i}):"",Object.keys(d).length>0&&(0,s.jsx)(A,{accessData:d,chatBoxSettings:t,report:i})]})]})})}var $=e=>{let{chatBoxSettings:t,setChatBoxSettings:r}=e,[n,l]=(0,a.useState)(!1),[o,i]=(0,a.useState)("report_settings"),[c,d]=(0,a.useState)({DOC_PATH:"./my-docs"});return(0,a.useEffect)(()=>{let e=localStorage.getItem("apiVariables");e&&d(JSON.parse(e))},[n]),(0,s.jsxs)("div",{className:"settings",children:[(0,s.jsx)("button",{className:"bg-purple-500 text-white active:bg-purple-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button",onClick:()=>l(!0),children:"Preferences"}),n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:(0,s.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:(0,s.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[(0,s.jsxs)("div",{className:"relative p-6 flex-auto",children:[(0,s.jsx)("div",{className:"tabs",children:(0,s.jsx)("button",{onClick:()=>i("report_settings"),className:"tab-button ".concat("report_settings"===o?"active":""),children:"Report Settings"})}),"report_settings"===o&&(0,s.jsx)("div",{className:"App",children:(0,s.jsx)("header",{className:"App-header",children:(0,s.jsx)(Y,{setChatBoxSettings:r,chatBoxSettings:t})})})]}),(0,s.jsx)("div",{className:"flex items-center justify-end p-3",children:(0,s.jsx)("button",{className:"bg-emerald-500 text-white active:bg-emerald-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button",onClick:()=>{r({...t}),localStorage.setItem("apiVariables",JSON.stringify(c)),l(!1)},children:"Save & Close"})})]})})}),(0,s.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]}):null]})},ee=e=>{let{chatBoxSettings:t,setChatBoxSettings:r}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"container flex min-h-[72px] mt-2 items-center justify-between border-t border-[#D2D2D2] px-4 pb-3 pt-5 lg:min-h-[72px] lg:px-0 lg:py-5",children:[(0,s.jsx)($,{setChatBoxSettings:r,chatBoxSettings:t}),(0,s.jsxs)("div",{className:"text-sm text-gray-100",children:["\xa9 ",new Date().getFullYear()," GPT Researcher. All rights reserved."]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(H.default,{href:"https://github.com/assafelovic/gpt-researcher",target:"_blank",children:[(0,s.jsx)(m.default,{src:"/img/github.svg",alt:"github",width:30,height:30})," "]}),(0,s.jsxs)(H.default,{href:"https://discord.gg/QgZXvJAccX",target:"_blank",children:[(0,s.jsx)(m.default,{src:"/img/discord.svg",alt:"discord",width:30,height:30})," "]}),(0,s.jsxs)(H.default,{href:"https://hub.docker.com/r/gptresearcher/gpt-researcher",target:"_blank",children:[(0,s.jsx)(m.default,{src:"/img/docker.svg",alt:"docker",width:30,height:30})," "]})]})]})})},et=e=>{let{questionForHuman:t,websocket:r,onFeedbackSubmit:n}=e,[l,o]=(0,a.useState)(null),[i,c]=(0,a.useState)("");return(0,s.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg shadow-md",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Human Feedback Required"}),(0,s.jsx)("p",{className:"mb-4",children:t}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(""===i?null:i),o(null),c("")},children:[(0,s.jsx)("textarea",{className:"w-full p-2 border rounded-md",value:i,onChange:e=>c(e.target.value),placeholder:"Enter your feedback here (or leave blank for 'no')"}),(0,s.jsx)("button",{type:"submit",className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Submit Feedback"})]})]})},er=()=>(0,s.jsx)("div",{className:"flex justify-center py-4",children:(0,s.jsxs)("div",{className:"animate-pulse flex space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-300 rounded-full"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-300 rounded-full"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-300 rounded-full"})]})});function es(){let[e,t]=(0,a.useState)(""),[r,n]=(0,a.useState)(!1),[l,i]=(0,a.useState)(""),[c,h]=(0,a.useState)(!1),[m,x]=(0,a.useState)({report_source:"web",report_type:"research_report",tone:"Objective",domains:[],defaultReportType:"research_report"}),[g,f]=(0,a.useState)(""),[b,v]=(0,a.useState)([]),[j,w]=(0,a.useState)(!1),[y,N]=(0,a.useState)(!1),[k,S]=(0,a.useState)([]),_=(0,a.useRef)(null),[C,E]=(0,a.useState)(!1),[B,T]=(0,a.useState)(!1),R=(0,a.useRef)(null),{socket:D,initializeWebSocket:A}=o(v,i,h,w,N),q=async e=>{if(D){n(!0),f(e),h(!0),t(""),i("");let r={type:"question",content:e};v(e=>[...e,r]),D.send("chat".concat(JSON.stringify({message:e})))}},P=async e=>{n(!0),h(!0),f(e),t(""),i(""),v(t=>[...t,{type:"question",content:e}]);let r=localStorage.getItem("apiVariables"),s=(r?JSON.parse(r):{}).LANGGRAPH_HOST_URL;if("multi_agents"===m.report_type&&s){let{streamResponse:t,host:r,thread_id:a}=await d(e,m.report_source,s),n="https://smith.langchain.com/studio/thread/".concat(a,"?baseUrl=").concat(r);v(e=>[...e,{type:"langgraphButton",link:n}]);let l=null;for await(let e of t){if(null!=e.data.report&&"Full report content here"!=e.data.report)v(t=>[...t,{...e.data,output:e.data.report,type:"report"}]),h(!1);else if(l){let t=u(l,e);v(e=>[...e,{type:"differences",content:"differences",output:JSON.stringify(t)}])}l=e}}else A(e,m)};(0,a.useEffect)(()=>{let e=p(b),t=["agent_generated","starting_research","planning_research"];S(e.reduce((e,r)=>"accordionBlock"===r.type?[...e,...r.items.map((e,t)=>({header:e.content,text:e.output,metadata:e.metadata,key:"".concat(e.type,"-").concat(e.content,"-").concat(t)}))]:t.includes(r.content)?[...e,{header:r.content,text:r.output,metadata:r.metadata,key:"".concat(r.type,"-").concat(r.content)}]:e,[]))},[b]);let H=(0,a.useCallback)(()=>{let e=window.scrollY+window.innerHeight>=document.documentElement.scrollHeight-100;T(document.documentElement.scrollHeight>window.innerHeight&&!e)},[]);return(0,a.useEffect)(()=>{let e=R.current,t=new ResizeObserver(()=>{H()});return e&&t.observe(e),window.addEventListener("scroll",H),window.addEventListener("resize",H),()=>{e&&t.unobserve(e),t.disconnect(),window.removeEventListener("scroll",H),window.removeEventListener("resize",H)}},[H]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(O,{loading:c,isStopped:C,showResult:r,onStop:()=>{D&&D.close(),h(!1),E(!0)},onNewResearch:()=>{n(!1),t(""),E(!1),f(""),i(""),v([]),S([]),w(!1),N(!1),D&&D.close(),h(!1)}}),(0,s.jsxs)("main",{ref:R,className:"min-h-[100vh] pt-[120px]",children:[!r&&(0,s.jsx)(F,{promptValue:e,setPromptValue:t,handleDisplayResult:P}),r&&(0,s.jsxs)("div",{className:"flex h-full w-full grow flex-col justify-between",children:[(0,s.jsxs)("div",{className:"container w-full space-y-2",children:[(0,s.jsx)("div",{className:"container space-y-2 task-components",children:(0,s.jsx)(I,{orderedData:b,answer:l,allLogs:k,chatBoxSettings:m,handleClickSuggestion:e=>{t(e);let r=document.getElementById("input-area");r&&r.scrollIntoView({behavior:"smooth"})}})}),j&&(0,s.jsx)(et,{questionForHuman:y,websocket:D,onFeedbackSubmit:e=>{D&&D.send(JSON.stringify({type:"human_feedback",content:e})),w(!1)}}),(0,s.jsx)("div",{className:"pt-1 sm:pt-2",ref:_})]}),(0,s.jsx)("div",{id:"input-area",className:"container px-4 lg:px-0",children:c?(0,s.jsx)(er,{}):(0,s.jsx)(L,{promptValue:e,setPromptValue:t,handleSubmit:q,handleSecondary:P,disabled:c,reset:()=>{n(!1),t(""),f(""),i("")},isStopped:C})})]})]}),B&&r&&(0,s.jsx)("button",{onClick:()=>{window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},className:"fixed bottom-8 right-8 flex items-center justify-center w-12 h-12 text-white bg-[rgb(168,85,247)] rounded-full hover:bg-[rgb(147,51,234)] transform hover:scale-105 transition-all duration-200 shadow-lg z-50",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),(0,s.jsx)(ee,{setChatBoxSettings:x,chatBoxSettings:m})]})}},2058:function(){},2333:function(){}},function(e){e.O(0,[99,995,971,117,744],function(){return e(e.s=3651)}),_N_E=e.O()}]);