(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89],{2067:e=>{"use strict";e.exports=require("node:async_hooks")},6195:e=>{"use strict";e.exports=require("node:buffer")},5588:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ComponentMod:()=>P,default:()=>S});var r={};a.r(r),a.d(r,{GET:()=>m,POST:()=>h,runtime:()=>k});var s={};a.r(s),a.d(s,{headerHooks:()=>y,originalPathname:()=>_,patchFetch:()=>w,requestAsyncStorage:()=>g,routeModule:()=>T,serverHooks:()=>x,staticGenerationAsyncStorage:()=>v,staticGenerationBailout:()=>E});var o=a(7875),n=a(8381),i=a(2251),u=a(9845),c=a(5045),d=a.n(c),l=a(572),p=a(9579);async function f(e,t){let a=(0,p.g)(),r=()=>`https://api.cloudflare.com/client/v4/accounts/${a.cloudflareAccountId}/storage/kv/namespaces/${a.cloudflareKVNamespaceId}`,s=()=>({Authorization:`Bearer ${a.cloudflareKVApiKey}`});if("POST"===e.method){let t=await e.text(),o=d().hash(t).trim(),n={key:o,value:t};try{let e=parseInt(a.cloudflareKVTTL);e>60&&(n.expiration_ttl=e)}catch(e){console.error(e)}let i=await fetch(`${r()}/bulk`,{headers:{...s(),"Content-Type":"application/json"},method:"PUT",body:JSON.stringify([n])}),u=await i.json();return(console.log("save data",u),u?.success)?l.xk.json({code:0,id:o,result:u},{status:i.status}):l.xk.json({error:!0,msg:"Save data error"},{status:400})}if("GET"===e.method){let t=e?.nextUrl?.searchParams?.get("id"),a=await fetch(`${r()}/values/${t}`,{headers:s(),method:"GET"});return new Response(a.body,{status:a.status,statusText:a.statusText,headers:a.headers})}return l.xk.json({error:!0,msg:"Invalid request"},{status:400})}let h=f,m=f,k="edge",T=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/artifacts/route",pathname:"/api/artifacts",filename:"route",bundlePath:"app/api/artifacts/route"},resolvedPagePath:"D:\\z-toolkit\\NextChat\\app\\api\\artifacts\\route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:g,staticGenerationAsyncStorage:v,serverHooks:x,headerHooks:y,staticGenerationBailout:E}=T,_="/api/artifacts/route";function w(){return(0,u.XH)({serverHooks:x,staticGenerationAsyncStorage:v})}let P=s,S=o.a.wrap(T)}},e=>{var t=t=>e(e.s=t);e.O(0,[297,45,579],()=>t(5588));var a=e.O();(_ENTRIES="undefined"==typeof _ENTRIES?{}:_ENTRIES)["middleware_app/api/artifacts/route"]=a}]);
//# sourceMappingURL=route.js.map