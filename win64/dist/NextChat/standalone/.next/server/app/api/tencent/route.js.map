{"version":3,"file":"app/api/tencent/route.js","mappings":"oFAAAA,CAAAA,EAAAC,OAAA,CAAAC,QAAA,0CCAAF,CAAAA,EAAAC,OAAA,CAAAC,QAAA,8dCYA,IAAMC,EAAaC,WACbC,EAAcC,YACdC,EAAMC,KAAKD,GAAG,CAMdE,EAAgB,IAAIJ,EAAY,GAChCK,EAA4B,EAAE,CAK9BC,EAAI,IAAIN,EAAY,IAM1B,SAASO,EAAkBC,CAAS,EAClC,MAAO,CAAEA,EAAKA,CAAAA,EAAAA,CAAI,GAAMN,EAAI,EAAG,IAAO,CACxC,CAEA,IAAIM,EAAI,EACJC,EAAS,EACb,KAAOA,EAAS,IAAI,CAGlB,IAAIC,EAAU,GASd,IAAK,IAAIC,EAAS,EAAGA,GAAUH,EAAI,EAAGG,IAChCH,EAAIG,GAAW,GACjBD,CAAAA,EAAU,IAGVA,IACED,EAAS,GACXL,CAAAA,CAAa,CAACK,EAAO,CAAGF,EAAkBL,EAAIM,EAAG,IAAI,EAEvDH,CAAe,CAACI,EAAO,CAAGF,EAAkBL,EAAIM,EAAG,EAAI,IAEvDC,KAGFD,GACF,CAMA,IAAMI,EAAe,CAAC,CAAC,IAAId,EAAW,IAAIE,EAAY,CAAC,EAAE,EAAEa,MAAM,CAAC,CAAC,EAAE,CAErE,SAASC,EAAcC,CAAY,SACjC,EAGKA,IAAS,GAER,CAAAA,IAAU,GAAM,MAAS,EAEzBA,CAAAA,MAAAA,CAAO,GAAW,EAEnBA,GAAQ,GAGJA,CAEX,CAEA,SAASC,EAAYD,CAAY,CAAEE,CAAY,EAC7C,OAAOF,IAAUE,EAASF,GAAS,GAAKE,CAC1C,CAEA,SAASC,EAAOC,CAAgB,MAuB1BC,EArBJ,IAAMC,EAAQjB,EAAckB,KAAK,GAI3BC,EAAQJ,EAAKK,MAAM,CAGnBC,EAAYF,EAAAA,EACZG,EAAe,IAAO,CAACD,EAAY,IAAM,IAAO,EAAIA,EAAY,GAGhEE,EAAQ,IAAI7B,EAAW4B,EAAe,GACtCE,EAAQ,IAAI5B,EAAY2B,EAAMd,MAAM,EAE1Cc,EAAME,GAAG,CAACV,EAAM,GAEhBQ,CAAK,CAACJ,EAAM,CAAG,IAEfK,CAAK,CAACA,EAAMJ,MAAM,CAAG,EAAE,CAAGV,EAAcW,GAMxC,IAAK,IAAIK,EAAQ,EAAGA,EAAQJ,EAAe,GAAII,GAAS,GAAI,CAC1D,IAAMC,EAAeV,EAAMC,KAAK,GAGhC,IAAKF,EAAQ,EAAGA,EAAQ,GAAIA,IAAS,KAC/BY,EAEJ,GAAIZ,EAAQ,GAEVY,EAASlB,EAAcc,CAAK,CAACE,EAAQV,EAAM,MACtC,CACL,IAAMa,EAAU3B,CAAC,CAACc,EAAQ,GAAG,CACvBc,EAAU5B,CAAC,CAACc,EAAQ,EAAE,CAC5BY,EACE1B,CAAC,CAACc,EAAQ,EAAE,CACZd,CAAC,CAACc,EAAQ,GAAG,CACZJ,CAAAA,EAAYiB,EAAS,GACpBjB,EAAYiB,EAAS,IACpBA,IAAY,GACdjB,CAAAA,EAAYkB,EAAS,IACpBlB,EAAYkB,EAAS,IACpBA,IAAY,GACnB,CAGA5B,CAAC,CAACc,EAAM,CAAGY,GAAU,EAGrB,IAAMG,EACJ,CAACnB,EAAYe,CAAY,CAAC,EAAE,CAAE,GAC5Bf,EAAYe,CAAY,CAAC,EAAE,CAAE,IAC7Bf,EAAYe,CAAY,CAAC,EAAE,CAAE,KAC9BA,CAAAA,CAAa,CAAC,EAAE,CAAGA,CAAY,CAAC,EAAE,CAChC,CAACA,CAAY,CAAC,EAAE,CAAGA,CAAY,CAAC,EAAE,EACrCA,CAAY,CAAC,EAAE,CACfC,EACA3B,CAAe,CAACe,EAAM,CAClBgB,EACJ,CAACpB,EAAYe,CAAY,CAAC,EAAE,CAAE,GAC5Bf,EAAYe,CAAY,CAAC,EAAE,CAAE,IAC7Bf,EAAYe,CAAY,CAAC,EAAE,CAAE,KAC9BA,CAAAA,CAAa,CAAC,EAAE,CAAGA,CAAY,CAAC,EAAE,CAChCA,CAAY,CAAC,EAAE,CAAIA,CAAAA,CAAY,CAAC,EAAE,CAAGA,CAAY,CAAC,EAAE,GACzD,IAAK,IAAIM,EAAI,EAAGA,EAAI,EAAGA,IACrBN,CAAY,CAACM,EAAE,CAAGN,CAAY,CAACM,EAAI,EAAE,CAEvCN,CAAY,CAAC,EAAE,CAAGI,EAAMC,EAAM,EAC9BL,CAAY,CAAC,EAAE,CAAGA,CAAa,CAAC,EAAE,CAAGI,EAAM,CAC7C,CAGA,IAAKf,EAAQ,EAAGA,EAAQ,EAAGA,IACzBC,CAAK,CAACD,EAAM,CAAGC,CAAM,CAACD,EAAM,CAAGW,CAAY,CAACX,EAAM,CAAI,CAE1D,CAIA,OAAO,IAAItB,EACT,IAAIE,EACFqB,EAAMiB,GAAG,CAAC,SAAUC,CAAG,EACrB,OAAOzB,EAAcyB,EACvB,IACA1B,MAAM,CAEZ,CAkCA,IAAM2B,EAAU,IAAIC,YAab,SAASC,EAAIC,CAAe,EACjC,OAAOA,EAAIC,MAAM,CAAC,CAACC,EAAKN,KACtB,IAAMO,EAAS,KAAOP,EAAIQ,QAAQ,CAAC,IACnC,OAAOF,EAAMC,EAAOE,SAAS,CAACF,EAAOtB,MAAM,CAAG,EAChD,EAAG,GACL,CAEO,SAASyB,EAAKC,CAAW,EAC9B,OAAOR,EAAIxB,EAAOsB,EAAQW,MAAM,CAACD,IACnC,CC9OA,SAAShC,EAAOkC,CAAY,CAAEC,CAAW,CAAEC,CAAiB,EAC1D,IAAMC,EDiOCC,SA1CKC,CAAe,CAAEtC,CAAuB,EAGpD,GAFIsC,EAAIjC,MAAM,CAAG,IAAIiC,CAAAA,EAAMvC,EAAOuC,EAAAA,EAE9BA,EAAIjC,MAAM,CAAG,GAAI,CACnB,IAAMkC,EAAM,IAAI3D,WAAW,IAC3B2D,EAAI7B,GAAG,CAAC4B,EAAK,GACbA,EAAMC,CACR,CAGA,IAAMC,EAAW,IAAI5D,WAAW,IAC1B6D,EAAW,IAAI7D,WAAW,IAChC,IAAK,IAAIsC,EAAI,EAAGA,EAAI,GAAIA,IACtBsB,CAAQ,CAACtB,EAAE,CAAG,GAAOoB,CAAG,CAACpB,EAAE,CAC3BuB,CAAQ,CAACvB,EAAE,CAAG,GAAOoB,CAAG,CAACpB,EAAE,CAI7B,IAAMwB,EAAM,IAAI9D,WAAWoB,EAAKK,MAAM,CAAG,IACzCqC,EAAIhC,GAAG,CAAC8B,EAAU,GAClBE,EAAIhC,GAAG,CAACV,EAAM,IAGd,IAAMoC,EAAS,IAAIxD,WAAW,IAK9B,OAJAwD,EAAO1B,GAAG,CAAC+B,EAAU,GACrBL,EAAO1B,GAAG,CAACX,EAAO2C,GAAM,IAGjB3C,EAAOqC,EAChB,EAUI,iBC9NkBF,ED8Nab,EAAQW,MAAM,CC9N3BE,GAAAA,EDgOlB,iBChO0BD,EDgOMZ,EAAQW,MAAM,CChOpBC,GAAAA,GAC5B,MAAOE,OAAAA,EAAoBZ,EAAIa,GAAQR,QAAQ,GAAKQ,CACtD,CAUO,eAAeO,EACpBC,CAAY,CACZC,CAAiB,CACjBC,CAAkB,EAIlB,IAAMC,EAAW,8BACXC,EAAU,UAEVC,EAAS,kBAETC,EAAYlE,KAAKmE,KAAK,CAACC,KAAKC,GAAG,GAAK,KAEpCC,EAAOC,SAtBEL,CAAiB,EAChC,IAAMI,EAAO,IAAIF,KAAKF,IAAAA,GAChBM,EAAOF,EAAKG,cAAc,GAC1BC,EAAQ,CAAC,IAAOJ,CAAAA,EAAKK,WAAW,GAAK,IAAIxD,KAAK,CAAC,IAC/CyD,EAAM,CAAC,IAAMN,EAAKO,UAAU,IAAI1D,KAAK,CAAC,IAC5C,MAAO,CAAC,EAAEqD,EAAK,CAAC,EAAEE,EAAM,CAAC,EAAEE,EAAI,CAAC,EAiBXV,GAIfY,EAAuBC,EAAQnB,GAE/BoB,EAAc,mBAGdC,EACJ,CAAC,aAAa,EAAED,EAAY;KAAE,CAAC,CAE/BjB,EAFA,iBAKAE,EAAOiB,WAAW,GAClB,KACIC,EAAgB,gCAEhBC,EAAmB,CAdC,OAEL,IACQ,GAe3BH,EACAE,EACAL,EACD,CAACO,IAAI,CAAC,MAGDC,EAAY,kBACZC,EAAyBR,EAAQK,GACjCI,EAAkBlB,EAAO,IAAMN,EAAbM,eAWlBmB,EAAQ1E,EAAOuD,EAAM,MAAQR,GAC7B4B,EAAW3E,EAAOiD,EAASyB,GAC3BE,EAAW5E,EAAO,cAAe2E,GACjCE,EAAY7E,EAZhBuE,EACA,KACApB,EACA,KACAsB,EACA,KACAD,EAMqCI,EAAU,OAiBjD,MAAO,CACLE,cAdAP,EAAAA,eAGAzB,EACA,IACA2B,EALAF,mBAQAH,EARAG,eAWAM,EAIA,eAAgBZ,EAChBc,KAAM/B,EACN,cAAeE,EACf,iBAAkBC,EAAUtB,QAAQ,GACpC,eAvEc,aAwEd,cA1Ea,EA2Ef,CACF,CC9FA,IAAMmD,EAAeC,CAAAA,EAAAA,EAAAA,CAAAA,IAErB,eAAeC,EACbC,CAAgB,CAChB,CAAEC,OAAAA,CAAM,CAAkC,EAI1C,GAFAC,QAAQC,GAAG,CAAC,0BAA2BF,GAEnCD,YAAAA,EAAII,MAAM,CACZ,OAAOC,EAAAA,EAAYA,CAACC,IAAI,CAAC,CAAEC,KAAM,IAAK,EAAG,CAAEC,OAAQ,GAAI,GAGzD,IAAMC,EAAaC,CAAAA,EAAAA,EAAAA,CAAAA,EAAKV,EAAKW,EAAAA,EAAaA,CAACC,OAAO,EAClD,GAAIH,EAAWI,KAAK,CAClB,OAAOR,EAAAA,EAAYA,CAACC,IAAI,CAACG,EAAY,CACnCD,OAAQ,GACV,GAGF,GAAI,CAEF,OADiB,MAAMM,EAAQd,EAEjC,CAAE,MAAOe,EAAG,CAEV,OADAb,QAAQW,KAAK,CAAC,aAAcE,GACrBV,EAAAA,EAAYA,CAACC,IAAI,CAACU,CAAAA,EAAAA,EAAAA,CAAAA,EAAaD,GACxC,CACF,CAEO,IAAME,EAAMlB,EACNmB,EAAOnB,EAEPoB,EAAU,OACVC,EAAkB,CAC7B,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACD,CAED,eAAeN,EAAQd,CAAgB,EACrC,IAAMqB,EAAa,IAAIC,gBAEnBC,EAAU1B,EAAa2B,UAAU,EAAIC,EAAAA,EAAgBA,CAEpDF,EAAQG,UAAU,CAAC,SACtBH,CAAAA,EAAU,CAAC,QAAQ,EAAEA,EAAQ,CAAC,EAG5BA,EAAQI,QAAQ,CAAC,MACnBJ,CAAAA,EAAUA,EAAQtG,KAAK,CAAC,EAAG,GAAC,EAG9BiF,QAAQC,GAAG,CAAC,aAAcoB,GAE1B,IAAMK,EAAYC,WAChB,KACER,EAAWS,KAAK,EAClB,EACA,KAGIC,EAAWR,EAEXhB,EAAO,MAAMP,EAAIgC,IAAI,GAMrBC,EAA4B,CAChCC,QANc,MAAMzE,EACpB8C,EACAV,EAAasC,eAAe,CAC5BtC,EAAauC,gBAAgB,EAI7BhC,OAAQJ,EAAII,MAAM,CAClBG,KAAAA,EACA8B,SAAU,SAEVC,OAAQ,OACRC,OAAQlB,EAAWkB,MAAM,EAG3B,GAAI,CACF,IAAMC,EAAM,MAAMC,MAAMV,EAAUE,GAG5BS,EAAa,IAAIC,QAAQH,EAAIN,OAAO,EAK1C,OAJAQ,EAAWE,MAAM,CAAC,oBAElBF,EAAWlH,GAAG,CAAC,oBAAqB,MAE7B,IAAIqH,SAASL,EAAIjC,IAAI,CAAE,CAC5BC,OAAQgC,EAAIhC,MAAM,CAClBsC,WAAYN,EAAIM,UAAU,CAC1BZ,QAASQ,CACX,EACF,QAAU,CACRK,aAAanB,EACf,CACF,CC7GA,IAAAoB,EAAA,IAAwBC,EAAAC,mBAAmB,EAC3CC,WAAA,CACAC,KAAcC,EAAAC,CAAS,CAAAC,SAAA,CACvBC,KAAA,qBACAC,SAAA,eACAC,SAAA,QACAC,WAAA,uBACA,EACAC,iBAAA,uDACAC,iBAVA,aAWAC,SAAYC,CACZ,GAIA,CAAQC,oBAAAA,CAAA,CAAAC,6BAAAA,CAAA,CAAAC,YAAAA,CAAA,CAAAC,YAAAA,CAAA,CAAAC,wBAAAA,CAAA,EAAuGpB,EAC/GqB,EAAA,qBACA,SAAAC,IACA,MAAW,GAAAC,EAAAC,EAAA,EAAW,CACtBN,YAAAA,EACAD,6BAAAA,CACA,EACA,CC1BO,IAAAQ,EAAqBC,EAC5BC,EAAeC,EAAAC,CAAsB,CAAAC,IAAA,CAAM9B,4FCsBpC,SAAStC,EAAKV,CAAgB,CAAE+E,CAA4B,EAIjE,GAAM,CAAEC,WAAAA,CAAU,CAAEC,OAAAA,CAAM,CAAE,CAAGC,SAdZC,CAAiB,EACpC,IAAMC,EAAQD,EAAUE,IAAI,GAAGC,UAAU,CAAC,UAAW,IAAID,IAAI,GACvDE,EAAW,CAACH,EAAM1D,UAAU,CAAC8D,EAAAA,EAAkBA,EAErD,MAAO,CACLR,WAAYO,EAAW,GAAKH,EAAMnK,KAAK,CAACuK,EAAAA,EAAkBA,CAACrK,MAAM,EACjE8J,OAAQM,EAAWH,EAAQ,EAC7B,CACF,EAGoBpF,EAAIkC,OAAO,CAACuD,GAAG,CAAC,kBAAoB,IAKhDC,EAAaC,IAAAA,IAAQ,CAACX,GAAc,IAAIK,IAAI,GAE5CxF,EAAeC,CAAAA,EAAAA,EAAAA,CAAAA,IAOrB,GANAI,QAAQC,GAAG,CAAC,gCAAiC,IAAIN,EAAa+F,KAAK,CAAC,EACpE1F,QAAQC,GAAG,CAAC,0BAA2B6E,GACvC9E,QAAQC,GAAG,CAAC,6BAA8BuF,GAC1CxF,QAAQC,GAAG,CAAC,aAAc0F,SAjCb7F,CAAgB,EAC7B,IAAI8F,EAAK9F,EAAI8F,EAAE,EAAI9F,EAAIkC,OAAO,CAACuD,GAAG,CAAC,aAC7BM,EAAe/F,EAAIkC,OAAO,CAACuD,GAAG,CAAC,mBAMrC,MAJI,CAACK,GAAMC,GACTD,CAAAA,EAAKC,EAAaC,KAAK,CAAC,KAAKC,EAAE,CAAC,IAAM,IAGjCH,CACT,EAwBkC9F,IAChCE,QAAQC,GAAG,CAAC,UAAW,IAAIjC,OAAOgI,cAAc,IAE5CrG,EAAasG,QAAQ,EAAI,CAACtG,EAAa+F,KAAK,CAACQ,GAAG,CAACV,IAAe,CAACT,EACnE,MAAO,CACLpE,MAAO,GACPrD,IAAK,EAAoC,oBAAtB,mBACrB,EAGF,GAAIqC,EAAawG,cAAc,EAAMpB,EACnC,MAAO,CACLpE,MAAO,GACPrD,IAAK,qDACP,EAIF,GAAKyH,EAkEH/E,QAAQC,GAAG,CAAC,+BAlED,KAUPmG,EATJ,IAAMzG,EAAeC,CAAAA,EAAAA,EAAAA,CAAAA,IAWrB,OAAQiF,GACN,KAAKpE,EAAAA,EAAaA,CAAC4F,SAAS,CAC1BD,EAAezG,EAAa2G,eAAe,CAC3C,KACF,MAAK7F,EAAAA,EAAaA,CAAC8F,SAAS,CAC1BH,EAAezG,EAAa6G,YAAY,CACxC,KACF,MAAK/F,EAAAA,EAAaA,CAACgG,MAAM,CACvBL,EAAezG,EAAa+G,eAAe,CAC3C,KACF,MAAKjG,EAAAA,EAAaA,CAACkG,MAAM,CACvBP,EAAezG,EAAaiH,eAAe,CAC3C,KACF,MAAKnG,EAAAA,EAAaA,CAACoG,KAAK,CACtBT,EAAezG,EAAamH,WAAW,CACvC,KACF,MAAKrG,EAAAA,EAAaA,CAACsG,IAAI,CACrBX,EAAezG,EAAaqH,aAAa,CACzC,KACF,MAAKvG,EAAAA,EAAaA,CAACwG,QAAQ,CACzBb,EAAezG,EAAauH,cAAc,CAC1C,KACF,MAAKzG,EAAAA,EAAaA,CAAC0G,OAAO,CACxBf,EACEzG,EAAayH,aAAa,CAAG,IAAMzH,EAAa0H,gBAAgB,CAClE,KACF,MAAK5G,EAAAA,EAAaA,CAAC6G,QAAQ,CACzBlB,EAAezG,EAAa4H,cAAc,CAC1C,KACF,MAAK9G,EAAAA,EAAaA,CAAC+G,GAAG,CACpBpB,EAAezG,EAAa8H,SAAS,CACrC,KACF,MAAKhH,EAAAA,EAAaA,CAACiH,OAAO,CACxBtB,EAAezG,EAAagI,aAAa,CACzC,KACF,MAAKlH,EAAAA,EAAaA,CAACmH,WAAW,CAC5BxB,EAAezG,EAAakI,iBAAiB,CAC7C,KACF,MAAKpH,EAAAA,EAAaA,CAACqH,GAAG,CACtB,QAEI1B,EADEtG,EAAIiI,OAAO,CAACxE,QAAQ,CAACyE,QAAQ,CAAC,qBACjBrI,EAAasI,WAAW,CAExBtI,EAAaoF,MAAM,CAIpCqB,GACFpG,QAAQC,GAAG,CAAC,6BACZH,EAAIkC,OAAO,CAAC1G,GAAG,CAAC,gBAAiB,CAAC,OAAO,EAAE8K,EAAa,CAAC,GAEzDpG,QAAQC,GAAG,CAAC,0CAEhB,CAIA,MAAO,CACLU,MAAO,EACT,CACF,+BChIO,SAASG,EAAaxD,CAAQ,EACnC,IAAM4K,EAAM5K,QAIZ,CAHmB,UAAf,OAAOA,GACTA,CAAAA,EAAM6K,KAAKC,SAAS,CAAC9K,EAAK,KAAM,OAE9BA,OAAAA,GACK4K,EAAI1L,QAAQ,GAEjBc,EAAIkE,UAAU,CAAC,WACVlE,EAEF,CAAC,UAAWA,EAAK,MAAM,CAAC2B,IAAI,CAAC,KACtC","sources":["webpack://_N_E/external commonjs \"node:async_hooks\"","webpack://_N_E/external commonjs \"node:buffer\"","webpack://_N_E/./app/utils/hmac.ts","webpack://_N_E/./app/utils/tencent.ts","webpack://_N_E/./app/api/tencent/route.ts","webpack://_N_E/./app/api/tencent/route.ts?6ddf","webpack://_N_E/?176a","webpack://_N_E/./app/api/auth.ts","webpack://_N_E/./app/utils/format.ts","webpack://_N_E/<anon>"],"sourcesContent":["module.exports = require(\"node:async_hooks\");","module.exports = require(\"node:buffer\");","// From https://gist.github.com/guillermodlpa/f6d955f838e9b10d1ef95b8e259b2c58\r\n// From https://gist.github.com/stevendesu/2d52f7b5e1f1184af3b667c0b5e054b8\r\n\r\n// To ensure cross-browser support even without a proper SubtleCrypto\r\n// impelmentation (or without access to the impelmentation, as is the case with\r\n// Chrome loaded over HTTP instead of HTTPS), this library can create SHA-256\r\n// HMAC signatures using nothing but raw JavaScript\r\n\r\n/* eslint-disable no-magic-numbers, id-length, no-param-reassign, new-cap */\r\n\r\n// By giving internal functions names that we can mangle, future calls to\r\n// them are reduced to a single byte (minor space savings in minified file)\r\nconst uint8Array = Uint8Array;\r\nconst uint32Array = Uint32Array;\r\nconst pow = Math.pow;\r\n\r\n// Will be initialized below\r\n// Using a Uint32Array instead of a simple array makes the minified code\r\n// a bit bigger (we lose our `unshift()` hack), but comes with huge\r\n// performance gains\r\nconst DEFAULT_STATE = new uint32Array(8);\r\nconst ROUND_CONSTANTS: number[] = [];\r\n\r\n// Reusable object for expanded message\r\n// Using a Uint32Array instead of a simple array makes the minified code\r\n// 7 bytes larger, but comes with huge performance gains\r\nconst M = new uint32Array(64);\r\n\r\n// After minification the code to compute the default state and round\r\n// constants is smaller than the output. More importantly, this serves as a\r\n// good educational aide for anyone wondering where the magic numbers come\r\n// from. No magic numbers FTW!\r\nfunction getFractionalBits(n: number) {\r\n  return ((n - (n | 0)) * pow(2, 32)) | 0;\r\n}\r\n\r\nlet n = 2;\r\nlet nPrime = 0;\r\nwhile (nPrime < 64) {\r\n  // isPrime() was in-lined from its original function form to save\r\n  // a few bytes\r\n  let isPrime = true;\r\n  // Math.sqrt() was replaced with pow(n, 1/2) to save a few bytes\r\n  // var sqrtN = pow(n, 1 / 2);\r\n  // So technically to determine if a number is prime you only need to\r\n  // check numbers up to the square root. However this function only runs\r\n  // once and we're only computing the first 64 primes (up to 311), so on\r\n  // any modern CPU this whole function runs in a couple milliseconds.\r\n  // By going to n / 2 instead of sqrt(n) we net 8 byte savings and no\r\n  // scaling performance cost\r\n  for (let factor = 2; factor <= n / 2; factor++) {\r\n    if (n % factor === 0) {\r\n      isPrime = false;\r\n    }\r\n  }\r\n  if (isPrime) {\r\n    if (nPrime < 8) {\r\n      DEFAULT_STATE[nPrime] = getFractionalBits(pow(n, 1 / 2));\r\n    }\r\n    ROUND_CONSTANTS[nPrime] = getFractionalBits(pow(n, 1 / 3));\r\n\r\n    nPrime++;\r\n  }\r\n\r\n  n++;\r\n}\r\n\r\n// For cross-platform support we need to ensure that all 32-bit words are\r\n// in the same endianness. A UTF-8 TextEncoder will return BigEndian data,\r\n// so upon reading or writing to our ArrayBuffer we'll only swap the bytes\r\n// if our system is LittleEndian (which is about 99% of CPUs)\r\nconst LittleEndian = !!new uint8Array(new uint32Array([1]).buffer)[0];\r\n\r\nfunction convertEndian(word: number) {\r\n  if (LittleEndian) {\r\n    return (\r\n      // byte 1 -> byte 4\r\n      (word >>> 24) |\r\n      // byte 2 -> byte 3\r\n      (((word >>> 16) & 0xff) << 8) |\r\n      // byte 3 -> byte 2\r\n      ((word & 0xff00) << 8) |\r\n      // byte 4 -> byte 1\r\n      (word << 24)\r\n    );\r\n  } else {\r\n    return word;\r\n  }\r\n}\r\n\r\nfunction rightRotate(word: number, bits: number) {\r\n  return (word >>> bits) | (word << (32 - bits));\r\n}\r\n\r\nfunction sha256(data: Uint8Array) {\r\n  // Copy default state\r\n  const STATE = DEFAULT_STATE.slice();\r\n\r\n  // Caching this reduces occurrences of \".length\" in minified JavaScript\r\n  // 3 more byte savings! :D\r\n  const legth = data.length;\r\n\r\n  // Pad data\r\n  const bitLength = legth * 8;\r\n  const newBitLength = 512 - ((bitLength + 64) % 512) - 1 + bitLength + 65;\r\n\r\n  // \"bytes\" and \"words\" are stored BigEndian\r\n  const bytes = new uint8Array(newBitLength / 8);\r\n  const words = new uint32Array(bytes.buffer);\r\n\r\n  bytes.set(data, 0);\r\n  // Append a 1\r\n  bytes[legth] = 0b10000000;\r\n  // Store length in BigEndian\r\n  words[words.length - 1] = convertEndian(bitLength);\r\n\r\n  // Loop iterator (avoid two instances of \"var\") -- saves 2 bytes\r\n  let round;\r\n\r\n  // Process blocks (512 bits / 64 bytes / 16 words at a time)\r\n  for (let block = 0; block < newBitLength / 32; block += 16) {\r\n    const workingState = STATE.slice();\r\n\r\n    // Rounds\r\n    for (round = 0; round < 64; round++) {\r\n      let MRound;\r\n      // Expand message\r\n      if (round < 16) {\r\n        // Convert to platform Endianness for later math\r\n        MRound = convertEndian(words[block + round]);\r\n      } else {\r\n        const gamma0x = M[round - 15];\r\n        const gamma1x = M[round - 2];\r\n        MRound =\r\n          M[round - 7] +\r\n          M[round - 16] +\r\n          (rightRotate(gamma0x, 7) ^\r\n            rightRotate(gamma0x, 18) ^\r\n            (gamma0x >>> 3)) +\r\n          (rightRotate(gamma1x, 17) ^\r\n            rightRotate(gamma1x, 19) ^\r\n            (gamma1x >>> 10));\r\n      }\r\n\r\n      // M array matches platform endianness\r\n      M[round] = MRound |= 0;\r\n\r\n      // Computation\r\n      const t1 =\r\n        (rightRotate(workingState[4], 6) ^\r\n          rightRotate(workingState[4], 11) ^\r\n          rightRotate(workingState[4], 25)) +\r\n        ((workingState[4] & workingState[5]) ^\r\n          (~workingState[4] & workingState[6])) +\r\n        workingState[7] +\r\n        MRound +\r\n        ROUND_CONSTANTS[round];\r\n      const t2 =\r\n        (rightRotate(workingState[0], 2) ^\r\n          rightRotate(workingState[0], 13) ^\r\n          rightRotate(workingState[0], 22)) +\r\n        ((workingState[0] & workingState[1]) ^\r\n          (workingState[2] & (workingState[0] ^ workingState[1])));\r\n      for (let i = 7; i > 0; i--) {\r\n        workingState[i] = workingState[i - 1];\r\n      }\r\n      workingState[0] = (t1 + t2) | 0;\r\n      workingState[4] = (workingState[4] + t1) | 0;\r\n    }\r\n\r\n    // Update state\r\n    for (round = 0; round < 8; round++) {\r\n      STATE[round] = (STATE[round] + workingState[round]) | 0;\r\n    }\r\n  }\r\n\r\n  // Finally the state needs to be converted to BigEndian for output\r\n  // And we want to return a Uint8Array, not a Uint32Array\r\n  return new uint8Array(\r\n    new uint32Array(\r\n      STATE.map(function (val) {\r\n        return convertEndian(val);\r\n      }),\r\n    ).buffer,\r\n  );\r\n}\r\n\r\nfunction hmac(key: Uint8Array, data: ArrayLike<number>) {\r\n  if (key.length > 64) key = sha256(key);\r\n\r\n  if (key.length < 64) {\r\n    const tmp = new Uint8Array(64);\r\n    tmp.set(key, 0);\r\n    key = tmp;\r\n  }\r\n\r\n  // Generate inner and outer keys\r\n  const innerKey = new Uint8Array(64);\r\n  const outerKey = new Uint8Array(64);\r\n  for (let i = 0; i < 64; i++) {\r\n    innerKey[i] = 0x36 ^ key[i];\r\n    outerKey[i] = 0x5c ^ key[i];\r\n  }\r\n\r\n  // Append the innerKey\r\n  const msg = new Uint8Array(data.length + 64);\r\n  msg.set(innerKey, 0);\r\n  msg.set(data, 64);\r\n\r\n  // Has the previous message and append the outerKey\r\n  const result = new Uint8Array(64 + 32);\r\n  result.set(outerKey, 0);\r\n  result.set(sha256(msg), 64);\r\n\r\n  // Hash the previous message\r\n  return sha256(result);\r\n}\r\n\r\n// Convert a string to a Uint8Array, SHA-256 it, and convert back to string\r\nconst encoder = new TextEncoder();\r\n\r\nexport function sign(\r\n  inputKey: string | Uint8Array,\r\n  inputData: string | Uint8Array,\r\n) {\r\n  const key =\r\n    typeof inputKey === \"string\" ? encoder.encode(inputKey) : inputKey;\r\n  const data =\r\n    typeof inputData === \"string\" ? encoder.encode(inputData) : inputData;\r\n  return hmac(key, data);\r\n}\r\n\r\nexport function hex(bin: Uint8Array) {\r\n  return bin.reduce((acc, val) => {\r\n    const hexVal = \"00\" + val.toString(16);\r\n    return acc + hexVal.substring(hexVal.length - 2);\r\n  }, \"\");\r\n}\r\n\r\nexport function hash(str: string) {\r\n  return hex(sha256(encoder.encode(str)));\r\n}\r\n\r\nexport function hashWithSecret(str: string, secret: string) {\r\n  return hex(sign(secret, str)).toString();\r\n}\r\n","import { sign, hash as getHash, hex } from \"./hmac\";\r\n\r\n// 使用 SHA-256 和 secret 进行 HMAC 加密\r\nfunction sha256(message: any, secret: any, encoding?: string) {\r\n  const result = sign(secret, message);\r\n  return encoding == \"hex\" ? hex(result).toString() : result;\r\n}\r\n\r\nfunction getDate(timestamp: number) {\r\n  const date = new Date(timestamp * 1000);\r\n  const year = date.getUTCFullYear();\r\n  const month = (\"0\" + (date.getUTCMonth() + 1)).slice(-2);\r\n  const day = (\"0\" + date.getUTCDate()).slice(-2);\r\n  return `${year}-${month}-${day}`;\r\n}\r\n\r\nexport async function getHeader(\r\n  payload: any,\r\n  SECRET_ID: string,\r\n  SECRET_KEY: string,\r\n) {\r\n  // https://cloud.tencent.com/document/api/1729/105701\r\n\r\n  const endpoint = \"hunyuan.tencentcloudapi.com\";\r\n  const service = \"hunyuan\";\r\n  const region = \"\"; // optional\r\n  const action = \"ChatCompletions\";\r\n  const version = \"2023-09-01\";\r\n  const timestamp = Math.floor(Date.now() / 1000);\r\n  //时间处理, 获取世界时间日期\r\n  const date = getDate(timestamp);\r\n\r\n  // ************* 步骤 1：拼接规范请求串 *************\r\n\r\n  const hashedRequestPayload = getHash(payload);\r\n  const httpRequestMethod = \"POST\";\r\n  const contentType = \"application/json\";\r\n  const canonicalUri = \"/\";\r\n  const canonicalQueryString = \"\";\r\n  const canonicalHeaders =\r\n    `content-type:${contentType}\\n` +\r\n    \"host:\" +\r\n    endpoint +\r\n    \"\\n\" +\r\n    \"x-tc-action:\" +\r\n    action.toLowerCase() +\r\n    \"\\n\";\r\n  const signedHeaders = \"content-type;host;x-tc-action\";\r\n\r\n  const canonicalRequest = [\r\n    httpRequestMethod,\r\n    canonicalUri,\r\n    canonicalQueryString,\r\n    canonicalHeaders,\r\n    signedHeaders,\r\n    hashedRequestPayload,\r\n  ].join(\"\\n\");\r\n\r\n  // ************* 步骤 2：拼接待签名字符串 *************\r\n  const algorithm = \"TC3-HMAC-SHA256\";\r\n  const hashedCanonicalRequest = getHash(canonicalRequest);\r\n  const credentialScope = date + \"/\" + service + \"/\" + \"tc3_request\";\r\n  const stringToSign =\r\n    algorithm +\r\n    \"\\n\" +\r\n    timestamp +\r\n    \"\\n\" +\r\n    credentialScope +\r\n    \"\\n\" +\r\n    hashedCanonicalRequest;\r\n\r\n  // ************* 步骤 3：计算签名 *************\r\n  const kDate = sha256(date, \"TC3\" + SECRET_KEY);\r\n  const kService = sha256(service, kDate);\r\n  const kSigning = sha256(\"tc3_request\", kService);\r\n  const signature = sha256(stringToSign, kSigning, \"hex\");\r\n\r\n  // ************* 步骤 4：拼接 Authorization *************\r\n  const authorization =\r\n    algorithm +\r\n    \" \" +\r\n    \"Credential=\" +\r\n    SECRET_ID +\r\n    \"/\" +\r\n    credentialScope +\r\n    \", \" +\r\n    \"SignedHeaders=\" +\r\n    signedHeaders +\r\n    \", \" +\r\n    \"Signature=\" +\r\n    signature;\r\n\r\n  return {\r\n    Authorization: authorization,\r\n    \"Content-Type\": contentType,\r\n    Host: endpoint,\r\n    \"X-TC-Action\": action,\r\n    \"X-TC-Timestamp\": timestamp.toString(),\r\n    \"X-TC-Version\": version,\r\n    \"X-TC-Region\": region,\r\n  };\r\n}\r\n","import { getServerSideConfig } from \"@/app/config/server\";\r\nimport { TENCENT_BASE_URL, ModelProvider } from \"@/app/constant\";\r\nimport { prettyObject } from \"@/app/utils/format\";\r\nimport { NextRequest, NextResponse } from \"next/server\";\r\nimport { auth } from \"@/app/api/auth\";\r\nimport { getHeader } from \"@/app/utils/tencent\";\r\n\r\nconst serverConfig = getServerSideConfig();\r\n\r\nasync function handle(\r\n  req: NextRequest,\r\n  { params }: { params: { path: string[] } },\r\n) {\r\n  console.log(\"[Tencent Route] params \", params);\r\n\r\n  if (req.method === \"OPTIONS\") {\r\n    return NextResponse.json({ body: \"OK\" }, { status: 200 });\r\n  }\r\n\r\n  const authResult = auth(req, ModelProvider.Hunyuan);\r\n  if (authResult.error) {\r\n    return NextResponse.json(authResult, {\r\n      status: 401,\r\n    });\r\n  }\r\n\r\n  try {\r\n    const response = await request(req);\r\n    return response;\r\n  } catch (e) {\r\n    console.error(\"[Tencent] \", e);\r\n    return NextResponse.json(prettyObject(e));\r\n  }\r\n}\r\n\r\nexport const GET = handle;\r\nexport const POST = handle;\r\n\r\nexport const runtime = \"edge\";\r\nexport const preferredRegion = [\r\n  \"arn1\",\r\n  \"bom1\",\r\n  \"cdg1\",\r\n  \"cle1\",\r\n  \"cpt1\",\r\n  \"dub1\",\r\n  \"fra1\",\r\n  \"gru1\",\r\n  \"hnd1\",\r\n  \"iad1\",\r\n  \"icn1\",\r\n  \"kix1\",\r\n  \"lhr1\",\r\n  \"pdx1\",\r\n  \"sfo1\",\r\n  \"sin1\",\r\n  \"syd1\",\r\n];\r\n\r\nasync function request(req: NextRequest) {\r\n  const controller = new AbortController();\r\n\r\n  let baseUrl = serverConfig.tencentUrl || TENCENT_BASE_URL;\r\n\r\n  if (!baseUrl.startsWith(\"http\")) {\r\n    baseUrl = `https://${baseUrl}`;\r\n  }\r\n\r\n  if (baseUrl.endsWith(\"/\")) {\r\n    baseUrl = baseUrl.slice(0, -1);\r\n  }\r\n\r\n  console.log(\"[Base Url]\", baseUrl);\r\n\r\n  const timeoutId = setTimeout(\r\n    () => {\r\n      controller.abort();\r\n    },\r\n    10 * 60 * 1000,\r\n  );\r\n\r\n  const fetchUrl = baseUrl;\r\n\r\n  const body = await req.text();\r\n  const headers = await getHeader(\r\n    body,\r\n    serverConfig.tencentSecretId as string,\r\n    serverConfig.tencentSecretKey as string,\r\n  );\r\n  const fetchOptions: RequestInit = {\r\n    headers,\r\n    method: req.method,\r\n    body,\r\n    redirect: \"manual\",\r\n    // @ts-ignore\r\n    duplex: \"half\",\r\n    signal: controller.signal,\r\n  };\r\n\r\n  try {\r\n    const res = await fetch(fetchUrl, fetchOptions);\r\n\r\n    // to prevent browser prompt for credentials\r\n    const newHeaders = new Headers(res.headers);\r\n    newHeaders.delete(\"www-authenticate\");\r\n    // to disable nginx buffering\r\n    newHeaders.set(\"X-Accel-Buffering\", \"no\");\r\n\r\n    return new Response(res.body, {\r\n      status: res.status,\r\n      statusText: res.statusText,\r\n      headers: newHeaders,\r\n    });\r\n  } finally {\r\n    clearTimeout(timeoutId);\r\n  }\r\n}\r\n","import { AppRouteRouteModule } from \"next/dist/server/future/route-modules/app-route/module.compiled\";\nimport { RouteKind } from \"next/dist/server/future/route-kind\";\nimport { patchFetch as _patchFetch } from \"next/dist/server/lib/patch-fetch\";\nimport * as userland from \"D:\\\\z-toolkit\\\\NextChat\\\\app\\\\api\\\\tencent\\\\route.ts\";\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new AppRouteRouteModule({\n    definition: {\n        kind: RouteKind.APP_ROUTE,\n        page: \"/api/tencent/route\",\n        pathname: \"/api/tencent\",\n        filename: \"route\",\n        bundlePath: \"app/api/tencent/route\"\n    },\n    resolvedPagePath: \"D:\\\\z-toolkit\\\\NextChat\\\\app\\\\api\\\\tencent\\\\route.ts\",\n    nextConfigOutput,\n    userland\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/tencent/route\";\nfunction patchFetch() {\n    return _patchFetch({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\nexport { routeModule, requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout, originalPathname, patchFetch,  };\n\n//# sourceMappingURL=app-route.js.map","import { EdgeRouteModuleWrapper } from \"next/dist/server/web/edge-route-module-wrapper\";\n// Import the userland code.\nimport * as module from \"next-app-loader?name=app%2Fapi%2Ftencent%2Froute&page=%2Fapi%2Ftencent%2Froute&pagePath=private-next-app-dir%2Fapi%2Ftencent%2Froute.ts&appDir=D%3A%5Cz-toolkit%5CNextChat%5Capp&appPaths=%2Fapi%2Ftencent%2Froute&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=arn1&preferredRegion=bom1&preferredRegion=cdg1&preferredRegion=cle1&preferredRegion=cpt1&preferredRegion=dub1&preferredRegion=fra1&preferredRegion=gru1&preferredRegion=hnd1&preferredRegion=iad1&preferredRegion=icn1&preferredRegion=kix1&preferredRegion=lhr1&preferredRegion=pdx1&preferredRegion=sfo1&preferredRegion=sin1&preferredRegion=syd1&middlewareConfig=e30%3D!private-next-app-dir/api/tencent/route.ts?__next_edge_ssr_entry__\";\nexport const ComponentMod = module;\nexport default EdgeRouteModuleWrapper.wrap(module.routeModule);\n\n//# sourceMappingURL=edge-app-route.js.map","import { NextRequest } from \"next/server\";\r\nimport { getServerSideConfig } from \"../config/server\";\r\nimport md5 from \"spark-md5\";\r\nimport { ACCESS_CODE_PREFIX, ModelProvider } from \"../constant\";\r\n\r\nfunction getIP(req: NextRequest) {\r\n  let ip = req.ip ?? req.headers.get(\"x-real-ip\");\r\n  const forwardedFor = req.headers.get(\"x-forwarded-for\");\r\n\r\n  if (!ip && forwardedFor) {\r\n    ip = forwardedFor.split(\",\").at(0) ?? \"\";\r\n  }\r\n\r\n  return ip;\r\n}\r\n\r\nfunction parseApiKey(bearToken: string) {\r\n  const token = bearToken.trim().replaceAll(\"Bearer \", \"\").trim();\r\n  const isApiKey = !token.startsWith(ACCESS_CODE_PREFIX);\r\n\r\n  return {\r\n    accessCode: isApiKey ? \"\" : token.slice(ACCESS_CODE_PREFIX.length),\r\n    apiKey: isApiKey ? token : \"\",\r\n  };\r\n}\r\n\r\nexport function auth(req: NextRequest, modelProvider: ModelProvider) {\r\n  const authToken = req.headers.get(\"Authorization\") ?? \"\";\r\n\r\n  // check if it is openai api key or user token\r\n  const { accessCode, apiKey } = parseApiKey(authToken);\r\n\r\n  const hashedCode = md5.hash(accessCode ?? \"\").trim();\r\n\r\n  const serverConfig = getServerSideConfig();\r\n  console.log(\"[Auth] allowed hashed codes: \", [...serverConfig.codes]);\r\n  console.log(\"[Auth] got access code:\", accessCode);\r\n  console.log(\"[Auth] hashed access code:\", hashedCode);\r\n  console.log(\"[User IP] \", getIP(req));\r\n  console.log(\"[Time] \", new Date().toLocaleString());\r\n\r\n  if (serverConfig.needCode && !serverConfig.codes.has(hashedCode) && !apiKey) {\r\n    return {\r\n      error: true,\r\n      msg: !accessCode ? \"empty access code\" : \"wrong access code\",\r\n    };\r\n  }\r\n\r\n  if (serverConfig.hideUserApiKey && !!apiKey) {\r\n    return {\r\n      error: true,\r\n      msg: \"you are not allowed to access with your own api key\",\r\n    };\r\n  }\r\n\r\n  // if user does not provide an api key, inject system api key\r\n  if (!apiKey) {\r\n    const serverConfig = getServerSideConfig();\r\n\r\n    // const systemApiKey =\r\n    //   modelProvider === ModelProvider.GeminiPro\r\n    //     ? serverConfig.googleApiKey\r\n    //     : serverConfig.isAzure\r\n    //     ? serverConfig.azureApiKey\r\n    //     : serverConfig.apiKey;\r\n\r\n    let systemApiKey: string | undefined;\r\n\r\n    switch (modelProvider) {\r\n      case ModelProvider.Stability:\r\n        systemApiKey = serverConfig.stabilityApiKey;\r\n        break;\r\n      case ModelProvider.GeminiPro:\r\n        systemApiKey = serverConfig.googleApiKey;\r\n        break;\r\n      case ModelProvider.Claude:\r\n        systemApiKey = serverConfig.anthropicApiKey;\r\n        break;\r\n      case ModelProvider.Doubao:\r\n        systemApiKey = serverConfig.bytedanceApiKey;\r\n        break;\r\n      case ModelProvider.Ernie:\r\n        systemApiKey = serverConfig.baiduApiKey;\r\n        break;\r\n      case ModelProvider.Qwen:\r\n        systemApiKey = serverConfig.alibabaApiKey;\r\n        break;\r\n      case ModelProvider.Moonshot:\r\n        systemApiKey = serverConfig.moonshotApiKey;\r\n        break;\r\n      case ModelProvider.Iflytek:\r\n        systemApiKey =\r\n          serverConfig.iflytekApiKey + \":\" + serverConfig.iflytekApiSecret;\r\n        break;\r\n      case ModelProvider.DeepSeek:\r\n        systemApiKey = serverConfig.deepseekApiKey;\r\n        break;\r\n      case ModelProvider.XAI:\r\n        systemApiKey = serverConfig.xaiApiKey;\r\n        break;\r\n      case ModelProvider.ChatGLM:\r\n        systemApiKey = serverConfig.chatglmApiKey;\r\n        break;\r\n      case ModelProvider.SiliconFlow:\r\n        systemApiKey = serverConfig.siliconFlowApiKey;\r\n        break;\r\n      case ModelProvider.GPT:\r\n      default:\r\n        if (req.nextUrl.pathname.includes(\"azure/deployments\")) {\r\n          systemApiKey = serverConfig.azureApiKey;\r\n        } else {\r\n          systemApiKey = serverConfig.apiKey;\r\n        }\r\n    }\r\n\r\n    if (systemApiKey) {\r\n      console.log(\"[Auth] use system api key\");\r\n      req.headers.set(\"Authorization\", `Bearer ${systemApiKey}`);\r\n    } else {\r\n      console.log(\"[Auth] admin did not provide an api key\");\r\n    }\r\n  } else {\r\n    console.log(\"[Auth] use user api key\");\r\n  }\r\n\r\n  return {\r\n    error: false,\r\n  };\r\n}\r\n","export function prettyObject(msg: any) {\r\n  const obj = msg;\r\n  if (typeof msg !== \"string\") {\r\n    msg = JSON.stringify(msg, null, \"  \");\r\n  }\r\n  if (msg === \"{}\") {\r\n    return obj.toString();\r\n  }\r\n  if (msg.startsWith(\"```json\")) {\r\n    return msg;\r\n  }\r\n  return [\"```json\", msg, \"```\"].join(\"\\n\");\r\n}\r\n\r\nexport function* chunks(s: string, maxBytes = 1000 * 1000) {\r\n  const decoder = new TextDecoder(\"utf-8\");\r\n  let buf = new TextEncoder().encode(s);\r\n  while (buf.length) {\r\n    let i = buf.lastIndexOf(32, maxBytes + 1);\r\n    // If no space found, try forward search\r\n    if (i < 0) i = buf.indexOf(32, maxBytes);\r\n    // If there's no space at all, take all\r\n    if (i < 0) i = buf.length;\r\n    // This is a safe cut-off point; never half-way a multi-byte\r\n    yield decoder.decode(buf.slice(0, i));\r\n    buf = buf.slice(i + 1); // Skip space (if any)\r\n  }\r\n}\r\n"],"names":["module","exports","require","uint8Array","Uint8Array","uint32Array","Uint32Array","pow","Math","DEFAULT_STATE","ROUND_CONSTANTS","M","getFractionalBits","n","nPrime","isPrime","factor","LittleEndian","buffer","convertEndian","word","rightRotate","bits","sha256","data","round","STATE","slice","legth","length","bitLength","newBitLength","bytes","words","set","block","workingState","MRound","gamma0x","gamma1x","t1","t2","i","map","val","encoder","TextEncoder","hex","bin","reduce","acc","hexVal","toString","substring","hash","str","encode","message","secret","encoding","result","hmac","key","tmp","innerKey","outerKey","msg","getHeader","payload","SECRET_ID","SECRET_KEY","endpoint","service","action","timestamp","floor","Date","now","date","getDate","year","getUTCFullYear","month","getUTCMonth","day","getUTCDate","hashedRequestPayload","getHash","contentType","canonicalHeaders","toLowerCase","signedHeaders","canonicalRequest","join","algorithm","hashedCanonicalRequest","credentialScope","kDate","kService","kSigning","signature","Authorization","Host","serverConfig","getServerSideConfig","handle","req","params","console","log","method","NextResponse","json","body","status","authResult","auth","ModelProvider","Hunyuan","error","request","e","prettyObject","GET","POST","runtime","preferredRegion","controller","AbortController","baseUrl","tencentUrl","TENCENT_BASE_URL","startsWith","endsWith","timeoutId","setTimeout","abort","fetchUrl","text","fetchOptions","headers","tencentSecretId","tencentSecretKey","redirect","duplex","signal","res","fetch","newHeaders","Headers","delete","Response","statusText","clearTimeout","routeModule","module_compiled","AppRouteRouteModule","definition","kind","route_kind","x","APP_ROUTE","page","pathname","filename","bundlePath","resolvedPagePath","nextConfigOutput","userland","route_namespaceObject","requestAsyncStorage","staticGenerationAsyncStorage","serverHooks","headerHooks","staticGenerationBailout","originalPathname","patchFetch","patch_fetch","XH","ComponentMod","route_next_edge_ssr_entry_namespaceObject","next_edge_app_route_loaderabsolutePagePath_private_next_app_dir_2Fapi_2Ftencent_2Froute_ts_page_2Fapi_2Ftencent_2Froute_appDirLoader_bmV4dC1hcHAtbG9hZGVyP25hbWU9YXBwJTJGYXBpJTJGdGVuY2VudCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGdGVuY2VudCUyRnJvdXRlJnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdGVuY2VudCUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDei10b29sa2l0JTVDTmV4dENoYXQlNUNhcHAmYXBwUGF0aHM9JTJGYXBpJTJGdGVuY2VudCUyRnJvdXRlJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PXN0YW5kYWxvbmUmcHJlZmVycmVkUmVnaW9uPWFybjEmcHJlZmVycmVkUmVnaW9uPWJvbTEmcHJlZmVycmVkUmVnaW9uPWNkZzEmcHJlZmVycmVkUmVnaW9uPWNsZTEmcHJlZmVycmVkUmVnaW9uPWNwdDEmcHJlZmVycmVkUmVnaW9uPWR1YjEmcHJlZmVycmVkUmVnaW9uPWZyYTEmcHJlZmVycmVkUmVnaW9uPWdydTEmcHJlZmVycmVkUmVnaW9uPWhuZDEmcHJlZmVycmVkUmVnaW9uPWlhZDEmcHJlZmVycmVkUmVnaW9uPWljbjEmcHJlZmVycmVkUmVnaW9uPWtpeDEmcHJlZmVycmVkUmVnaW9uPWxocjEmcHJlZmVycmVkUmVnaW9uPXBkeDEmcHJlZmVycmVkUmVnaW9uPXNmbzEmcHJlZmVycmVkUmVnaW9uPXNpbjEmcHJlZmVycmVkUmVnaW9uPXN5ZDEmbWlkZGxld2FyZUNvbmZpZz1lMzAlM0Qh_nextConfigOutput_standalone_preferredRegion_arn1_preferredRegion_bom1_preferredRegion_cdg1_preferredRegion_cle1_preferredRegion_cpt1_preferredRegion_dub1_preferredRegion_fra1_preferredRegion_gru1_preferredRegion_hnd1_preferredRegion_iad1_preferredRegion_icn1_preferredRegion_kix1_preferredRegion_lhr1_preferredRegion_pdx1_preferredRegion_sfo1_preferredRegion_sin1_preferredRegion_syd1_middlewareConfig_e30_3D_","edge_route_module_wrapper","a","wrap","modelProvider","accessCode","apiKey","parseApiKey","bearToken","token","trim","replaceAll","isApiKey","ACCESS_CODE_PREFIX","get","hashedCode","md5","codes","getIP","ip","forwardedFor","split","at","toLocaleString","needCode","has","hideUserApiKey","systemApiKey","Stability","stabilityApiKey","GeminiPro","googleApiKey","Claude","anthropicApiKey","Doubao","bytedanceApiKey","Ernie","baiduApiKey","Qwen","alibabaApiKey","Moonshot","moonshotApiKey","Iflytek","iflytekApiKey","iflytekApiSecret","DeepSeek","deepseekApiKey","XAI","xaiApiKey","ChatGLM","chatglmApiKey","SiliconFlow","siliconFlowApiKey","GPT","nextUrl","includes","azureApiKey","obj","JSON","stringify"],"sourceRoot":""}