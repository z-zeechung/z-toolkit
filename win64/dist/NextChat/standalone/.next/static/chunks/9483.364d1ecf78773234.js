(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9483],{12154:function(e,t,n){"use strict";var r,i,a=n(52846);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}t.Z=function(e){return a.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),r||(r=a.createElement("defs",null,a.createElement("path",{id:"edit_svg__a",d:"M0 0h16v16H0z"}))),a.createElement("g",null,i||(i=a.createElement("mask",{id:"edit_svg__b",fill:"#fff"},a.createElement("use",{xlinkHref:"#edit_svg__a"}))),a.createElement("g",{mask:"url(#edit_svg__b)"},a.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M2.83 0v3c0 .37-.3.67-.66.67H0",transform:"translate(10.5 11)"}),a.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M10.67 4V.67c0-.37-.3-.67-.67-.67H.67C.3 0 0 .3 0 .67v12c0 .36.3.66.67.66h2",transform:"translate(2.667 1.333)"}),a.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0h4.67",transform:"translate(5.333 5.333)"}),a.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"m0 7 5.67-7",transform:"translate(7.667 7.667)"}),a.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0h2.67",transform:"translate(5.333 8)"}))))}},89483:function(e,t,n){"use strict";n.r(t),n.d(t,{PluginPage:function(){return E}});var r=n(57437),i=n(38648),a=n(35609),s=n.n(a),l=n(15582),u=n(75591),c=n(35499),o=n(68454),d=n(6031),h=n.n(d),m=n(15947),g=n.n(m),f=n(12154),k=n(58870),x=n(38669),p=n(15592),v=n(12402),_=n(98829),j=n(59566),P=n(11466),y=n(65878),b=n(43446),w=n(59208),Z=n(2265),C=n(75504);function E(){let e=(0,w.s0)(),t=(0,P.RQ)(),n=t.getAll(),[a,d]=(0,Z.useState)([]),[m,E]=(0,Z.useState)(""),N=m.length>0?a:n,T=e=>{E(e),e.length>0?d(n.filter(t=>null==t?void 0:t.title.toLowerCase().includes(e.toLowerCase()))):d(n)},[H,M]=(0,Z.useState)(),R=t.get(H),A=P.aN.get(null==R?void 0:R.id),L=(0,i.y1)((e,n)=>{let r=n.target.innerText;try{new(s())({definition:l.ZP.load(r)}).init().then(()=>{r!=e.content&&t.updatePlugin(e.id,e=>{e.content=r;let t=P.aN.add(e,!0);e.title=t.api.definition.info.title,e.version=t.api.definition.info.version})}).catch(e=>{console.error(e),(0,y.CF)(b.ZP.Plugin.EditModal.Error)})}catch(e){console.error(e),(0,y.CF)(b.ZP.Plugin.EditModal.Error)}},100).bind(null,R),[O,D]=(0,Z.useState)(""),I=e=>fetch(e).catch(t=>{let n=new URL(e);return fetch("/api/proxy/".concat(n.pathname,"?").concat(n.search),{headers:{"X-Base-URL":n.origin}})}).then(e=>e.text()).then(e=>{try{return JSON.stringify(JSON.parse(e),null,"  ")}catch(t){return e}}).then(e=>{t.updatePlugin(R.id,t=>{t.content=e;let n=P.aN.add(t,!0);t.title=n.api.definition.info.title,t.version=n.api.definition.info.version})}).catch(e=>{(0,y.CF)(b.ZP.Plugin.EditModal.Error)});return(0,r.jsxs)(o.S,{children:[(0,r.jsxs)("div",{className:h()["mask-page"],children:[(0,r.jsxs)("div",{className:"window-header",children:[(0,r.jsxs)("div",{className:"window-header-title",children:[(0,r.jsx)("div",{className:"window-header-main-title",children:b.ZP.Plugin.Page.Title}),(0,r.jsx)("div",{className:"window-header-submai-title",children:b.ZP.Plugin.Page.SubTitle(N.length)})]}),(0,r.jsxs)("div",{className:"window-actions",children:[(0,r.jsx)("div",{className:"window-action-button",children:(0,r.jsx)("a",{href:u.m9,target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)(c.h,{icon:(0,r.jsx)(j.Z,{}),bordered:!0})})}),(0,r.jsx)("div",{className:"window-action-button",children:(0,r.jsx)(c.h,{icon:(0,r.jsx)(x.Z,{}),bordered:!0,onClick:()=>e(-1)})})]})]}),(0,r.jsxs)("div",{className:h()["mask-page-body"],children:[(0,r.jsxs)("div",{className:h()["mask-filter"],children:[(0,r.jsx)("input",{type:"text",className:h()["search-bar"],placeholder:b.ZP.Plugin.Page.Search,autoFocus:!0,onInput:e=>T(e.currentTarget.value)}),(0,r.jsx)(c.h,{className:h()["mask-create"],icon:(0,r.jsx)(k.Z,{}),text:b.ZP.Plugin.Page.Create,bordered:!0,onClick:()=>{M(t.create().id)}})]}),(0,r.jsxs)("div",{children:[0==N.length&&(0,r.jsxs)("div",{style:{display:"flex",margin:"60px auto",alignItems:"center",justifyContent:"center"},children:[b.ZP.Plugin.Page.Find,(0,r.jsx)("a",{href:u.m9,target:"_blank",rel:"noopener noreferrer",style:{marginLeft:16},children:(0,r.jsx)(c.h,{icon:(0,r.jsx)(j.Z,{}),bordered:!0})})]}),N.map(e=>(0,r.jsxs)("div",{className:h()["mask-item"],children:[(0,r.jsxs)("div",{className:h()["mask-header"],children:[(0,r.jsx)("div",{className:h()["mask-icon"]}),(0,r.jsxs)("div",{className:h()["mask-title"],children:[(0,r.jsxs)("div",{className:h()["mask-name"],children:[e.title,"@",(0,r.jsx)("small",{children:e.version})]}),(0,r.jsx)("div",{className:(0,C.Z)(h()["mask-info"],"one-line"),children:b.ZP.Plugin.Item.Info(P.aN.add(e).length)})]})]}),(0,r.jsxs)("div",{className:h()["mask-actions"],children:[(0,r.jsx)(c.h,{icon:(0,r.jsx)(f.Z,{}),text:b.ZP.Plugin.Item.Edit,onClick:()=>M(e.id)}),!e.builtin&&(0,r.jsx)(c.h,{icon:(0,r.jsx)(p.Z,{}),text:b.ZP.Plugin.Item.Delete,onClick:async()=>{await (0,y.i0)(b.ZP.Plugin.Item.DeleteConfirm)&&t.delete(e.id)}})]})]},e.id))]})]})]}),R&&(0,r.jsx)("div",{className:"modal-mask",children:(0,r.jsxs)(y.u_,{title:b.ZP.Plugin.EditModal.Title(null==R?void 0:R.builtin),onClose:()=>M(void 0),actions:[(0,r.jsx)(c.h,{icon:(0,r.jsx)(v.Z,{}),text:b.ZP.UI.Confirm,bordered:!0,onClick:()=>M("")},"export")],children:[(0,r.jsxs)(y.aV,{children:[(0,r.jsx)(y.HC,{title:b.ZP.Plugin.EditModal.Auth,children:(0,r.jsxs)("select",{value:null==R?void 0:R.authType,onChange:e=>{t.updatePlugin(R.id,t=>{t.authType=e.target.value})},children:[(0,r.jsx)("option",{value:"",children:b.ZP.Plugin.Auth.None}),(0,r.jsx)("option",{value:"bearer",children:b.ZP.Plugin.Auth.Bearer}),(0,r.jsx)("option",{value:"basic",children:b.ZP.Plugin.Auth.Basic}),(0,r.jsx)("option",{value:"custom",children:b.ZP.Plugin.Auth.Custom})]})}),["bearer","basic","custom"].includes(R.authType)&&(0,r.jsx)(y.HC,{title:b.ZP.Plugin.Auth.Location,children:(0,r.jsxs)("select",{value:null==R?void 0:R.authLocation,onChange:e=>{t.updatePlugin(R.id,t=>{t.authLocation=e.target.value})},children:[(0,r.jsx)("option",{value:"header",children:b.ZP.Plugin.Auth.LocationHeader}),(0,r.jsx)("option",{value:"query",children:b.ZP.Plugin.Auth.LocationQuery}),(0,r.jsx)("option",{value:"body",children:b.ZP.Plugin.Auth.LocationBody})]})}),"custom"==R.authType&&(0,r.jsx)(y.HC,{title:b.ZP.Plugin.Auth.CustomHeader,children:(0,r.jsx)("input",{type:"text",value:null==R?void 0:R.authHeader,onChange:e=>{t.updatePlugin(R.id,t=>{t.authHeader=e.target.value})}})}),["bearer","basic","custom"].includes(R.authType)&&(0,r.jsx)(y.HC,{title:b.ZP.Plugin.Auth.Token,children:(0,r.jsx)(y.WU,{type:"text",value:null==R?void 0:R.authToken,onChange:e=>{t.updatePlugin(R.id,t=>{t.authToken=e.currentTarget.value})}})})]}),(0,r.jsxs)(y.aV,{children:[(0,r.jsx)(y.HC,{title:b.ZP.Plugin.EditModal.Content,children:(0,r.jsxs)("div",{className:g()["plugin-schema"],children:[(0,r.jsx)("input",{type:"text",style:{minWidth:200},onInput:e=>D(e.currentTarget.value)}),(0,r.jsx)(c.h,{icon:(0,r.jsx)(_.Z,{}),text:b.ZP.Plugin.EditModal.Load,bordered:!0,onClick:()=>I(O)})]})}),(0,r.jsx)(y.HC,{subTitle:(0,r.jsx)("div",{className:(0,C.Z)("markdown-body",g()["plugin-content"]),dir:"auto",children:(0,r.jsx)("pre",{children:(0,r.jsx)("code",{contentEditable:!0,dangerouslySetInnerHTML:{__html:R.content},onBlur:L})})})}),null==A?void 0:A.tools.map((e,t)=>{var n,i;return(0,r.jsx)(y.HC,{title:null==e?void 0:null===(n=e.function)||void 0===n?void 0:n.name,subTitle:null==e?void 0:null===(i=e.function)||void 0===i?void 0:i.description},t)})]})]})})]})}},38648:function(e,t,n){"use strict";n.d(t,{y1:function(){return i}});var r=n(2265);function i(e,t,n){var i=this,a=(0,r.useRef)(null),s=(0,r.useRef)(0),l=(0,r.useRef)(null),u=(0,r.useRef)([]),c=(0,r.useRef)(),o=(0,r.useRef)(),d=(0,r.useRef)(e),h=(0,r.useRef)(!0);(0,r.useEffect)(function(){d.current=e},[e]);var m=!t&&0!==t&&"undefined"!=typeof window;if("function"!=typeof e)throw TypeError("Expected a function");t=+t||0;var g=!!(n=n||{}).leading,f=!("trailing"in n)||!!n.trailing,k="maxWait"in n,x=k?Math.max(+n.maxWait||0,t):null;return(0,r.useEffect)(function(){return h.current=!0,function(){h.current=!1}},[]),(0,r.useMemo)(function(){var e=function(e){var t=u.current,n=c.current;return u.current=c.current=null,s.current=e,o.current=d.current.apply(n,t)},n=function(e,t){m&&cancelAnimationFrame(l.current),l.current=m?requestAnimationFrame(e):setTimeout(e,t)},r=function(e){if(!h.current)return!1;var n=e-a.current;return!a.current||n>=t||n<0||k&&e-s.current>=x},p=function(t){return l.current=null,f&&u.current?e(t):(u.current=c.current=null,o.current)},v=function e(){var i=Date.now();if(r(i))return p(i);if(h.current){var l=t-(i-a.current);n(e,k?Math.min(l,x-(i-s.current)):l)}},_=function(){var d=Date.now(),m=r(d);if(u.current=[].slice.call(arguments),c.current=i,a.current=d,m){if(!l.current&&h.current)return s.current=a.current,n(v,t),g?e(a.current):o.current;if(k)return n(v,t),e(a.current)}return l.current||n(v,t),o.current};return _.cancel=function(){l.current&&(m?cancelAnimationFrame(l.current):clearTimeout(l.current)),s.current=0,u.current=a.current=c.current=l.current=null},_.isPending=function(){return!!l.current},_.flush=function(){return l.current?p(Date.now()):o.current},_},[g,k,t,x,f,m])}},6031:function(e){e.exports={"mask-page":"mask_mask-page__ou14k","mask-page-body":"mask_mask-page-body__kBXsJ","mask-filter":"mask_mask-filter__OdpU3","slide-in":"mask_slide-in__unpXH","search-bar":"mask_search-bar__7_Msn","mask-filter-lang":"mask_mask-filter-lang__mRxyv","mask-create":"mask_mask-create__BjAzk","mask-item":"mask_mask-item__dinia","mask-header":"mask_mask-header__RXJXI","mask-icon":"mask_mask-icon__wO1ER","mask-title":"mask_mask-title__IDEbR","mask-name":"mask_mask-name__77Rjh","mask-info":"mask_mask-info__2gtiu","mask-actions":"mask_mask-actions__rsWn_","slide-in-from-top":"mask_slide-in-from-top__DOEYB"}},15947:function(e){e.exports={"plugin-title":"plugin_plugin-title__Yr4S3","plugin-content":"plugin_plugin-content__xCgR_","plugin-schema":"plugin_plugin-schema__Lbtdv"}}}]);